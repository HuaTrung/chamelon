(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){e.exports=n(59)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";e.exports=n(54)},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)})}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Cf}),n.d(t,"b",function(){return Ol}),n.d(t,"c",function(){return cl}),n.d(t,"d",function(){return Ic}),n.d(t,"e",function(){return jf}),n.d(t,"f",function(){return El}),n.d(t,"g",function(){return P}),n.d(t,"h",function(){return Cl}),n.d(t,"i",function(){return Af}),n.d(t,"j",function(){return Df}),n.d(t,"k",function(){return X}),n.d(t,"l",function(){return $f}),n.d(t,"m",function(){return je}),n.d(t,"n",function(){return ne}),n.d(t,"o",function(){return te}),n.d(t,"p",function(){return Oc}),n.d(t,"q",function(){return D}),n.d(t,"r",function(){return Le}),n.d(t,"s",function(){return S}),n.d(t,"t",function(){return bc}),n.d(t,"u",function(){return Gf}),n.d(t,"v",function(){return ih}),n.d(t,"w",function(){return rh}),n.d(t,"x",function(){return yl}),n.d(t,"y",function(){return Dc}),n.d(t,"z",function(){return Nc}),n.d(t,"A",function(){return Sc}),n.d(t,"B",function(){return Kf}),n.d(t,"C",function(){return th}),n.d(t,"D",function(){return bl}),n.d(t,"E",function(){return Rc}),n.d(t,"F",function(){return dl}),n.d(t,"G",function(){return pl}),n.d(t,"H",function(){return gl}),n.d(t,"I",function(){return kf}),n.d(t,"J",function(){return bf}),n.d(t,"K",function(){return fl}),n.d(t,"L",function(){return Qf}),n.d(t,"M",function(){return Pf}),n.d(t,"N",function(){return Lf}),n.d(t,"O",function(){return Mf}),n.d(t,"P",function(){return Bf}),n.d(t,"Q",function(){return Uf}),n.d(t,"R",function(){return Vf}),n.d(t,"S",function(){return ah}),n.d(t,"T",function(){return df}),n.d(t,"U",function(){return pf}),n.d(t,"V",function(){return kl}),n.d(t,"W",function(){return wl}),n.d(t,"X",function(){return Wf}),n.d(t,"Y",function(){return Hf}),n.d(t,"Z",function(){return ff}),n.d(t,"ab",function(){return of}),n.d(t,"bb",function(){return Fc}),n.d(t,"cb",function(){return Pc}),n.d(t,"db",function(){return eh}),n.d(t,"eb",function(){return nh}),n.d(t,"fb",function(){return qf}),n.d(t,"gb",function(){return T}),n.d(t,"hb",function(){return Rf}),n.d(t,"ib",function(){return mf}),n.d(t,"jb",function(){return yf}),n.d(t,"kb",function(){return zf}),n.d(t,"lb",function(){return ml}),n.d(t,"mb",function(){return sf});var r=n(22),i=n(18),a=n(11),o=n(0),u=n.n(o),s=n(4),c=n(8),l=n(6),f=n(7),h=n(13),d=n(1),p=n(2),v=n(12),y=n(17),m=n(16),g=n(9),b=n(14),k="@firebase/firestore",w=function(){function e(t){Object(d.a)(this,e),this.uid=t}return Object(p.a)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();w.UNAUTHENTICATED=new w(null),w.GOOGLE_CREDENTIALS=new w("google-credentials-uid"),w.FIRST_PARTY=new w("first-party-uid"),w.MOCK_USER=new w("mock-user");var x="9.15.0",O=new m.b("@firebase/firestore");function E(){return O.logLevel}function T(e){O.setLogLevel(e)}function C(e){if(O.logLevel<=m.a.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(I);O.debug.apply(O,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function _(e){if(O.logLevel<=m.a.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(I);O.error.apply(O,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function S(e){if(O.logLevel<=m.a.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(I);O.warn.apply(O,["Firestore (".concat(x,"): ").concat(e)].concat(Object(h.a)(i)))}}function I(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(x,") INTERNAL ASSERTION FAILED: ")+e;throw _(t),new Error(t)}function A(e,t){e||j()}function D(e,t){e||j()}function N(e,t){return e}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n))).code=e,r.message=n,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return Object(f.a)(t,e),t}(g.c),F=function e(){var t=this;Object(d.a)(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},L=function e(t,n){Object(d.a)(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},M=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(w.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),B=function(){function e(t){Object(d.a)(this,e),this.token=t,this.changeListener=null}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),U=function(){function e(t){Object(d.a)(this,e),this.t=t,this.currentUser=w.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(p.a)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new F;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new F,e.enqueueRetryable(function(){return i(n.currentUser)})};var o=function(){var t=a;e.enqueueRetryable(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}},e)})))},c=function(e){C("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit(function(e){return c(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new F)}},0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(A("string"==typeof n.accessToken),new L(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return A(null===e||"string"==typeof e),new w(e)}}]),e}(),V=function(){function e(t,n,r,i){Object(d.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=w.FIRST_PARTY,this.p=new Map}return Object(p.a)(e,[{key:"I",value:function(){return this.g?this.g():(A(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),q=function(){function e(t,n,r,i){Object(d.a)(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return Object(p.a)(e,[{key:"getToken",value:function(){return Promise.resolve(new V(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(w.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),z=function e(t){Object(d.a)(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},K=function(){function e(t){Object(d.a)(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return Object(p.a)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&C("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,C("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable(function(){return r(t)})};var i=function(e){C("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit(function(e){return i(e)}),setTimeout(function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(function(t){return t?(A("string"==typeof t.token),e.A=t.token,new z(t.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function G(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var W=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=G(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function H(e,t){return e<t?-1:e>t?1:0}function Q(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Y(e){return e+"\0"}var X=function(){function e(t,n){if(Object(d.a)(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Object(p.a)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?H(this.nanoseconds,e.nanoseconds):H(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),$=function(){function e(t){Object(d.a)(this,e),this.timestamp=t}return Object(p.a)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new X(0,0))}},{key:"max",value:function(){return new e(new X(253402300799,999999999))}}]),e}(),J=function(){function e(t,n,r){Object(d.a)(this,e),void 0===n?n=0:n>t.length&&j(),void 0===r?r=t.length-n:r>t.length-n&&j(),this.segments=t,this.offset=n,this.len=r}return Object(p.a)(e,[{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}},{key:"length",get:function(){return this.len}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Z=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Object(h.a)(u.split("/").filter(function(e){return e.length>0})))}return new t(e)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(J),ee=/^[_a-zA-Z][_a-zA-Z0-9]*$/,te=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"construct",value:function(e,n,r){return new t(e,n,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ee.test(e)}},{key:"keyField",value:function(){return new t(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new P(R.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}},{key:"emptyPath",value:function(){return new t([])}}]),t}(J),ne=function(){function e(t){Object(d.a)(this,e),this.path=t}return Object(p.a)(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Z.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}},{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}}],[{key:"fromPath",value:function(t){return new e(Z.fromString(t))}},{key:"fromName",value:function(t){return new e(Z.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Z.emptyPath())}},{key:"comparator",value:function(e,t){return Z.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Z(t.slice()))}}]),e}(),re=function e(t,n,r,i){Object(d.a)(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i};function ie(e){return e.fields.find(function(e){return 2===e.kind})}function ae(e){return e.fields.filter(function(e){return 2!==e.kind})}re.UNKNOWN_ID=-1;var oe=function e(t,n){Object(d.a)(this,e),this.fieldPath=t,this.kind=n};var ue=function(){function e(t,n){Object(d.a)(this,e),this.sequenceNumber=t,this.offset=n}return Object(p.a)(e,null,[{key:"empty",value:function(){return new e(0,le.min())}}]),e}();function se(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$.fromTimestamp(1e9===r?new X(n+1,0):new X(n,r));return new le(i,ne.empty(),t)}function ce(e){return new le(e.readTime,e.key,-1)}var le=function(){function e(t,n,r){Object(d.a)(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Object(p.a)(e,null,[{key:"min",value:function(){return new e($.min(),ne.empty(),-1)}},{key:"max",value:function(){return new e($.max(),ne.empty(),-1)}}]),e}();function fe(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ne.comparator(e.documentKey,t.documentKey))?n:H(e.largestBatchId,t.largestBatchId)}var he="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",de=function(){function e(){Object(d.a)(this,e),this.onCommittedListeners=[]}return Object(p.a)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}();function pe(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===R.FAILED_PRECONDITION&&t.message===he){e.next=2;break}throw t;case 2:C("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ye=function(){function e(t){var n=this;Object(d.a)(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return Object(p.a)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,a=!1;t.forEach(function(t){++r,t.next(function(){++i,a&&i===r&&e()},function(e){return n(e)})}),a=!0,i===r&&e()})}},{key:"or",value:function(t){var n=e.resolve(!1),r=!0,i=!1,a=void 0;try{for(var o,u=function(){var t=o.value;n=n.next(function(n){return n?e.resolve(n):t()})},s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u()}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e(function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next(function(t){a[s]=t,++o===i&&e(a)},function(e){return r(e)})},s=0;s<i;s++)u(s)})}},{key:"doWhile",value:function(t,n){return new e(function(e,r){!function i(){!0===t()?n().next(function(){i()},r):e()}()})}}]),e}(),me=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new F,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new ke(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Te(e.target.error);r.P.reject(new ke(t,n))}}return Object(p.a)(e,[{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(C("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new xe(t)}},{key:"v",get:function(){return this.P.promise}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ke(n,t)}}}]),e}(),ge=function(){function t(e,n,r){Object(d.a)(this,t),this.name=e,this.version=n,this.S=r,12.2===t.D(Object(g.m)())&&_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Object(p.a)(t,[{key:"F",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return C("SimpleDb","Opening database:",this.name),e.next=5,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ke(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ke(t,n))},i.onupgradeneeded=function(e){C("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next(function(){C("SimpleDb","Database upgrade to version "+n.version+" complete")})}});case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c,l,f=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(u.a.mark(function e(){var n,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.F(t);case 2:return f.db=e.sent,n=me.open(f.db,t,a?"readonly":"readwrite",r),(o=i(n).next(function(e){return n.V(),e}).catch(function(e){return n.abort(e),ye.reject(e)}).toPromise()).catch(function(){}),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}},e)})(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c=e.t1,l="FirebaseError"!==c.name&&o<3,C("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),l){e.next=15;break}return e.abrupt("return",Promise.reject(c));case 15:e.next=2;break;case 17:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return C("SimpleDb","Removing database:",e),Oe(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Object(g.o)())return!1;if(t.N())return!0;var e=Object(g.m)(),n=t.D(e),r=0<n&&n<10,i=t.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:""}))||void 0===t?void 0:t.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),be=function(){function e(t){Object(d.a)(this,e),this.q=t,this.U=!1,this.K=null}return Object(p.a)(e,[{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Oe(this.q.delete())}},{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}}]),e}(),ke=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,R.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)))).name="IndexedDbTransactionError",r}return Object(f.a)(t,e),t}(P);function we(e){return"IndexedDbTransactionError"===e.name}var xe=function(){function e(t){Object(d.a)(this,e),this.store=t}return Object(p.a)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(C("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(C("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Oe(n)}},{key:"add",value:function(e){return C("SimpleDb","ADD",this.store.name,e,e),Oe(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Oe(this.store.get(e)).next(function(n){return void 0===n&&(n=null),C("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return C("SimpleDb","DELETE",this.store.name,e),Oe(this.store.delete(e))}},{key:"count",value:function(){return C("SimpleDb","COUNT",this.store.name),Oe(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,function(e,t){i.push(t)}).next(function(){return i})}var a=this.store.getAll(n.range);return new ye(function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}})}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ye(function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}})}},{key:"Y",value:function(e,t){C("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,function(e,t,n){return n.delete()})}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new ye(function(n,r){t.onerror=function(e){var t=Te(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"H",value:function(e,t){var n=[];return new ye(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new be(i),o=t(i.primaryKey,i.value,a);if(o instanceof ye){var u=o.catch(function(e){return a.done(),ye.reject(e)});n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}}).next(function(){return ye.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Oe(e){return new ye(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Te(e.target.error);n(t)}})}var Ee=!1;function Te(e){var t=ge.D(Object(g.m)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new P("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ee||(Ee=!0,setTimeout(function(){throw r},0)),r}}return e}var Ce=function(){function e(t,n){Object(d.a)(this,e),this.asyncQueue=t,this.et=n,this.task=null}return Object(p.a)(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"nt",value:function(e){var t=this;C("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=C,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!we(e.t4)){e.next=17;break}C("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,pe(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}},e,null,[[1,11]])})))}},{key:"started",get:function(){return null!==this.task}}]),e}(),_e=function(){function e(t,n){Object(d.a)(this,e),this.localStore=t,this.persistence=n}return Object(p.a)(e,[{key:"st",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n=this,r=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",function(e){return n.it(e,t)}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return ye.doWhile(function(){return!0===a&&i>0},function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(function(t){if(null!==t&&!r.has(t))return C("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next(function(e){i-=e,r.add(t)});a=!1})}).next(function(){return t-i})}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next(function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next(function(){return r.ot(i,n)}).next(function(n){return C("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)}).next(function(){return a.size})})})}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach(function(e,t){var r=ce(t);fe(r,n)>0&&(n=r)}),new le(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Se=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return Object(p.a)(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Se.at=-1;var Ie=function e(t,n,r,i,a,o,u,s){Object(d.a)(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},je=function(){function e(t,n){Object(d.a)(this,e),this.projectId=t,this.database=n||"(default)"}return Object(p.a)(e,[{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ae(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function De(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ne(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Re(e){return null==e}function Pe(e){return 0===e&&1/e==-1/0}function Fe(e){return"number"==typeof e&&Number.isInteger(e)&&!Pe(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Le(){return"undefined"!=typeof atob}var Me=function(){function e(t){Object(d.a)(this,e),this.binaryString=t}return Object(p.a)(e,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return H(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Me.EMPTY_BYTE_STRING=new Me("");var Be=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ue(e){if(A(!!e),"string"==typeof e){var t=0,n=Be.exec(e);if(A(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ve(e.seconds),nanos:Ve(e.nanos)}}function Ve(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qe(e){return"string"==typeof e?Me.fromBase64String(e):Me.fromUint8Array(e)}function ze(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ke(e){var t=Ue(e.mapValue.fields.__local_write_time__.timestampValue);return new X(t.seconds,t.nanos)}var Ge={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},We={nullValue:"NULL_VALUE"};function He(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ze(e)?4:ot(e)?9007199254740991:10:j()}function Qe(e,t){if(e===t)return!0;var n=He(e);if(n!==He(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ke(e).isEqual(Ke(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ue(e.timestampValue),r=Ue(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qe(e.bytesValue).isEqual(qe(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ve(e.geoPointValue.latitude)===Ve(t.geoPointValue.latitude)&&Ve(e.geoPointValue.longitude)===Ve(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ve(e.integerValue)===Ve(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ve(e.doubleValue),r=Ve(t.doubleValue);return n===r?Pe(n)===Pe(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Q(e.arrayValue.values||[],t.arrayValue.values||[],Qe);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ae(n)!==Ae(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qe(n[i],r[i])))return!1;return!0}(e,t);default:return j()}}function Ye(e,t){return void 0!==(e.values||[]).find(function(e){return Qe(e,t)})}function Xe(e,t){if(e===t)return 0;var n=He(e),r=He(t);if(n!==r)return H(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ve(e.integerValue||e.doubleValue),r=Ve(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $e(e.timestampValue,t.timestampValue);case 4:return $e(Ke(e),Ke(t));case 5:return H(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qe(e),r=qe(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=H(n[i],r[i]);if(0!==a)return a}return H(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=H(Ve(e.latitude),Ve(t.latitude));return 0!==n?n:H(Ve(e.longitude),Ve(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xe(n[i],r[i]);if(a)return a}return H(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ge.mapValue&&t===Ge.mapValue)return 0;if(e===Ge.mapValue)return 1;if(t===Ge.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=H(r[o],a[o]);if(0!==u)return u;var s=Xe(n[r[o]],i[a[o]]);if(0!==s)return s}return H(r.length,a.length)}(e.mapValue,t.mapValue);default:throw j()}}function $e(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return H(e,t);var n=Ue(e),r=Ue(t),i=H(n.seconds,r.seconds);return 0!==i?i:H(n.nanos,r.nanos)}function Je(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){var t=Ue(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?qe(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ne.fromName(r).toString()):"geoPointValue"in t?"geo(".concat((n=t.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in t?function(t){var n="[",r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=(t.values||[])[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;r?r=!1:n+=",",n+=e(c)}}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return n+"]"}(t.arrayValue):"mapValue"in t?function(t){var n=Object.keys(t.fields||{}).sort(),r="{",i=!0,a=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;i?i=!1:r+=",",r+="".concat(l,":").concat(e(t.fields[l]))}}catch(f){o=!0,u=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return r+"}"}(t.mapValue):j();var n,r}(e)}function Ze(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function et(e){return!!e&&"integerValue"in e}function tt(e){return!!e&&"arrayValue"in e}function nt(e){return!!e&&"nullValue"in e}function rt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function it(e){return!!e&&"mapValue"in e}function at(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return De(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=at(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=at(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ot(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ut(e){return"nullValue"in e?We:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ze(je.empty(),ne.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:j()}function st(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ze(je.empty(),ne.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ge:j()}function ct(e,t){var n=Xe(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function lt(e,t){var n=Xe(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ft=function e(t,n){Object(d.a)(this,e),this.position=t,this.inclusive=n};function ht(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ne.comparator(ne.fromName(o.referenceValue),n.key):Xe(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function dt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Qe(e.position[n],t.position[n]))return!1;return!0}var pt=function e(){Object(d.a)(this,e)},vt=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).field=e,i.op=n,i.value=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xe(t,this.value)):null!==t&&He(this.value)===He(t)&&this.matchesComparison(Xe(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new Et(e,n,r):"array-contains"===n?new St(e,r):"in"===n?new It(e,r):"not-in"===n?new jt(e,r):"array-contains-any"===n?new At(e,r):new t(e,n,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Tt(e,n):new Ct(e,n)}}]),t}(pt),yt=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).filters=e,r.op=n,r.ht=null,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){return mt(this)?void 0===this.filters.find(function(t){return!t.matches(e)}):void 0!==this.filters.find(function(t){return t.matches(e)})}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce(function(e,t){return e.concat(t.getFlattenedFilters())},[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt(function(e){return e.isInequality()});return null!==e?e.field:null}},{key:"lt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getFlattenedFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(e(o))return o}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}}],[{key:"create",value:function(e,n){return new t(e,n)}}]),t}(pt);function mt(e){return"and"===e.op}function gt(e){return"or"===e.op}function bt(e){return kt(e)&&mt(e)}function kt(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value instanceof yt)return!1}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}function wt(e,t){return e instanceof vt?function(e,t){return t instanceof vt&&e.op===t.op&&e.field.isEqual(t.field)&&Qe(e.value,t.value)}(e,t):e instanceof yt?function(e,t){return t instanceof yt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(function(e,n,r){return e&&wt(n,t.filters[r])},!0)}(e,t):void j()}function xt(e,t){var n=e.filters.concat(t);return yt.create(n,e.op)}function Ot(e){return e instanceof vt?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Je(e.value))}(e):e instanceof yt?function(e){return e.op.toString()+" {"+e.getFilters().map(Ot).join(" ,")+"}"}(e):"Filter"}var Et=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r))).key=ne.fromName(r.referenceValue),i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}}]),t}(vt),Tt=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,"in",n))).keys=_t("in",n),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(vt),Ct=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,"not-in",n))).keys=_t("not-in",n),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),t}(vt);function _t(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return ne.fromName(e.referenceValue)})}var St=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"array-contains",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return tt(t)&&Ye(t.arrayValue,this.value)}}]),t}(vt),It=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"in",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ye(this.value.arrayValue,t)}}]),t}(vt),jt=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"not-in",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){if(Ye(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ye(this.value.arrayValue,t)}}]),t}(vt),At=function(e){function t(e,n){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,"array-contains-any",n))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!tt(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return Ye(t.value.arrayValue,e)})}}]),t}(vt),Dt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(d.a)(this,e),this.field=t,this.dir=n};function Nt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Rt=function(){function e(t,n){Object(d.a)(this,e),this.comparator=t,this.root=n||Ft.EMPTY}return Object(p.a)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ft.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Pt(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Pt(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Pt(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Pt(this.root,e,this.comparator,!0)}},{key:"size",get:function(){return this.root.size}}]),e}(),Pt=function(){function e(t,n,r,i){Object(d.a)(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Object(p.a)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ft=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Object(p.a)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw j();if(this.right.isRed())throw j();var e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}}]),e}();Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1,Ft.EMPTY=new(function(){function e(){Object(d.a)(this,e),this.size=0}return Object(p.a)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ft(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}},{key:"key",get:function(){throw j()}},{key:"value",get:function(){throw j()}},{key:"color",get:function(){throw j()}},{key:"left",get:function(){throw j()}},{key:"right",get:function(){throw j()}}]),e}());var Lt=function(){function e(t){Object(d.a)(this,e),this.comparator=t,this.data=new Rt(this.comparator)}return Object(p.a)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Mt(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Mt(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}},{key:"size",get:function(){return this.data.size}}]),e}(),Mt=function(){function e(t){Object(d.a)(this,e),this.iter=t}return Object(p.a)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Bt(e){return e.hasNext()?e.getNext():void 0}var Ut=function(){function e(t){Object(d.a)(this,e),this.fields=t,t.sort(te.comparator)}return Object(p.a)(e,[{key:"unionWith",value:function(t){var n=new Lt(te.comparator),r=!0,i=!1,a=void 0;try{for(var o,u=this.fields[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n=n.add(s)}}catch(v){i=!0,a=v}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var c=!0,l=!1,f=void 0;try{for(var h,d=t[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n=n.add(p)}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new e(n.toArray())}},{key:"covers",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.fields[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.isPrefixOf(e))return!0}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(e){return Q(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Vt=function(){function e(t){Object(d.a)(this,e),this.value=t}return Object(p.a)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!it(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=at(t)}},{key:"setAll",value:function(e){var t=this,n=te.emptyPath(),r={},i=[];e.forEach(function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=at(e):i.push(a.lastSegment())});var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());it(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Qe(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){De(t,function(t,n){return e[t]=n});var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;delete e[s]}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"clone",value:function(){return new e(at(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function qt(e){var t=[];return De(e.fields,function(e,n){var r=new te([e]);if(it(n)){var i=qt(n.mapValue).fields;if(0===i.length)t.push(r);else{var a=!0,o=!1,u=void 0;try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;t.push(r.child(l))}}catch(f){o=!0,u=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}}}else t.push(r)}),new Ut(t)}var zt=function(){function e(t,n,r,i,a,o,u){Object(d.a)(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Object(p.a)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual($.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=$.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,$.min(),$.min(),$.min(),Vt.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,$.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,$.min(),$.min(),Vt.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,$.min(),$.min(),Vt.empty(),2)}}]),e}(),Kt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(d.a)(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null};function Gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Kt(e,t,n,r,i,a,o)}function Wt(e){var t=N(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function e(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+Je(t.value);var n=t.filters.map(function(t){return e(t)}).join(",");return"".concat(t.op,"(").concat(n,")")}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),Re(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(function(e){return Je(e)}).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(function(e){return Je(e)}).join(",")),t.ft=n}return t.ft}function Ht(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Nt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!wt(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dt(e.startAt,t.startAt)&&dt(e.endAt,t.endAt)}function Qt(e){return ne.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Yt(e,t){return e.filters.filter(function(e){return e instanceof vt&&e.field.isEqual(t)})}function Xt(e,t,n){var r=We,i=!0,a=!0,o=!1,u=void 0;try{for(var s,c=Yt(e,t)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=We,h=!0;switch(l.op){case"<":case"<=":f=ut(l.value);break;case"==":case"in":case">=":f=l.value;break;case">":f=l.value,h=!1;break;case"!=":case"not-in":f=We}ct({value:r,inclusive:i},{value:f,inclusive:h})<0&&(r=f,i=h)}}catch(v){o=!0,u=v}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(null!==n)for(var d=0;d<e.orderBy.length;++d)if(e.orderBy[d].field.isEqual(t)){var p=n.position[d];ct({value:r,inclusive:i},{value:p,inclusive:n.inclusive})<0&&(r=p,i=n.inclusive);break}return{value:r,inclusive:i}}function $t(e,t,n){var r=Ge,i=!0,a=!0,o=!1,u=void 0;try{for(var s,c=Yt(e,t)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=Ge,h=!0;switch(l.op){case">=":case">":f=st(l.value),h=!1;break;case"==":case"in":case"<=":f=l.value;break;case"<":f=l.value,h=!1;break;case"!=":case"not-in":f=Ge}lt({value:r,inclusive:i},{value:f,inclusive:h})>0&&(r=f,i=h)}}catch(v){o=!0,u=v}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(null!==n)for(var d=0;d<e.orderBy.length;++d)if(e.orderBy[d].field.isEqual(t)){var p=n.position[d];lt({value:r,inclusive:i},{value:p,inclusive:n.inclusive})>0&&(r=p,i=n.inclusive);break}return{value:r,inclusive:i}}var Jt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(d.a)(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt};function Zt(e,t,n,r,i,a,o,u){return new Jt(e,t,n,r,i,a,o,u)}function en(e){return new Jt(e)}function tn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nn(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function rn(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.filters[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value.getFirstInequalityField();if(null!==o)return o}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}function an(e){return null!==e.collectionGroup}function on(e){var t=N(e);if(null===t.dt){t.dt=[];var n=rn(t),r=nn(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Dt(n)),t.dt.push(new Dt(te.keyField(),"asc"));else{var i=!1,a=!0,o=!1,u=void 0;try{for(var s,c=t.explicitOrderBy[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;t.dt.push(l),l.field.isKeyField()&&(i=!0)}}catch(h){o=!0,u=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}if(!i){var f=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Dt(te.keyField(),f))}}}return t.dt}function un(e){var t=N(e);if(!t._t)if("F"===t.limitType)t._t=Gt(t.path,t.collectionGroup,on(t),t.filters,t.limit,t.startAt,t.endAt);else{var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=on(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c="desc"===s.dir?"asc":"desc";n.push(new Dt(s.field,c))}}catch(h){i=!0,a=h}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var l=t.endAt?new ft(t.endAt.position,t.endAt.inclusive):null,f=t.startAt?new ft(t.startAt.position,t.startAt.inclusive):null;t._t=Gt(t.path,t.collectionGroup,n,t.filters,t.limit,l,f)}return t._t}function sn(e,t){t.getFirstInequalityField(),rn(e);var n=e.filters.concat([t]);return new Jt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cn(e,t,n){return new Jt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ln(e,t){return Ht(un(e),un(t))&&e.limitType===t.limitType}function fn(e){return"".concat(Wt(un(e)),"|lt:").concat(e.limitType)}function hn(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return Ot(e)}).join(", "),"]")),Re(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)}).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(function(e){return Je(e)}).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(function(e){return Je(e)}).join(",")),"Target(".concat(t,")")}(un(e)),"; limitType=").concat(e.limitType,")")}function dn(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ne.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=on(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(!u.field.isKeyField()&&null===t.data.field(u.field))return!1}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(!a.value.matches(t))return!1}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ht(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,on(e),t))&&!(e.endAt&&!function(e,t,n){var r=ht(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,on(e),t))}(e,t)}function pn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vn(e){return function(t,n){var r=!1,i=!0,a=!1,o=void 0;try{for(var u,s=on(e)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=yn(c,t,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(f){a=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return 0}}function yn(e,t,n){var r=e.field.isKeyField()?ne.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xe(r,i):j()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}function mn(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pe(t)?"-0":t}}function gn(e){return{integerValue:""+e}}function bn(e,t){return Fe(t)?gn(t):mn(e,t)}var kn=function e(){Object(d.a)(this,e),this._=void 0};function wn(e,t,n){return e instanceof En?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Tn?Cn(e,t):e instanceof _n?Sn(e,t):function(e,t){var n=On(e,t),r=jn(n)+jn(e.gt);return et(n)&&et(e.gt)?gn(r):mn(e.yt,r)}(e,t)}function xn(e,t,n){return e instanceof Tn?Cn(e,t):e instanceof _n?Sn(e,t):n}function On(e,t){return e instanceof In?et(n=t)||n&&"doubleValue"in n?t:{integerValue:0}:null;var n}var En=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),t}(kn),Tn=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).elements=e,n}return Object(f.a)(t,e),t}(kn);function Cn(e,t){var n=An(t),r=!0,i=!1,a=void 0;try{for(var o,u=function(){var e=o.value;n.some(function(t){return Qe(t,e)})||n.push(e)},s=e.elements[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u()}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var _n=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).elements=e,n}return Object(f.a)(t,e),t}(kn);function Sn(e,t){var n=An(t),r=!0,i=!1,a=void 0;try{for(var o,u=function(){var e=o.value;n=n.filter(function(t){return!Qe(t,e)})},s=e.elements[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)u()}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{arrayValue:{values:n}}}var In=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).yt=e,r.gt=n,r}return Object(f.a)(t,e),t}(kn);function jn(e){return Ve(e.integerValue||e.doubleValue)}function An(e){return tt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Dn=function e(t,n){Object(d.a)(this,e),this.field=t,this.transform=n};var Nn=function e(t,n){Object(d.a)(this,e),this.version=t,this.transformResults=n},Rn=function(){function e(t,n){Object(d.a)(this,e),this.updateTime=t,this.exists=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}},{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Pn(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Fn=function e(){Object(d.a)(this,e)};function Ln(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yn(e.key,Rn.none()):new qn(e.key,e.data,Rn.none());var n=e.data,r=Vt.empty(),i=new Lt(te.comparator),a=!0,o=!1,u=void 0;try{for(var s,c=t.fields[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(h){o=!0,u=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return new zn(e.key,r,new Ut(i.toArray()),Rn.none())}function Mn(e,t,n){e instanceof qn?function(e,t,n){var r=e.value.clone(),i=Gn(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zn?function(e,t,n){if(Pn(e.precondition,t)){var r=Gn(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kn(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bn(e,t,n,r){return e instanceof qn?function(e,t,n,r){if(!Pn(e.precondition,t))return n;var i=e.value.clone(),a=Wn(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof zn?function(e,t,n,r){if(!Pn(e.precondition,t))return n;var i=Wn(e.fieldTransforms,r,t),a=t.data;return a.setAll(Kn(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(function(e){return e.field}))}(e,t,n,r):function(e,t,n){return Pn(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Un(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,u=e.fieldTransforms[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=t.data.field(s.field),l=On(s.transform,c||null);null!=l&&(null===n&&(n=Vt.empty()),n.set(s.field,l))}}catch(f){i=!0,a=f}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n||null}function Vn(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Q(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Tn&&t instanceof Tn||e instanceof _n&&t instanceof _n?Q(e.elements,t.elements,Qe):e instanceof In&&t instanceof In?Qe(e.gt,t.gt):e instanceof En&&t instanceof En}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var qn=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,i.value=n,i.precondition=r,i.fieldTransforms=a,i.type=0,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(Fn),zn=function(e){function t(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(d.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),t}(Fn);function Kn(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Gn(e,t,n){var r=new Map;A(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,xn(o,u,n[i]))}return r}function Wn(e,t,n){var r=new Map,i=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,wn(l,f,t))}}catch(h){a=!0,o=h}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}var Hn,Qn,Yn=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(Fn),Xn=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getFieldMask",value:function(){return null}}]),t}(Fn),$n=function e(t){Object(d.a)(this,e),this.count=t};function Jn(e){switch(e){default:return j();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Zn(e){if(void 0===e)return _("GRPC error has no .code"),R.UNKNOWN;switch(e){case Hn.OK:return R.OK;case Hn.CANCELLED:return R.CANCELLED;case Hn.UNKNOWN:return R.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return R.INTERNAL;case Hn.UNAVAILABLE:return R.UNAVAILABLE;case Hn.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Hn.NOT_FOUND:return R.NOT_FOUND;case Hn.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Hn.ABORTED:return R.ABORTED;case Hn.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Hn.DATA_LOSS:return R.DATA_LOSS;default:return j()}}(Qn=Hn||(Hn={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";var er=function(){function e(t,n){Object(d.a)(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Object(p.a)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r=!0,i=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value,l=Object(a.a)(c,2),f=l[0],h=l[1];if(this.equalsFn(f,e))return h}}catch(d){i=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){De(this.inner,function(t,n){var r=!0,i=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value,l=Object(a.a)(c,2),f=l[0],h=l[1];e(f,h)}}catch(d){i=!0,o=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}})}},{key:"isEmpty",value:function(){return Ne(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),tr=new Rt(ne.comparator);function nr(){return tr}var rr=new Rt(ne.comparator);function ir(){for(var e=rr,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ar(e){var t=rr;return e.forEach(function(e,n){return t=t.insert(e,n.overlayedDocument)}),t}function or(){return sr()}function ur(){return sr()}function sr(){return new er(function(e){return e.toString()},function(e,t){return e.isEqual(t)})}var cr=new Rt(ne.comparator),lr=new Lt(ne.comparator);function fr(){for(var e=lr,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hr=new Lt(H);function dr(){return hr}var pr=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Object(p.a)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,vr.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e($.min(),i,dr(),nr(),fr())}}]),e}(),vr=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Object(p.a)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,fr(),fr(),fr())}}]),e}(),yr=function e(t,n,r,i){Object(d.a)(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i},mr=function e(t,n){Object(d.a)(this,e),this.targetId=t,this.Et=n},gr=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Me.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(d.a)(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},br=function(){function e(){Object(d.a)(this,e),this.At=0,this.Rt=xr(),this.bt=Me.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return Object(p.a)(e,[{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=fr(),t=fr(),n=fr();return this.Rt.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j()}}),new vr(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=xr()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}},{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}}]),e}(),kr=function(){function e(t){Object(d.a)(this,e),this.$t=t,this.Bt=new Map,this.Lt=nr(),this.qt=wr(),this.Ut=new Lt(H)}return Object(p.a)(e,[{key:"Kt",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.It[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(o,e.Tt):this.Qt(o,e.key,e.Tt)}}catch(d){n=!0,r=d}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var u=!0,s=!1,c=void 0;try{for(var l,f=e.removedTargetIds[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;this.Qt(h,e.key,e.Tt)}}catch(d){s=!0,c=d}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:j()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach(function(e,r){n.zt(r)&&t(r)})}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(Qt(i))if(0===n){var a=new ne(i.path);this.Qt(t,a,zt.newNoDocument(a,$.min()))}else A(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach(function(r,i){var a=t.Yt(i);if(a){if(r.current&&Qt(a.target)){var o=new ne(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,zt.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}});var r=fr();this.qt.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.Lt.forEach(function(t,n){return n.setReadTime(e)});var i=new pr(e,n,this.Ut,this.Lt,r);return this.Lt=nr(),this.qt=wr(),this.Ut=new Lt(H),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new br,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Lt(H),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||C("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new br),this.$t.getRemoteKeysForTarget(e).forEach(function(n){t.Qt(e,n,null)})}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function wr(){return new Rt(ne.comparator)}function xr(){return new Rt(ne.comparator)}var Or={asc:"ASCENDING",desc:"DESCENDING"},Er={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tr={and:"AND",or:"OR"},Cr=function e(t,n){Object(d.a)(this,e),this.databaseId=t,this.wt=n};function _r(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sr(e,t){return e.wt?t.toBase64():t.toUint8Array()}function Ir(e,t){return _r(e,t.toTimestamp())}function jr(e){return A(!!e),$.fromTimestamp(function(e){var t=Ue(e);return new X(t.seconds,t.nanos)}(e))}function Ar(e,t){return function(e){return new Z(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Dr(e){var t=Z.fromString(e);return A(Zr(t)),t}function Nr(e,t){return Ar(e.databaseId,t.path)}function Rr(e,t){var n=Dr(t);if(n.get(1)!==e.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ne(Mr(n))}function Pr(e,t){return Ar(e.databaseId,t)}function Fr(e){var t=Dr(e);return 4===t.length?Z.emptyPath():Mr(t)}function Lr(e){return new Z(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mr(e){return A(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Br(e,t,n){return{name:Nr(e,t),fields:n.value.mapValue.fields}}function Ur(e,t,n){var r=Rr(e,t.name),i=jr(t.updateTime),a=t.createTime?jr(t.createTime):$.min(),o=new Vt({mapValue:{fields:t.fields}}),u=zt.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Vr(e,t){return"found"in t?function(e,t){A(!!t.found),t.found.name,t.found.updateTime;var n=Rr(e,t.found.name),r=jr(t.found.updateTime),i=t.found.createTime?jr(t.found.createTime):$.min(),a=new Vt({mapValue:{fields:t.found.fields}});return zt.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){A(!!t.missing),A(!!t.readTime);var n=Rr(e,t.missing),r=jr(t.readTime);return zt.newNoDocument(n,r)}(e,t):j()}function qr(e,t){var n;if(t instanceof qn)n={update:Br(e,t.key,t.value)};else if(t instanceof Yn)n={delete:Nr(e,t.key)};else if(t instanceof zn)n={update:Br(e,t.key,t.data),updateMask:Jr(t.fieldMask)};else{if(!(t instanceof Xn))return j();n={verify:Nr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof En)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Tn)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _n)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof In)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw j()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ir(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:j()}(e,t.precondition)),n}function zr(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Rn.updateTime(jr(e.updateTime)):void 0!==e.exists?Rn.exists(e.exists):Rn.none()}(t.currentDocument):Rn.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;if("setToServerValue"in t)A("REQUEST_TIME"===t.setToServerValue),n=new En;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Tn(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new _n(i)}else"increment"in t?n=new In(e,t.increment):j();var a=te.fromServerFormat(t.fieldPath);return new Dn(a,n)}(e,t)}):[];if(t.update){t.update.name;var i=Rr(e,t.update.name),a=new Vt({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ut(t.map(function(e){return te.fromServerFormat(e)}))}(t.updateMask);return new zn(i,a,o,n,r)}return new qn(i,a,n,r)}if(t.delete){var u=Rr(e,t.delete);return new Yn(u,n)}if(t.verify){var s=Rr(e,t.verify);return new Xn(s,n)}return j()}function Kr(e,t){return{documents:[Pr(e,t.path)]}}function Gr(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Pr(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pr(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return function e(t){return t instanceof vt?function(e){if("=="===e.op){if(rt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NAN"}};if(nt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NAN"}};if(nt(e.value))return{unaryFilter:{field:Xr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xr(e.field),op:Qr(e.op),value:e.value}}}(t):t instanceof yt?function(t){var n=t.getFilters().map(function(t){return e(t)});return 1===n.length?n[0]:{compositeFilter:{op:Yr(t.op),filters:n}}}(t):j()}(yt.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:Xr(e.field),direction:Hr(e.dir)}}(e)})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Re(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wr(e){var t=Fr(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){A(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=$r(e.unaryFilter.field);return vt.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=$r(e.unaryFilter.field);return vt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$r(e.unaryFilter.field);return vt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$r(e.unaryFilter.field);return vt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(t):void 0!==t.fieldFilter?function(e){return vt.create($r(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return yt.create(t.compositeFilter.filters.map(function(t){return e(t)}),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return j()}}(t.compositeFilter.op))}(t):j()}(n.where);return t instanceof yt&&bt(t)?t.getFilters():[t]}());var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return function(e){return new Dt($r(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var s=null;n.limit&&(s=function(e){var t;return Re(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ft(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ft(n,t)}(n.endAt)),Zt(t,i,u,o,s,"F",c,l)}function Hr(e){return Or[e]}function Qr(e){return Er[e]}function Yr(e){return Tr[e]}function Xr(e){return{fieldPath:e.canonicalString()}}function $r(e){return te.fromServerFormat(e.fieldPath)}function Jr(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Zr(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ei(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ni(t)),t=ti(e.get(n),t);return ni(t)}function ti(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ni(e){return e+"\x01\x01"}function ri(e){var t=e.length;if(A(t>=2),2===t)return A("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Z.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&j(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:j()}a=o+2}return new Z(r)}var ii=["userId","batchId"];function ai(e,t){return[e,ei(t)]}function oi(e,t,n){return[e,ei(t),n]}var ui={},si=["prefixPath","collectionGroup","readTime","documentId"],ci=["prefixPath","collectionGroup","documentId"],li=["collectionGroup","readTime","prefixPath","documentId"],fi=["canonicalId","targetId"],hi=["targetId","path"],di=["path","targetId"],pi=["collectionId","parent"],vi=["indexId","uid"],yi=["uid","sequenceNumber"],mi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gi=["indexId","uid","orderedDocumentKey"],bi=["userId","collectionPath","documentId"],ki=["userId","collectionPath","largestBatchId"],wi=["userId","collectionGroup","largestBatchId"],xi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Oi=[].concat(Object(h.a)(xi),["documentOverlays"]),Ei=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ti=Ei,Ci=[].concat(Ti,["indexConfiguration","indexState","indexEntries"]),_i=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).se=e,r.currentSequenceNumber=n,r}return Object(f.a)(t,e),t}(de);function Si(e,t){var n=N(e);return ge.M(n.se,t)}var Ii=function(){function e(t,n,r,i){Object(d.a)(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(p.a)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Mn(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=this.baseMutations[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u.key.isEqual(e.key)&&(t=Bn(u,e,t,this.localWriteTime))}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var s=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;d.key.isEqual(e.key)&&(t=Bn(d,e,t,this.localWriteTime))}}catch(p){c=!0,l=p}finally{try{s||null==h.return||h.return()}finally{if(c)throw l}}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=ur();return this.mutations.forEach(function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Ln(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument($.min())}),r}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},fr())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Q(this.mutations,e.mutations,function(e,t){return Vn(e,t)})&&Q(this.baseMutations,e.baseMutations,function(e,t){return Vn(e,t)})}}]),e}(),ji=function(){function e(t,n,r,i){Object(d.a)(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(p.a)(e,null,[{key:"from",value:function(t,n,r){A(t.mutations.length===r.length);for(var i=cr,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ai=function(){function e(t,n){Object(d.a)(this,e),this.largestBatchId=t,this.mutation=n}return Object(p.a)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Di=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Me.EMPTY_BYTE_STRING;Object(d.a)(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Object(p.a)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ni=function e(t){Object(d.a)(this,e),this.ie=t};function Ri(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pi(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Nr(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_r(e,t.version.toTimestamp()),createTime:_r(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fi(t.version)};else{if(!t.isUnknownDocument())return j();r.unknownDocument={path:n.path.toArray(),version:Fi(t.version)}}return r}function Pi(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fi(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Li(e){var t=new X(e.seconds,e.nanoseconds);return $.fromTimestamp(t)}function Mi(e,t){for(var n=(t.baseMutations||[]).map(function(t){return zr(e.ie,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map(function(t){return zr(e.ie,t)}),u=X.fromMillis(t.localWriteTimeMs);return new Ii(t.batchId,u,n,o)}function Bi(e){var t,n,r=Li(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Li(e.lastLimboFreeSnapshotVersion):$.min();return void 0!==e.query.documents?(A(1===(n=e.query).documents.length),t=un(en(Fr(n.documents[0])))):t=function(e){return un(Wr(e))}(e.query),new Di(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Me.fromBase64String(e.resumeToken))}function Ui(e,t){var n,r=Fi(t.snapshotVersion),i=Fi(t.lastLimboFreeSnapshotVersion);n=Qt(t.target)?Kr(e.ie,t.target):Gr(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Wt(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Vi(e){var t=Wr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cn(t,t.limit,"L"):t}function qi(e,t){return new Ai(t.largestBatchId,zr(e.ie,t.overlayMutation))}function zi(e,t){var n=t.path.lastSegment();return[e,ei(t.path.popLast()),n]}function Ki(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fi(r.readTime),documentKey:ei(r.documentKey.path),largestBatchId:r.largestBatchId}}var Gi=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"getBundleMetadata",value:function(e,t){return Wi(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Li(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Wi(e).put({bundleId:(n=t).id,createTime:Fi(jr(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Hi(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:Vi(t.bundledQuery),readTime:Li(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Hi(e).put(function(e){return{name:e.name,readTime:Fi(jr(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Wi(e){return Si(e,"bundles")}function Hi(e){return Si(e,"namedQueries")}var Qi=function(){function e(t,n){Object(d.a)(this,e),this.yt=t,this.userId=n}return Object(p.a)(e,[{key:"getOverlay",value:function(e,t){var n=this;return Yi(e).get(zi(this.userId,t)).next(function(e){return e?qi(n.yt,e):null})}},{key:"getOverlays",value:function(e,t){var n=this,r=or();return ye.forEach(t,function(t){return n.getOverlay(e,t).next(function(e){null!==e&&r.set(t,e)})}).next(function(){return r})}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach(function(n,a){var o=new Ai(t,a);i.push(r.oe(e,o))}),ye.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach(function(e){return i.add(ei(e.getCollectionPath()))});var a=[];return i.forEach(function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Yi(e).Y("collectionPathOverlayIndex",i))}),ye.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=or(),a=ei(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Yi(e).W("collectionPathOverlayIndex",o).next(function(e){var t=!0,n=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var s=o.value,c=qi(r.yt,s);i.set(c.getKey(),c)}}catch(l){n=!0,a=l}finally{try{t||null==u.return||u.return()}finally{if(n)throw a}}return i})}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=or(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yi(e).Z({index:"collectionGroupOverlayIndex",range:u},function(e,t,n){var u=qi(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()}).next(function(){return o})}},{key:"oe",value:function(e,t){return Yi(e).put(function(e,t,n){var r=zi(t,n.mutation.key),i=Object(a.a)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qr(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Yi(e){return Si(e,"documentOverlays")}var Xi=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Ve(e.integerValue));else if("doubleValue"in e){var n=Ve(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Pe(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(qe(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?ot(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):j()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;this.ce(s,t)}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),ne.fromName(e).path.forEach(function(e){n.he(t,60),n.pe(e,t)})}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function $i(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ji(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=$i(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xi.Ie=new Xi;var Zi=function(){function e(){Object(d.a)(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Object(p.a)(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=o.charCodeAt(0);if(u<128)this.Ee(u);else if(u<2048)this.Ee(960|u>>>6),this.Ee(128|63&u);else if(o<"\ud800"||"\udbff"<o)this.Ee(480|u>>>12),this.Ee(128|63&u>>>6),this.Ee(128|63&u);else{var s=o.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.Ae()}},{key:"Ve",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,u=o.charCodeAt(0);if(u<128)this.be(u);else if(u<2048)this.be(960|u>>>6),this.be(128|63&u);else if(o<"\ud800"||"\udbff"<o)this.be(480|u>>>12),this.be(128|63&u>>>6),this.be(128|63&u);else{var s=o.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}}catch(c){n=!0,r=c}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=Ji(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=Ji(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ea=function(){function e(t){Object(d.a)(this,e),this.$e=t}return Object(p.a)(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),ta=function(){function e(t){Object(d.a)(this,e),this.$e=t}return Object(p.a)(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),na=function(){function e(){Object(d.a)(this,e),this.$e=new Zi,this.Be=new ea(this.$e),this.Le=new ta(this.$e)}return Object(p.a)(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),ra=function(){function e(t,n,r,i){Object(d.a)(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Object(p.a)(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ia(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=aa(e.arrayValue,t.arrayValue))?n:0!==(n=aa(e.directionalValue,t.directionalValue))?n:ne.comparator(e.documentKey,t.documentKey)}function aa(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var oa=function(){function e(t){Object(d.a)(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n=!0,r=!1,i=void 0;try{for(var a,o=t.filters[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u.isInequality()?this.Qe=u:this.Ge.push(u)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}return Object(p.a)(e,[{key:"je",value:function(e){A(e.collectionGroup===this.collectionId);var t=ie(e);if(void 0!==t&&!this.We(t))return!1;for(var n=ae(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.Ge[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(this.ze(o,e))return!0}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function ua(e){if(0===e.getFilters().length)return[];var t=function e(t){if(A(t instanceof vt||t instanceof yt),t instanceof vt)return t;if(1===t.filters.length)return e(t.filters[0]);var n=t.filters.map(function(t){return e(t)});var r=yt.create(n,t.op);return r=da(r),la(r)?r:(A(r instanceof yt),A(mt(r)),A(r.filters.length>1),r.filters.reduce(function(e,t){return fa(e,t)}))}(function e(t){var n,r;if(A(t instanceof vt||t instanceof yt),t instanceof vt){if(t instanceof It){var i=(null===(r=null===(n=t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(function(e){return vt.create(t.field,"==",e)}))||[];return yt.create(i,"or")}return t}var a=t.filters.map(function(t){return e(t)});return yt.create(a,t.op)}(e));return A(la(t)),sa(t)||ca(t)?[t]:t.getFilters()}function sa(e){return e instanceof vt}function ca(e){return e instanceof yt&&bt(e)}function la(e){return sa(e)||ca(e)||function(e){if(e instanceof yt&&gt(e)){var t=!0,n=!1,r=void 0;try{for(var i,a=e.getFilters()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(!sa(o)&&!ca(o))return!1}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}return!1}(e)}function fa(e,t){return A(e instanceof vt||e instanceof yt),A(t instanceof vt||t instanceof yt),da(e instanceof vt?t instanceof vt?function(e,t){return yt.create([e,t],"and")}(e,t):ha(e,t):t instanceof vt?ha(t,e):function(e,t){if(A(e.filters.length>0&&t.filters.length>0),mt(e)&&mt(t))return xt(e,t.getFilters());var n=gt(e)?e:t,r=gt(e)?t:e,i=n.filters.map(function(e){return fa(e,r)});return yt.create(i,"or")}(e,t))}function ha(e,t){if(mt(t))return xt(t,e.getFilters());var n=t.filters.map(function(t){return fa(e,t)});return yt.create(n,"or")}function da(e){if(A(e instanceof vt||e instanceof yt),e instanceof vt)return e;var t=e.getFilters();if(1===t.length)return da(t[0]);if(kt(e))return e;var n=t.map(function(e){return da(e)}),r=[];return n.forEach(function(t){t instanceof vt?r.push(t):t instanceof yt&&(t.op===e.op?r.push.apply(r,Object(h.a)(t.filters)):r.push(t))}),1===r.length?r[0]:yt.create(r,e.op)}var pa=function(){function e(){Object(d.a)(this,e),this.Je=new va}return Object(p.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),ye.resolve()}},{key:"getCollectionParents",value:function(e,t){return ye.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ye.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ye.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ye.resolve(null)}},{key:"getIndexType",value:function(e,t){return ye.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ye.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ye.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ye.resolve(le.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return ye.resolve(le.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ye.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ye.resolve()}}]),e}(),va=function(){function e(){Object(d.a)(this,e),this.index={}}return Object(p.a)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lt(Z.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Lt(Z.comparator)).toArray()}}]),e}(),ya=new Uint8Array(0),ma=function(){function e(t,n){Object(d.a)(this,e),this.user=t,this.databaseId=n,this.Ye=new va,this.Xe=new er(function(e){return Wt(e)},function(e,t){return Ht(e,t)}),this.uid=t.uid||""}return Object(p.a)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ye.add(t)});var a={collectionId:r,parent:ei(i)};return ga(e).put(a)}return ye.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Y(t),""],!1,!0);return ga(e).W(r).next(function(e){var r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s.collectionId!==t)break;n.push(ri(s.parent))}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n})}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ka(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(function(e){return[e.fieldPath.canonicalString(),e.kind]})}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=wa(e);return a.next(function(e){o.put(Ki(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ka(e),r=wa(e),i=ba(e);return n.delete(t.indexId).next(function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}).next(function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ba(e),i=!0,a=new Map;return ye.forEach(this.Ze(t),function(t){return n.tn(e,t).next(function(e){i&&(i=!!e),a.set(t,e)})}).next(function(){if(i){var e=fr(),o=[];return ye.forEach(a,function(i,a){var u;C("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map(function(e){return"".concat(e.fieldPath,":").concat(e.kind)}).join(",")))," to execute ").concat(Wt(t)));var s=function(e,t){var n=ie(i);if(void 0===n)return null;var r=!0,a=!1,o=void 0;try{for(var u,s=Yt(e,n.fieldPath)[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value;switch(c.op){case"array-contains-any":return c.value.arrayValue.values||[];case"array-contains":return[c.value]}}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return null}(a),c=function(e,t){var n=new Map,r=!0,i=!1,a=void 0;try{for(var o,u=ae(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=!0,l=!1,f=void 0;try{for(var h,d=Yt(e,s.fieldPath)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;switch(p.op){case"==":case"in":n.set(s.fieldPath.canonicalString(),p.value);break;case"not-in":case"!=":return n.set(s.fieldPath.canonicalString(),p.value),Array.from(n.values())}}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(v){i=!0,a=v}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return null}(a,i),l=function(e,t){var n=[],r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=ae(t)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=0===c.kind?Xt(e,c.fieldPath,e.startAt):$t(e,c.fieldPath,e.startAt);n.push(l.value),r&&(r=l.inclusive)}}catch(f){a=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return new ft(n,r)}(a,i),f=function(e,t){var n=[],r=!0,i=!0,a=!1,o=void 0;try{for(var u,s=ae(t)[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=0===c.kind?$t(e,c.fieldPath,e.endAt):Xt(e,c.fieldPath,e.endAt);n.push(l.value),r&&(r=l.inclusive)}}catch(f){a=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return new ft(n,r)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return ye.forEach(v,function(n){return r.J(n,t.limit).next(function(t){t.forEach(function(t){var n=ne.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))})})})}).next(function(){return o})}return ye.resolve(null)})}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:ua(yt.create(e.filters,"and")).map(function(t){return Gt(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)}),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.rn(t[s/c]):ya,d=u.on(e,f,n[s%c],r),p=u.un(e,f,i[s%c],a),v=o.map(function(t){return u.on(e,f,t,!0)});l.push.apply(l,Object(h.a)(u.createRange(d,p,v)))},d=0;d<s;++d)f(d);return l}},{key:"on",value:function(e,t,n,r){var i=new ra(e,ne.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new ra(e,ne.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new oa(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(function(e){var t=null,r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n.je(s)&&(!t||s.fields.length>t.fields.length)&&(t=s)}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t})}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return ye.forEach(i,function(t){return n.tn(e,t).next(function(e){e?0!==r&&e.fields.length<function(e){var t=new Lt(te.comparator),n=!1,r=!0,i=!1,a=void 0;try{for(var o,u=e.filters[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=!0,l=!1,f=void 0;try{for(var h,d=s.getFlattenedFilters()[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;p.field.isKeyField()||("array-contains"===p.op||"array-contains-any"===p.op?n=!0:t=t.add(p.field))}}catch(w){l=!0,f=w}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(w){i=!0,a=w}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}var v=!0,y=!1,m=void 0;try{for(var g,b=e.orderBy[Symbol.iterator]();!(v=(g=b.next()).done);v=!0){var k=g.value;k.field.isKeyField()||(t=t.add(k.field))}}catch(w){y=!0,m=w}finally{try{v||null==b.return||b.return()}finally{if(y)throw m}}return t.size+(n?1:0)}(t)&&(r=1):r=0})}).next(function(){return null!==t.limit&&i.length>1&&2===r?1:r})}},{key:"cn",value:function(e,t){var n=new na,r=!0,i=!1,a=void 0;try{for(var o,u=ae(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,c=t.data.field(s.fieldPath);if(null==c)return null;var l=n.qe(s.kind);Xi.Ie.ue(c,l)}}catch(f){i=!0,a=f}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.Fe()}},{key:"rn",value:function(e){var t=new na;return Xi.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new na;return Xi.Ie.ue(Ze(this.databaseId,t),n.qe(function(e){var t=ae(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new na);var i=0,a=!0,o=!1,u=void 0;try{for(var s,c=ae(e)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)for(var l=s.value,f=n[i++],h=0,d=r;h<d.length;h++){var p=d[h];if(this.hn(t,l.fieldPath)&&tt(f))r=this.ln(r,l,f);else{var v=p.qe(l.kind);Xi.Ie.ue(f,v)}}}catch(y){o=!0,u=y}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r=Object(h.a)(e),i=[],a=!0,o=!1,u=void 0;try{for(var s,c=(n.arrayValue.values||[])[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value,f=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var m=v.value,g=new na;g.seed(m.Fe()),Xi.Ie.ue(l,g.qe(t.kind)),i.push(g)}}catch(b){d=!0,p=b}finally{try{f||null==y.return||y.return()}finally{if(d)throw p}}}}catch(b){o=!0,u=b}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return i}},{key:"hn",value:function(e,t){return!!e.filters.find(function(e){return e instanceof vt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)})}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ka(e),i=wa(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(function(e){var t=[];return ye.forEach(e,function(e){return i.get([e.indexId,n.uid]).next(function(n){t.push(function(e,t){var n=t?new ue(t.sequenceNumber,new le(Li(t.readTime),new ne(ri(t.documentKey)),t.largestBatchId)):ue.empty(),r=e.fields.map(function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return new oe(te.fromServerFormat(n),r)});return new re(e.indexId,e.collectionGroup,r,n)}(e,n))})}).next(function(){return t})})}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next(function(e){return 0===e.length?null:(e.sort(function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:H(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup)})}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ka(e),a=wa(e);return this.dn(e).next(function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(function(t){return ye.forEach(t,function(t){return a.put(Ki(t.indexId,r.user,e,n))})})})}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ye.forEach(t,function(t,i){var a=r.get(t.collectionGroup);return(a?ye.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next(function(a){return r.set(t.collectionGroup,a),ye.forEach(a,function(r){return n._n(e,t,r).next(function(t){var a=n.wn(i,r);return t.isEqual(a)?ye.resolve():n.mn(e,i,r,t,a)})})})})}},{key:"gn",value:function(e,t,n,r){return ba(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return ba(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=ba(e),i=new Lt(ia);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},function(e,r){i=i.add(new ra(n.indexId,t,r.arrayValue,r.directionalValue))}).next(function(){return i})}},{key:"wn",value:function(e,t){var n=new Lt(ia),r=this.cn(t,e);if(null==r)return n;var i=ie(t);if(null!=i){var a=e.data.field(i.fieldPath);if(tt(a)){var o=!0,u=!1,s=void 0;try{for(var c,l=(a.arrayValue.values||[])[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;n=n.add(new ra(t.indexId,e.key,this.rn(f),r))}}catch(h){u=!0,s=h}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}}}else n=n.add(new ra(t.indexId,e.key,ya,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;C("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Bt(a),s=Bt(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Bt(o)):l?(i(u),u=Bt(a)):(u=Bt(a),s=Bt(o))}}(r,i,ia,function(r){o.push(a.gn(e,t,n,r))},function(r){o.push(a.yn(e,t,n,r))}),ye.waitFor(o)}},{key:"dn",value:function(e){var t=1;return wa(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},function(e,n,r){r.done(),t=n.sequenceNumber+1}).next(function(){return t})}},{key:"createRange",value:function(e,t,n){n=n.sort(function(e,t){return ia(e,t)}).filter(function(e,t,n){return!t||0!==ia(e,n[t-1])});var r=[];r.push(e);var i=!0,a=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=ia(c,e),f=ia(c,t);if(0===l)r[0]=e.Ue();else if(l>0&&f<0)r.push(c),r.push(c.Ue());else if(f>0)break}}catch(y){a=!0,o=y}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}r.push(t);for(var h=[],d=0;d<r.length;d+=2){if(this.pn(r[d],r[d+1]))return[];var p=[r[d].indexId,this.uid,r[d].arrayValue,r[d].directionalValue,ya,[]],v=[r[d+1].indexId,this.uid,r[d+1].arrayValue,r[d+1].directionalValue,ya,[]];h.push(IDBKeyRange.bound(p,v))}return h}},{key:"pn",value:function(e,t){return ia(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(xa)}},{key:"getMinOffset",value:function(e,t){var n=this;return ye.mapArray(this.Ze(t),function(t){return n.tn(e,t).next(function(e){return e||j()})}).next(xa)}}]),e}();function ga(e){return Si(e,"collectionParents")}function ba(e){return Si(e,"indexEntries")}function ka(e){return Si(e,"indexConfiguration")}function wa(e){return Si(e,"indexState")}function xa(e){A(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;fe(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new le(t.readTime,t.documentKey,n)}var Oa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ea=function(){function e(t,n,r){Object(d.a)(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(p.a)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ta(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},function(e,t,n){return u++,n.delete()});a.push(s.next(function(){A(1===u)}));var c=[],l=!0,f=!1,h=void 0;try{for(var d,p=n.mutations[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value,y=oi(t,v.key.path,n.batchId);a.push(i.delete(y)),c.push(v.key)}}catch(m){f=!0,h=m}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return ye.waitFor(a).next(function(){return c})}function Ca(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw j();t=e.noDocument}return JSON.stringify(t).length}Ea.DEFAULT_COLLECTION_PERCENTILE=10,Ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ea.DEFAULT=new Ea(41943040,Ea.DEFAULT_COLLECTION_PERCENTILE,Ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ea.DISABLED=new Ea(-1,0,0);var _a=function(){function e(t,n,r,i){Object(d.a)(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return Object(p.a)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ia(e).Z({index:"userMutationsIndex",range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ja(e),o=Ia(e);return o.add({}).next(function(u){A("number"==typeof u);var s=new Ii(u,t,n,r),c=function(e,t,n){var r=n.baseMutations.map(function(t){return qr(e.ie,t)}),i=n.mutations.map(function(t){return qr(e.ie,t)});return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,s),l=[],f=new Lt(function(e,t){return H(e.canonicalString(),t.canonicalString())}),h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m=v.value,g=oi(i.userId,m.key.path,u);f=f.add(m.key.path.popLast()),l.push(o.put(c)),l.push(a.put(g,ui))}}catch(b){d=!0,p=b}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}return f.forEach(function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.In[u]=s.keys()}),ye.waitFor(l).next(function(){return s})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ia(e).get(t).next(function(e){return e?(A(e.userId===n.userId),Mi(n.yt,e)):null})}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?ye.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ia(e).Z({index:"userMutationsIndex",range:i},function(e,t,i){t.userId===n.userId&&(A(t.batchId>=r),a=Mi(n.yt,t)),i.done()}).next(function(){return a})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ia(e).Z({index:"userMutationsIndex",range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ia(e).W("userMutationsIndex",n).next(function(e){return e.map(function(e){return Mi(t.yt,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ai(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ja(e).Z({range:i},function(r,i,u){var s=Object(a.a)(r,3),c=s[0],l=s[1],f=s[2],h=ri(l);if(c===n.userId&&t.path.isEqual(h))return Ia(e).get(f).next(function(e){if(!e)throw j();A(e.userId===n.userId),o.push(Mi(n.yt,e))});u.done()}).next(function(){return o})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lt(H),i=[];return t.forEach(function(t){var o=ai(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=ja(e).Z({range:u},function(e,i,o){var u=Object(a.a)(e,3),s=u[0],c=u[1],l=u[2],f=ri(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()});i.push(s)}),ye.waitFor(i).next(function(){return n.En(e,r)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=ai(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new Lt(H);return ja(e).Z({range:u},function(e,t,o){var u=Object(a.a)(e,3),c=u[0],l=u[1],f=u[2],h=ri(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):o.done()}).next(function(){return n.En(e,s)})}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Ia(e).get(t).next(function(e){if(null===e)throw j();A(e.userId===n.userId),r.push(Mi(n.yt,e))}))}),ye.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ta(e.se,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.An(t.batchId)}),ye.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return ye.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ja(e).Z({range:r},function(e,n,r){if(e[0]===t.userId){var a=ri(e[1]);i.push(a)}else r.done()}).next(function(){A(0===i.length)})})}},{key:"containsKey",value:function(e,t){return Sa(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Aa(e).get(this.userId).next(function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}})}}],[{key:"re",value:function(t,n,r,i){return A(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Sa(e,t,n){var r=ai(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return ja(e).Z({range:o,X:!0},function(e,n,r){var o=Object(a.a)(e,3),s=o[0],c=o[1];o[2];s===t&&c===i&&(u=!0),r.done()}).next(function(){return u})}function Ia(e){return Si(e,"mutations")}function ja(e){return Si(e,"documentMutations")}function Aa(e){return Si(e,"mutationQueues")}var Da=function(){function e(t){Object(d.a)(this,e),this.bn=t}return Object(p.a)(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Na=function(){function e(t,n){Object(d.a)(this,e),this.referenceDelegate=t,this.yt=n}return Object(p.a)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next(function(n){var r=new Da(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next(function(e){return $.fromTimestamp(new X(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next(function(){return n.Vn(e).next(function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Ra(e).delete(t.targetId)}).next(function(){return n.Vn(e)}).next(function(t){return A(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ra(e).Z(function(o,u){var s=Bi(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))}).next(function(){return ye.waitFor(a)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Ra(e).Z(function(e,n){var r=Bi(n);t(r)})}},{key:"Vn",value:function(e){return Pa(e).get("targetGlobalKey").next(function(e){return A(null!==e),e})}},{key:"Sn",value:function(e,t){return Pa(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Ra(e).put(Ui(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Wt(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ra(e).Z({range:r,index:"queryTargetsIndex"},function(e,n,r){var a=Bi(n);Ht(t,a.target)&&(i=a,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fa(e);return t.forEach(function(t){var o=ei(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))}),ye.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fa(e);return ye.forEach(t,function(t){var a=ei(t.path);return ye.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fa(e),i=fr();return r.Z({range:n,X:!0},function(e,t,n){var r=ri(e[1]),a=new ne(r);i=i.add(a)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var n=ei(t.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return Fa(e).Z({index:"documentTargetsIndex",X:!0,range:r},function(e,t,n){var r=Object(a.a)(e,2),o=r[0];r[1];0!==o&&(i++,n.done())}).next(function(){return i>0})}},{key:"ne",value:function(e,t){return Ra(e).get(t).next(function(e){return e?Bi(e):null})}}]),e}();function Ra(e){return Si(e,"targets")}function Pa(e){return Si(e,"targetGlobal")}function Fa(e){return Si(e,"targetDocuments")}function La(e,t){var n=Object(a.a)(e,2),r=n[0],i=n[1],o=Object(a.a)(t,2),u=o[0],s=o[1],c=H(r,u);return 0===c?H(i,s):c}var Ma=function(){function e(t){Object(d.a)(this,e),this.xn=t,this.buffer=new Lt(La),this.Nn=0}return Object(p.a)(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();La(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ba=function(){function e(t,n,r){Object(d.a)(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return Object(p.a)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"Fn",value:function(e){var t=this;C("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!we(e.t0)){e.next=12;break}C("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,pe(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}},e,null,[[1,6]])})))}},{key:"started",get:function(){return null!==this.Mn}}]),e}(),Ua=function(){function e(t,n){Object(d.a)(this,e),this.$n=t,this.params=n}return Object(p.a)(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ye.resolve(Se.at);var r=new Ma(t);return this.$n.forEachTarget(e,function(e){return r.On(e.sequenceNumber)}).next(function(){return n.$n.Ln(e,function(e){return r.On(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Oa)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Oa):n.qn(e,t)})}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),E()<=m.a.DEBUG&&C("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ye.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),Va=function(){function e(t,n){Object(d.a)(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ua(e,t)}(this,n)}return Object(p.a)(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Un",value:function(e){var t=0;return this.Ln(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return qa(e,n)}},{key:"removeReference",value:function(e,t,n){return qa(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return qa(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Aa(e).tt(function(r){return Sa(e,r,t).next(function(e){return e&&(n=!0),ye.resolve(!e)})}).next(function(){return n})}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,function(o,u){if(u<=t){var s=n.Gn(e,o).next(function(t){if(!t)return a++,r.getEntry(e,o).next(function(){return r.removeEntry(o,$.min()),Fa(e).delete([0,ei(o.path)])})});i.push(s)}}).next(function(){return ye.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return a})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return qa(e,t)}},{key:"Kn",value:function(e,t){var n,r=Fa(e),i=Se.at;return r.Z({index:"documentTargetsIndex"},function(e,r){var o=Object(a.a)(e,2),u=o[0],s=(o[1],r.path),c=r.sequenceNumber;0===u?(i!==Se.at&&t(new ne(ri(n)),i),i=c,n=s):i=Se.at}).next(function(){i!==Se.at&&t(new ne(ri(n)),i)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function qa(e,t){return Fa(e).put(function(e,t){return{targetId:0,path:ei(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var za=function(){function e(){Object(d.a)(this,e),this.changes=new er(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return Object(p.a)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ye.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ka=function(){function e(t){Object(d.a)(this,e),this.yt=t}return Object(p.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Qa(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Qa(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Pi(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Qn(e,r)})}},{key:"getEntry",value:function(e,t){var n=this,r=zt.newInvalidDocument(t);return Qa(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ya(t))},function(e,i){r=n.jn(t,i)}).next(function(){return r})}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:zt.newInvalidDocument(t)};return Qa(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ya(t))},function(e,i){r={document:n.jn(t,i),size:Ca(i)}}).next(function(){return r})}},{key:"getEntries",value:function(e,t){var n=this,r=nr();return this.zn(e,t,function(e,t){var i=n.jn(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Hn",value:function(e,t){var n=this,r=nr(),i=new Rt(ne.comparator);return this.zn(e,t,function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Ca(t))}).next(function(){return{documents:r,Jn:i}})}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return ye.resolve();var r=new Lt($a);t.forEach(function(e){return r=r.add(e)});var i=IDBKeyRange.bound(Ya(r.first()),Ya(r.last())),a=r.getIterator(),o=a.getNext();return Qa(e).Z({index:"documentKeyIndex",range:i},function(e,t,r){for(var i=ne.fromSegments([].concat(Object(h.a)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&$a(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Ya(o)):r.done()}).next(function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Pi(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qa(e).W(IDBKeyRange.bound(i,a,!0)).next(function(e){var t=nr(),n=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value,c=r.jn(ne.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);t=t.insert(c.key,c)}}catch(l){i=!0,a=l}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}return t})}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=nr(),o=Xa(t,n),u=Xa(t,le.max());return Qa(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},function(e,t,n){var o=i.jn(ne.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()}).next(function(){return a})}},{key:"newChangeBuffer",value:function(e){return new Wa(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return Ha(e).get("remoteDocumentGlobalKey").next(function(e){return A(!!e),e})}},{key:"Qn",value:function(e,t){return Ha(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ur(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ne.fromSegments(t.noDocument.path),i=Li(t.noDocument.readTime);n=zt.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return j();var a=ne.fromSegments(t.unknownDocument.path),o=Li(t.unknownDocument.version);n=zt.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new X(e[0],e[1]);return $.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual($.min()))return n}return zt.newInvalidDocument(e)}}]),e}();function Ga(e){return new Ka(e)}var Wa=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).Yn=e,r.trackRemovals=n,r.Xn=new er(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Lt(function(e,t){return H(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ri(t.Yn.yt,o);i=i.add(a.path.popLast());var c=Ca(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ri(t.Yn.yt,o.convertToNoDocument($.min()));n.push(t.Yn.addEntry(e,a,l))}}),i.forEach(function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))}),n.push(this.Yn.updateMetadata(e,r)),ye.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next(function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next(function(e){var t=e.documents;return e.Jn.forEach(function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})}),t})}}]),t}(za);function Ha(e){return Si(e,"remoteDocumentGlobal")}function Qa(e){return Si(e,"remoteDocumentsV14")}function Ya(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xa(e,t){var n=t.documentKey.path.toArray();return[e,Pi(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $a(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=H(n[a],r[a]))return i;return(i=H(n.length,r.length))||((i=H(n[n.length-2],r[r.length-2]))||H(n[n.length-1],r[r.length-1]))}var Ja=function e(t,n){Object(d.a)(this,e),this.overlayedDocument=t,this.mutatedFields=n},Za=function(){function e(t,n,r,i){Object(d.a)(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Object(p.a)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next(function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)}).next(function(e){return null!==r&&Bn(r.mutation,e,Ut.empty(),X.now()),e})}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t,fr()).next(function(){return t})})}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(),i=or();return this.populateOverlays(e,i,t).next(function(){return n.computeViews(e,t,i,r).next(function(e){var t=ir();return e.forEach(function(e,n){t=t.insert(e,n.overlayedDocument)}),t})})}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=or();return this.populateOverlays(e,r,t).next(function(){return n.computeViews(e,t,r,fr())})}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach(function(e){t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(function(e){e.forEach(function(e,n){t.set(e,n)})})}},{key:"computeViews",value:function(e,t,n,r){var i=nr(),a=sr(),o=sr();return t.forEach(function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof zn)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Bn(o.mutation,t,o.mutation.getFieldMask(),X.now()))}),this.recalculateAndSaveOverlays(e,i).next(function(e){return e.forEach(function(e,t){return a.set(e,t)}),t.forEach(function(e,t){var n;return o.set(e,new Ja(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),o})}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=sr(),i=new Rt(function(e,t){return e-t}),a=fr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){var n=!0,a=!1,o=void 0;try{for(var u,s=function(){var e=u.value;e.keys().forEach(function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ut.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||fr()).add(n);i=i.insert(e.batchId,u)}})},c=e[Symbol.iterator]();!(n=(u=c.next()).done);n=!0)s()}catch(l){a=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}}).next(function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=ur();c.forEach(function(e){if(!a.has(e)){var n=Ln(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}}),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return ye.waitFor(o)}).next(function(){return r})}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.recalculateAndSaveOverlays(e,t)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ne.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):an(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ye.resolve(or()),u=-1,s=a;return o.next(function(t){return ye.forEach(t,function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?ye.resolve():i.remoteDocumentCache.getEntry(e,t).next(function(e){s=s.insert(t,e)})}).next(function(){return i.populateOverlays(e,t,a)}).next(function(){return i.computeViews(e,s,t,fr())}).next(function(e){return{batchId:u,changes:ar(e)}})})})}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ne(t)).next(function(e){var t=ir();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ir();return this.indexManager.getCollectionParents(e,i).next(function(o){return ye.forEach(o,function(o){var u=function(e,t){return new Jt(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next(function(e){e.forEach(function(e,t){a=a.insert(e,t)})})}).next(function(){return a})})}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next(function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)}).next(function(e){e.forEach(function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,zt.newInvalidDocument(n)))});var n=ir();return r.forEach(function(r,i){var a=e.get(r);void 0!==a&&Bn(a.mutation,i,Ut.empty(),X.now()),dn(t,i)&&(n=n.insert(r,i))}),n})}}]),e}(),eo=function(){function e(t){Object(d.a)(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return Object(p.a)(e,[{key:"getBundleMetadata",value:function(e,t){return ye.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:jr(n.createTime)}),ye.resolve()}},{key:"getNamedQuery",value:function(e,t){return ye.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Vi(e.bundledQuery),readTime:jr(e.readTime)}}(t)),ye.resolve()}}]),e}(),to=function(){function e(){Object(d.a)(this,e),this.overlays=new Rt(ne.comparator),this.es=new Map}return Object(p.a)(e,[{key:"getOverlay",value:function(e,t){return ye.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=or();return ye.forEach(t,function(t){return n.getOverlay(e,t).next(function(e){null!==e&&r.set(t,e)})}).next(function(){return r})}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach(function(n,i){r.oe(e,t,i)}),ye.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach(function(e){return r.overlays=r.overlays.remove(e)}),this.es.delete(n)),ye.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=or(),i=t.length+1,a=new ne(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ye.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Rt(function(e,t){return e-t}),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=or(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=or(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach(function(e,t){return s.set(e,t)}),!(s.size()>=r)););return ye.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ai(t,n));var a=this.es.get(t);void 0===a&&(a=fr(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),no=function(){function e(){Object(d.a)(this,e),this.ns=new Lt(ro.ss),this.rs=new Lt(ro.os)}return Object(p.a)(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ro(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.cs(new ro(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"ls",value:function(e){var t=this,n=new ne(new Z([])),r=new ro(n,e),i=new ro(n,e+1),a=[];return this.rs.forEachInRange([r,i],function(e){t.cs(e),a.push(e.key)}),a}},{key:"fs",value:function(){var e=this;this.ns.forEach(function(t){return e.cs(t)})}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ne(new Z([])),n=new ro(t,e),r=new ro(t,e+1),i=fr();return this.rs.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new ro(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ro=function(){function e(t,n){Object(d.a)(this,e),this.key=t,this._s=n}return Object(p.a)(e,null,[{key:"ss",value:function(e,t){return ne.comparator(e.key,t.key)||H(e._s,t._s)}},{key:"os",value:function(e,t){return H(e._s,t._s)||ne.comparator(e.key,t.key)}}]),e}(),io=function(){function e(t,n){Object(d.a)(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Lt(ro.ss)}return Object(p.a)(e,[{key:"checkEmpty",value:function(e){return ye.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ii(i,t,n,r);this.mutationQueue.push(a);var o=!0,u=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this.gs=this.gs.add(new ro(f.key,i)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}}catch(h){u=!0,s=h}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return ye.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ye.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return ye.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ye.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return ye.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ro(t,0),i=new ro(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],function(e){var t=n.ys(e._s);a.push(t)}),ye.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Lt(H);return t.forEach(function(e){var t=new ro(e,0),i=new ro(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],function(e){r=r.add(e._s)})}),ye.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ne.isDocumentKey(i)||(i=i.child(""));var a=new ro(new ne(i),0),o=new Lt(H);return this.gs.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)},a),ye.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ys(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;A(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return ye.forEach(t.mutations,function(i){var a=new ro(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.gs=r})}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ro(t,0),r=this.gs.firstAfterOrEqual(n);return ye.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,ye.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ao=function(){function e(t){Object(d.a)(this,e),this.Es=t,this.docs=new Rt(ne.comparator),this.size=0}return Object(p.a)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ye.resolve(n?n.document.mutableCopy():zt.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=nr();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():zt.newInvalidDocument(e))}),ye.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=nr(),i=new ne(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||fe(ce(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ye.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){j()}},{key:"As",value:function(e,t){return ye.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new oo(this)}},{key:"getSize",value:function(e){return ye.resolve(this.size)}}]),e}(),oo=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).Yn=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)}),ye.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),t}(za),uo=function(){function e(t){Object(d.a)(this,e),this.persistence=t,this.Rs=new er(function(e){return Wt(e)},Ht),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.bs=0,this.Ps=new no,this.targetCount=0,this.vs=Da.Pn()}return Object(p.a)(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach(function(e,n){return t(n)}),ye.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ye.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ye.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),ye.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),ye.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,ye.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),ye.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ye.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach(function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ye.waitFor(a).next(function(){return i})}},{key:"getTargetCount",value:function(e){return ye.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return ye.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),ye.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),ye.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),ye.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return ye.resolve(n)}},{key:"containsKey",value:function(e,t){return ye.resolve(this.Ps.containsKey(t))}}]),e}(),so=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.Vs={},this.overlays={},this.Ss=new Se(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new uo(this),this.indexManager=new pa,this.remoteDocumentCache=new ao(function(e){return r.referenceDelegate.xs(e)}),this.yt=new Ni(n),this.Ns=new eo(this.yt)}return Object(p.a)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new to,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new io(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;C("MemoryPersistence","Starting transaction:",e);var i=new co(this.Ss.next());return this.referenceDelegate.ks(),n(i).next(function(e){return r.referenceDelegate.Os(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ms",value:function(e,t){return ye.or(Object.values(this.Vs).map(function(n){return function(){return n.containsKey(e,t)}}))}},{key:"started",get:function(){return this.Ds}}]),e}(),co=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).currentSequenceNumber=e,n}return Object(f.a)(t,e),t}(de),lo=function(){function e(t){Object(d.a)(this,e),this.persistence=t,this.Fs=new no,this.$s=null}return Object(p.a)(e,[{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),ye.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),ye.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),ye.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach(function(e){return n.Ls.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.Ls.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Ls,function(r){var i=ne.fromPath(r);return t.qs(e,i).next(function(e){e||n.removeEntry(i,$.min())})}).next(function(){return t.$s=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next(function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())})}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return ye.or([function(){return ye.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}},{key:"Ls",get:function(){if(this.$s)return this.$s;throw j()}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),fo=function(){function e(t){Object(d.a)(this,e),this.yt=t}return Object(p.a)(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new me("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ii,{unique:!0}),e.createObjectStore("documentMutations")}(e),ho(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ye.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ho(e)),o=o.next(function(){return function(e){var t=a.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}()})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(e,t){return t.store("mutations").W().next(function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ii,{unique:!0});var r=t.store("mutations"),i=n.map(function(e){return r.put(e)});return ye.waitFor(i)})}(e,a)})),o=o.next(function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(o=o.next(function(){return i.Us(a)})),n<6&&r>=6&&(o=o.next(function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)})),n<7&&r>=7&&(o=o.next(function(){return i.Gs(a)})),n<8&&r>=8&&(o=o.next(function(){return i.Qs(e,a)})),n<9&&r>=9&&(o=o.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.js(a)})),n<11&&r>=11&&(o=o.next(function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(o=o.next(function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:bi});t.createIndex("collectionPathOverlayIndex",ki,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",wi,{unique:!1})}(e)})),n<13&&r>=13&&(o=o.next(function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:si});t.createIndex("documentKeyIndex",ci),t.createIndex("collectionGroupIndex",li)}(e)}).next(function(){return i.Ws(e,a)}).next(function(){return e.deleteObjectStore("remoteDocuments")})),n<14&&r>=14&&(o=o.next(function(){return i.zs(e,a)})),n<15&&r>=15&&(o=o.next(function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:vi}).createIndex("sequenceNumberIndex",yi,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mi}).createIndex("documentKeyIndex",gi,{unique:!1})}(e)})),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z(function(e,n){t+=Ca(n)}).next(function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(function(n){return ye.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next(function(r){return ye.forEach(r,function(r){A(r.userId===n.userId);var i=Mi(t.yt,r);return Ta(e,n.userId,i).next(function(){})})})})})}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(function(e){var r=[];return n.Z(function(n,i){var a=new Z(n),o=[0,ei(a)];r.push(t.get(o).next(function(n){return n?ye.resolve():function(n){return t.put({targetId:0,path:ei(n),sequenceNumber:e.highestListenSequenceNumber})}(a)}))}).next(function(){return ye.waitFor(r)})})}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:pi});var n=t.store("collectionParents"),r=new va,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ei(i)})}};return t.store("remoteDocuments").Z({X:!0},function(e,t){var n=new Z(e);return i(n.popLast())}).next(function(){return t.store("documentMutations").Z({X:!0},function(e,t){var n=Object(a.a)(e,3),r=(n[0],n[1]),o=(n[2],ri(r));return i(o.popLast())})})}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z(function(e,r){var i=Bi(r),a=Ui(t.yt,i);return n.put(a)})}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z(function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ne(Z.fromString(i.document.name).popFirst(5)):i.noDocument?ne.fromSegments(i.noDocument.path):i.unknownDocument?ne.fromSegments(i.unknownDocument.path):j()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))}).next(function(){return ye.waitFor(r)})}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Ga(this.yt),a=new so(lo.Bs,this.yt.ie);return r.W().next(function(e){var r=new Map;return e.forEach(function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:fr();Mi(n.yt,e).keys().forEach(function(e){return i=i.add(e)}),r.set(e.userId,i)}),ye.forEach(r,function(e,r){var o=new w(r),u=Qi.re(n.yt,o),s=a.getIndexManager(o),c=_a.re(o,n.yt,s,a.referenceDelegate);return new Za(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new _i(t,Se.at),e).next()})})}}]),e}();function ho(e){e.createObjectStore("targetDocuments",{keyPath:hi}).createIndex("documentTargetsIndex",di,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fi,{unique:!0}),e.createObjectStore("targetGlobal")}var po="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vo=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Object(d.a)(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Va(this,i),this.ii=n+"main",this.yt=new Ni(s),this.ri=new ge(this.ii,this.Xs,new fo(this.yt)),this.Cs=new Na(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ga(this.yt),this.Ns=new Gi,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Object(p.a)(e,[{key:"start",value:function(){var e=this;return this.ui().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,po);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Cs.getHighestSequenceNumber(t)})}).then(function(t){e.Ss=new Se(t,e.Js)}).then(function(){e.Ds=!0}).catch(function(t){return e.ri&&e.ri.close(),Promise.reject(t)})}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Object(s.a)(u.a.mark(function n(r){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}},e)}))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return mo(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next(function(){if(e.isPrimary)return e.fi(t).next(function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable(function(){return e.si(!1)}))})}).next(function(){return e.di(t)}).next(function(n){return e.isPrimary&&!n?e._i(t).next(function(){return!1}):!!n&&e.wi(t).next(function(){return!0})})}).catch(function(t){if(we(t))return C("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return C("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable(function(){return e.si(t)}),e.isPrimary=t})}},{key:"fi",value:function(e){var t=this;return yo(e).get("owner").next(function(e){return ye.resolve(t.mi(e))})}},{key:"gi",value:function(e){return mo(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a,o,s,c=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=25;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=Si(e,"clientMetadata");return t.W().next(function(e){var n=c.Ii(e,18e5),r=e.filter(function(e){return-1===n.indexOf(e)});return ye.forEach(r,function(e){return t.delete(e.clientId)}).next(function(){return r})})}).catch(function(){return[]});case 4:if(t=e.sent,!this.oi){e.next=25;break}for(n=!0,r=!1,i=void 0,e.prev=9,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)s=o.value,this.oi.removeItem(this.Ti(s.clientId));e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),r=!0,i=e.t0;case 17:e.prev=17,e.prev=18,n||null==a.return||a.return();case 20:if(e.prev=20,!r){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.ui().then(function(){return e.yi()}).then(function(){return e.hi()})})}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?ye.resolve(!0):yo(e).get("owner").next(function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,po);return!1}}return!(!t.networkEnabled||!t.inForeground)||mo(e).W().next(function(e){return void 0===t.Ii(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&C("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],function(e){var n=new _i(e,Se.at);return t._i(n).next(function(){return t.gi(n)})});case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter(function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)})}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return mo(t).W().next(function(t){return e.Ii(t,18e5).map(function(e){return e.clientId})})})}},{key:"getMutationQueue",value:function(e,t){return _a.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new ma(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Qi.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;C("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Ci:14===i?Ti:13===i?Ei:12===i?Oi:11===i?xi:void j();return this.ri.runTransaction(e,o,u,function(i){return a=new _i(i,r.Ss?r.Ss.next():Se.at),"readwrite-primary"===t?r.fi(a).next(function(e){return!!e||r.di(a)}).next(function(t){if(!t)throw _("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable(function(){return r.si(!1)}),new P(R.FAILED_PRECONDITION,he);return n(a)}).next(function(e){return r.wi(a).next(function(){return e})}):r.Vi(a).next(function(){return n(a)})}).then(function(e){return a.raiseOnCommittedEvent(),e})}},{key:"Vi",value:function(e){var t=this;return yo(e).get("owner").next(function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,po)})}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yo(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=yo(e);return n.get("owner").next(function(e){return t.mi(e)?(C("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ye.resolve()})}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(_("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()})},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),Object(g.p)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return C("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return _("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){_("Failed to set zombie client id.",e)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}},{key:"started",get:function(){return this.Ds}}],[{key:"C",value:function(){return ge.C()}}]),e}();function yo(e){return Si(e,"owner")}function mo(e){return Si(e,"clientMetadata")}function go(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bo=function(){function e(t,n,r,i){Object(d.a)(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return Object(p.a)(e,null,[{key:"Ci",value:function(t,n){var r=fr(),i=fr(),a=!0,o=!1,u=void 0;try{for(var s,c=n.docChanges[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(f){o=!0,u=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}return new e(t,n.fromCache,r,i)}}]),e}(),ko=function(){function e(){Object(d.a)(this,e),this.xi=!1}return Object(p.a)(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next(function(a){return a||i.Oi(e,t,r,n)}).next(function(n){return n||i.Mi(e,t)})}},{key:"ki",value:function(e,t){var n=this;if(tn(t))return ye.resolve(null);var r=un(t);return this.indexManager.getIndexType(e,r).next(function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=cn(t,null,"F"),r=un(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next(function(i){var a=fr.apply(void 0,Object(h.a)(i));return n.Ni.getDocuments(e,a).next(function(i){return n.indexManager.getMinOffset(e,r).next(function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,cn(t,null,"F")):n.Bi(e,o,t,r)})})}))})}},{key:"Oi",value:function(e,t,n,r){var i=this;return tn(t)||r.isEqual($.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next(function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(E()<=m.a.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hn(t)),i.Bi(e,o,t,se(r,-1)))})}},{key:"Fi",value:function(e,t){var n=new Lt(vn(e));return t.forEach(function(t,r){dn(e,r)&&(n=n.add(r))}),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return E()<=m.a.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",hn(t)),this.Ni.getDocumentsMatchingQuery(e,t,le.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next(function(e){return t.forEach(function(t){e=e.insert(t.key,t)}),e})}}]),e}(),wo=function(){function e(t,n,r,i){Object(d.a)(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new Rt(H),this.Ui=new er(function(e){return Wt(e)},Ht),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return Object(p.a)(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Za(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.qi)})}}]),e}();function xo(e,t,n,r){return new wo(e,t,n,r)}function Oo(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next(function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)}).next(function(n){var i=[],a=[],o=fr(),u=!0,s=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;i.push(h.batchId);var d=!0,p=!1,v=void 0;try{for(var y,m=h.mutations[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var g=y.value;o=o.add(g.key)}}catch(A){p=!0,v=A}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}}catch(A){s=!0,c=A}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}var b=!0,k=!1,w=void 0;try{for(var x,O=n[Symbol.iterator]();!(b=(x=O.next()).done);b=!0){var E=x.value;a.push(E.batchId);var T=!0,C=!1,_=void 0;try{for(var S,I=E.mutations[Symbol.iterator]();!(T=(S=I.next()).done);T=!0){var j=S.value;o=o.add(j.key)}}catch(A){C=!0,_=A}finally{try{T||null==I.return||I.return()}finally{if(C)throw _}}}}catch(A){k=!0,w=A}finally{try{b||null==O.return||O.return()}finally{if(k)throw w}}return r.localDocuments.getDocuments(e,o).next(function(e){return{ji:e,removedBatchIds:i,addedBatchIds:a}})})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function To(e,t){var n=N(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ye.resolve();return a.forEach(function(e){o=o.next(function(){return r.getEntry(t,e)}).next(function(t){var a=n.docVersions.get(e);A(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(function(){return e.mutationQueue.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=fr(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))}).next(function(){return n.localDocuments.getDocuments(e,r)})})}function Co(e){var t=N(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.Cs.getLastRemoteSnapshotVersion(e)})}function _o(e,t){var n=N(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach(function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next(function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)}));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Me.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}});var u=nr(),s=fr();if(t.documentUpdates.forEach(function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(So(e,a,t.documentUpdates).next(function(e){u=e.Wi,s=e.zi})),!r.isEqual($.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next(function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)});o.push(c)}return ye.waitFor(o).next(function(){return a.apply(e)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)}).next(function(){return u})}).then(function(e){return n.qi=i,e})}function So(e,t,n){var r=fr(),i=fr();return n.forEach(function(e){return r=r.add(e)}),t.getEntries(e,r).next(function(e){var r=nr();return n.forEach(function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual($.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):C("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)}),{Wi:r,zi:i}})}function Io(e,t){var n=N(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)})}function jo(e,t){var n=N(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.Cs.getTargetData(e,t).next(function(i){return i?(r=i,ye.resolve(r)):n.Cs.allocateTargetId(e).next(function(i){return r=new Di(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e})}function Ao(e,t,n){return Do.apply(this,arguments)}function Do(){return(Do=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=N(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,function(e){return i.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),we(e.t1)){e.next=12;break}throw e.t1;case 12:C("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function No(e,t,n){var r=N(e),i=$.min(),a=fr();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=N(e),i=r.Ui.get(n);return void 0!==i?ye.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,un(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next(function(e){a=e})}).next(function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:$.min(),n?a:fr())}).next(function(e){return Fo(r,pn(t),e),{documents:e,Hi:a}})})}function Ro(e,t){var n=N(e),r=N(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.ne(e,t).next(function(e){return e?e.target:null})})}function Po(e,t){var n=N(e),r=n.Ki.get(t)||$.min();return n.persistence.runTransaction("Get new document changes","readonly",function(e){return n.Gi.getAllFromCollectionGroup(e,t,se(r,-1),Number.MAX_SAFE_INTEGER)}).then(function(e){return Fo(n,t,e),e})}function Fo(e,t,n){var r=e.Ki.get(t)||$.min();n.forEach(function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ki.set(t,r)}function Lo(e,t,n,r){return Mo.apply(this,arguments)}function Mo(){return(Mo=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c,l,f,h,d,p,v,y,m,g;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=N(t),o=fr(),s=nr(),c=!0,l=!1,f=void 0,e.prev=5,h=r[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)p=d.value,v=n.Ji(p.metadata.name),p.document&&(o=o.add(v)),(y=n.Yi(p)).setReadTime(n.Xi(p.metadata.readTime)),s=s.insert(v,y);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),l=!0,f=e.t0;case 13:e.prev=13,e.prev=14,c||null==h.return||h.return();case 16:if(e.prev=16,!l){e.next=19;break}throw f;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return m=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=24,jo(a,function(e){return un(en(Z.fromString("__bundle__/docs/".concat(e))))}(i));case 24:return g=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return So(e,m,s).next(function(t){return m.apply(e),t}).next(function(t){return a.Cs.removeMatchingKeysForTargetId(e,g.targetId).next(function(){return a.Cs.addMatchingKeys(e,o,g.targetId)}).next(function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)}).next(function(){return t.Wi})})}));case 26:case"end":return e.stop()}},e,null,[[5,9,13,21],[14,,16,20]])}))).apply(this,arguments)}function Bo(e,t){return Uo.apply(this,arguments)}function Uo(){return(Uo=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o=arguments;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:fr(),e.next=3,jo(t,un(Vi(n.bundledQuery)));case 3:return i=e.sent,a=N(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=jr(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Me.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next(function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return a.Cs.addMatchingKeys(e,r,i.targetId)}).next(function(){return a.Ns.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function qo(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function zo(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ko=function(){function e(t,n,r,i){Object(d.a)(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Object(p.a)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new P(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(_("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Go=function(){function e(t,n,r){Object(d.a)(this,e),this.targetId=t,this.state=n,this.error=r}return Object(p.a)(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new P(i.error.code,i.error.message))),a?new e(t,i.state,r):(_("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Wo=function(){function e(t,n){Object(d.a)(this,e),this.clientId=t,this.activeTargetIds=n}return Object(p.a)(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=dr(),o=0;i&&o<r.activeTargetIds.length;++o)i=Fe(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(_("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ho=function(){function e(t,n){Object(d.a)(this,e),this.clientId=t,this.onlineState=n}return Object(p.a)(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(_("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Qo=function(){function e(){Object(d.a)(this,e),this.activeTargetIds=dr()}return Object(p.a)(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Yo=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Rt(H),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Vo(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Qo),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return Object(p.a)(e,[{key:"start",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a,o,s,c,l,f,h,d,p,v,y,m,g,b=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=!0,r=!1,i=void 0,e.prev=6,a=t[Symbol.iterator]();case 8:if(n=(o=a.next()).done){e.next=17;break}if((s=o.value)!==this.sr){e.next=12;break}return e.abrupt("continue",14);case 12:(c=this.getItem(Vo(this.persistenceKey,s)))&&(l=Wo.Zi(s,c))&&(this.ur=this.ur.insert(l.clientId,l));case 14:n=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),r=!0,i=e.t0;case 23:e.prev=23,e.prev=24,n||null==a.return||a.return();case 26:if(e.prev=26,!r){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:for(this.gr(),(f=this.storage.getItem(this.wr))&&(h=this.yr(f))&&this.pr(h),d=!0,p=!1,v=void 0,e.prev=37,y=this.cr[Symbol.iterator]();!(d=(m=y.next()).done);d=!0)g=m.value,this.rr(g);e.next=45;break;case 41:e.prev=41,e.t1=e.catch(37),p=!0,v=e.t1;case 45:e.prev=45,e.prev=46,d||null==y.return||y.return();case 48:if(e.prev=48,!p){e.next=51;break}throw v;case 51:return e.finish(48);case 52:return e.finish(45);case 53:this.cr=[],this.window.addEventListener("pagehide",function(){return b.shutdown()}),this.started=!0;case 54:case"end":return e.stop()}},e,this,[[6,19,23,31],[24,,26,30],[37,41,45,53],[46,,48,52]])}));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(zo(this.persistenceKey,e));if(n){var r=Go.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(zo(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.Er(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return C("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){C("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){C("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(C("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void _("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Object(s.a)(u.a.mark(function e(){var r,i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(s));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}(c=function(e){var t=Se.at;if(null!=e)try{var n=JSON.parse(e);A("number"==typeof n),t=n}catch(e){_("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Se.at&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return l=t.Or(n.newValue),e.next=41,Promise.all(l.map(function(e){return t.syncEngine.Mr(e)}));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}},e)})))}}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Ko(this.currentUser,e,t,n),i=qo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=qo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=zo(this.persistenceKey,e),i=new Go(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Wo.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ko.Zi(new w(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Go.Zi(r,t)}},{key:"yr",value:function(e){return Ho.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:C("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach(function(e){i.has(e)||o.push(e)}),i.forEach(function(e){a.has(e)||u.push(e)}),this.syncEngine.Br(o,u).then(function(){n.ur=r})}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=dr();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}},{key:"Ar",get:function(){return this.ur.get(this.sr)}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Xo=function(){function e(){Object(d.a)(this,e),this.Lr=new Qo,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(p.a)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Qo,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),$o=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Jo=function(){function e(){var t=this;Object(d.a)(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return Object(p.a)(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){C("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.Wr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(0)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"jr",value:function(){C("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e=!0,t=!1,n=void 0;try{for(var r,i=this.Wr[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){(0,r.value)(1)}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Zo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eu=function(){function e(t){Object(d.a)(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return Object(p.a)(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),tu=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"fo",value:function(e,t,n,r){return new Promise(function(i,a){var o=new b.g;o.setWithCredentials(!0),o.listenOnce(b.c.COMPLETE,function(){try{switch(o.getLastErrorCode()){case b.a.NO_ERROR:var t=o.getResponseJson();C("Connection","XHR received:",JSON.stringify(t)),i(t);break;case b.a.TIMEOUT:C("Connection",'RPC "'+e+'" timed out'),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case b.a.HTTP_ERROR:var n=o.getStatus();if(C("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=u.status.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(t)>=0?t:R.UNKNOWN}();a(new P(s,u.message))}else a(new P(R.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{C("Connection",'RPC "'+e+'" completed.')}});var u=JSON.stringify(r);o.send(t,"POST",u,n,15)})}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(b.h)(),a=Object(b.i)(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new b.d({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");C("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new eu({Hr:function(e){l?C("Connection","Not sending because WebChannel is closed:",e):(c||(C("Connection","Opening WebChannel transport."),s.open(),c=!0),C("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(s,b.f.EventType.OPEN,function(){l||C("Connection","WebChannel transport opened.")}),h(s,b.f.EventType.CLOSE,function(){l||(l=!0,C("Connection","WebChannel transport closed"),f.io())}),h(s,b.f.EventType.ERROR,function(e){l||(l=!0,S("Connection","WebChannel transport errored:",e),f.io(new P(R.UNAVAILABLE,"The operation could not be completed")))}),h(s,b.f.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];A(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){C("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Hn[a];if(void 0!==t)return Zn(t)}(),u=i.message;void 0===o&&(o=R.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new P(o,u)),s.close()}else C("Connection","WebChannel received:",n),f.ro(n)}}),h(a,b.b.STAT_EVENT,function(e){e.stat===b.e.PROXY?C("Connection","Detected buffering proxy"):e.stat===b.e.NOPROXY&&C("Connection","Detected no buffering proxy")}),setTimeout(function(){f.so()},0),f}}]),t}(function(){function e(t){Object(d.a)(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(p.a)(e,[{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);C("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then(function(e){return C("RestConnection","Received: ",e),e},function(t){throw S("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t})}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+x,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"ho",value:function(e,t){var n=Zo[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}},{key:"co",get:function(){return!1}}]),e}());function nu(){return"undefined"!=typeof window?window:null}function ru(){return"undefined"!=typeof document?document:null}function iu(e){return new Cr(e,!0)}var au=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(d.a)(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Object(p.a)(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&C("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,function(){return t.Eo=Date.now(),e()}),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),ou=function(){function e(t,n,r,i,a,o,u,s){Object(d.a)(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new au(t,n)}return Object(p.a)(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,function(){return e.$o()}))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(_(n.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===R.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(t){var r=Object(a.a)(t,2),i=r[0],o=r[1];e.So===n&&e.Go(i,o)},function(n){t(function(){var t=new P(R.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)})})}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(function(){r(function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,function(){return n.ko()&&(n.state=3),Promise.resolve()}),n.listener.Yr()})}),this.stream.Zr(function(e){r(function(){return n.Qo(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"Qo",value:function(e){return C("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget(function(){return t.So===e?n():(C("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),uu=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o))).yt=a,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:j()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(A(void 0===t||"string"==typeof t),Me.fromBase64String(t||"")):(A(void 0===t||t instanceof Uint8Array),Me.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?R.UNKNOWN:Zn(e.code);return new P(t,e.message||"")}(o);n=new gr(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Rr(e,s.document.name),l=jr(s.document.updateTime),f=s.document.createTime?jr(s.document.createTime):$.min(),h=new Vt({mapValue:{fields:s.document.fields}}),d=zt.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new yr(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Rr(e,y.document),g=y.readTime?jr(y.readTime):$.min(),b=zt.newNoDocument(m,g),k=y.removedTargetIds||[];n=new yr([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Rr(e,w.document),O=w.removedTargetIds||[];n=new yr([],O,x,null)}else{if(!("filter"in t))return j();t.filter;var E=t.filter;E.targetId;var T=E.count||0,C=new $n(T),_=E.targetId;n=new mr(_,C)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return $.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?$.min():t.readTime?jr(t.readTime):$.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Lr(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=Qt(r)?{documents:Kr(e,r)}:{query:Gr(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Sr(e,t.resumeToken):t.snapshotVersion.compareTo($.min())>0&&(n.readTime=_r(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return j()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Lr(this.yt),t.removeTarget=e,this.Bo(t)}}]),t}(ou),su=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o))).yt=a,u.Jo=!1,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Object(i.a)(Object(l.a)(t.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(A(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(A(void 0!==t),e.map(function(e){return function(e,t){var n=e.updateTime?jr(e.updateTime):jr(t);return n.isEqual($.min())&&(n=jr(t)),new Nn(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=jr(e.commitTime);return this.listener.Zo(n,t)}return A(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Lr(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return qr(t.yt,e)})};this.Bo(n)}},{key:"Yo",get:function(){return this.Jo}}]),t}(ou),cu=function(e){function t(e,n,r,i){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this))).authCredentials=e,a.appCheckCredentials=n,a.connection=r,a.yt=i,a.nu=!1,a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"su",value:function(){if(this.nu)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(i){var o=Object(a.a)(i,2),u=o[0],s=o[1];return r.connection.ao(e,t,n,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())})}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(o){var u=Object(a.a)(o,2),s=u[0],c=u[1];return i.connection._o(e,t,n,s,c,r)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===R.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new P(R.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.nu=!0}}]),t}(function(){return function e(){Object(d.a)(this,e)}}());var lu=function(){function e(t,n){Object(d.a)(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return Object(p.a)(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()}))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(_(t),this.ou=!1):C("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),fu=function e(t,n,r,i,a){var o=this;Object(d.a)(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(function(e){r.enqueueAndForget(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xu(o),!e.t0){e.next=5;break}return C("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=N(t))._u.add(4),e.next=4,pu(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,hu(n);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}},e)})))}),this.gu=new lu(r,i)};function hu(e){return du.apply(this,arguments)}function du(){return(du=Object(s.a)(u.a.mark(function e(t){var n,r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!xu(t)){e.next=27;break}n=!0,r=!1,i=void 0,e.prev=4,a=t.wu[Symbol.iterator]();case 6:if(n=(o=a.next()).done){e.next=13;break}return s=o.value,e.next=10,s(!0);case 10:n=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),r=!0,i=e.t0;case 19:e.prev=19,e.prev=20,n||null==a.return||a.return();case 22:if(e.prev=22,!r){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,null,[[4,15,19,27],[20,,22,26]])}))).apply(this,arguments)}function pu(e){return vu.apply(this,arguments)}function vu(){return(vu=Object(s.a)(u.a.mark(function e(t){var n,r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,i=void 0,e.prev=3,a=t.wu[Symbol.iterator]();case 5:if(n=(o=a.next()).done){e.next=12;break}return s=o.value,e.next=9,s(!1);case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,i=e.t0;case 18:e.prev=18,e.prev=19,n||null==a.return||a.return();case 21:if(e.prev=21,!r){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,null,[[3,14,18,26],[19,,21,25]])}))).apply(this,arguments)}function yu(e,t){var n=N(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),wu(n)?ku(n):$u(n).ko()&&gu(n,t))}function mu(e,t){var n=N(e),r=$u(n);n.du.delete(t),r.ko()&&bu(n,t),0===n.du.size&&(r.ko()?r.Fo():xu(n)&&n.gu.set("Unknown"))}function gu(e,t){e.yu.Ot(t.targetId),$u(e).zo(t)}function bu(e,t){e.yu.Ot(t),$u(e).Ho(t)}function ku(e){e.yu=new kr({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),$u(e).start(),e.gu.uu()}function wu(e){return xu(e)&&!$u(e).No()&&e.du.size>0}function xu(e){return 0===N(e)._u.size}function Ou(e){e.yu=void 0}function Eu(e){return Tu.apply(this,arguments)}function Tu(){return(Tu=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach(function(e,n){gu(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cu(e,t){return _u.apply(this,arguments)}function _u(){return(_u=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ou(t),wu(t)?(t.gu.hu(n),ku(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Su(e,t,n){return Iu.apply(this,arguments)}function Iu(){return(Iu=Object(s.a)(u.a.mark(function e(t,n,r){var i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof gr&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=!0,a=!1,o=void 0,e.prev=4,s=n.targetIds[Symbol.iterator]();case 6:if(i=(c=s.next()).done){e.next=17;break}if(l=c.value,e.t0=t.du.has(l),!e.t0){e.next=14;break}return e.next=12,t.remoteSyncer.rejectListen(l,r);case 12:t.du.delete(l),t.yu.removeTarget(l);case 14:i=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(4),a=!0,o=e.t1;case 23:e.prev=23,e.prev=24,i||null==s.return||s.return();case 26:if(e.prev=26,!a){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,null,[[4,19,23,31],[24,,26,30]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),C("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ju(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof yr?t.yu.Kt(n):n instanceof mr?t.yu.Jt(n):t.yu.jt(n),r.isEqual($.min())){e.next=29;break}return e.prev=14,e.next=17,Co(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Me.EMPTY_BYTE_STRING,n.snapshotVersion)),bu(e,t);var r=new Di(n.target,t,1,n.sequenceNumber);gu(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),C("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ju(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function ju(e,t,n){return Au.apply(this,arguments)}function Au(){return(Au=Object(s.a)(u.a.mark(function e(t,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(we(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,pu(t);case 5:t.gu.set("Offline"),r||(r=function(){return Co(t.localStore)}),t.asyncQueue.enqueueRetryable(Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,hu(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Du(e,t){return t().catch(function(n){return ju(e,n,t)})}function Nu(e){return Ru.apply(this,arguments)}function Ru(){return(Ru=Object(s.a)(u.a.mark(function e(t){var n,r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=N(t),r=Ju(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Pu(n)){e.next=19;break}return e.prev=3,e.next=6,Io(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,Fu(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ju(n,e.t0);case 17:e.next=2;break;case 19:Lu(n)&&Mu(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function Pu(e){return xu(e)&&e.fu.length<10}function Fu(e,t){e.fu.push(t);var n=Ju(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Lu(e){return xu(e)&&!Ju(e).No()&&e.fu.length>0}function Mu(e){Ju(e).start()}function Bu(e){return Uu.apply(this,arguments)}function Uu(){return(Uu=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ju(t).eu();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vu(e){return qu.apply(this,arguments)}function qu(){return(qu=Object(s.a)(u.a.mark(function e(t){var n,r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Ju(t),r=!0,i=!1,a=void 0,e.prev=4,o=t.fu[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)c=s.value,n.Xo(c.mutations);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),i=!0,a=e.t0;case 12:e.prev=12,e.prev=13,r||null==o.return||o.return();case 15:if(e.prev=15,!i){e.next=18;break}throw a;case 18:return e.finish(15);case 19:return e.finish(12);case 20:case"end":return e.stop()}},e,null,[[4,8,12,20],[13,,15,19]])}))).apply(this,arguments)}function zu(e,t,n){return Ku.apply(this,arguments)}function Ku(){return(Ku=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=ji.from(i,n,r),e.next=3,Du(t,function(){return t.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,Nu(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gu(e,t){return Wu.apply(this,arguments)}function Wu(){return(Wu=Object(s.a)(u.a.mark(function e(t,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ju(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Jn(i=n.code)||i===R.ABORTED){e.next=7;break}return r=t.fu.shift(),Ju(t).Mo(),e.next=5,Du(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,Nu(t);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Lu(t)&&Mu(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hu(e,t){return Qu.apply(this,arguments)}function Qu(){return(Qu=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=N(t)).asyncQueue.verifyOperationInProgress(),C("RemoteStore","RemoteStore received new credentials"),i=xu(r),r._u.add(3),e.next=6,pu(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,hu(r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yu(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,hu(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,pu(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $u(e){return e.pu||(e.pu=function(e,t,n){var r=N(e);return r.su(),new uu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Eu.bind(null,e),Zr:Cu.bind(null,e),Wo:Su.bind(null,e)}),e.wu.push(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),wu(e)?ku(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Ou(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.pu}function Ju(e){return e.Iu||(e.Iu=function(e,t,n){var r=N(e);return r.su(),new su(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:Bu.bind(null,e),Zr:Gu.bind(null,e),tu:Vu.bind(null,e),Zo:zu.bind(null,e)}),e.wu.push(function(){var t=Object(s.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,Nu(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(C("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Zu=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return Object(p.a)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function es(e,t){if(_("AsyncQueue","".concat(t,": ").concat(e)),we(e))return new P(R.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ts=function(){function e(t){Object(d.a)(this,e),this.comparator=t?function(e,n){return t(e,n)||ne.comparator(e.key,n.key)}:function(e,t){return ne.comparator(e.key,t.key)},this.keyedMap=ir(),this.sortedSet=new Rt(this.comparator)}return Object(p.a)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},{key:"size",get:function(){return this.sortedSet.size}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ns=function(){function e(){Object(d.a)(this,e),this.Tu=new Rt(ne.comparator)}return Object(p.a)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):j():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),rs=function(){function e(t,n,r,i,a,o,u,s,c){Object(d.a)(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Object(p.a)(e,[{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ln(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}},{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,ts.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),is=function e(){Object(d.a)(this,e),this.Au=void 0,this.listeners=[]},as=function e(){Object(d.a)(this,e),this.queries=new er(function(e){return fn(e)},ln),this.onlineState="Unknown",this.Ru=new Set};function os(e,t){return us.apply(this,arguments)}function us(){return(us=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new is),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=es(e.t0,"Initialization of query '".concat(hn(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&ls(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function ss(e,t){return cs.apply(this,arguments)}function cs(){return(cs=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ls(e){e.Ru.forEach(function(e){e.next()})}var fs=function(){function e(t,n,r){Object(d.a)(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return Object(p.a)(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.docChanges[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;3!==u.type&&t.push(u)}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}e=new rs(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var s=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),s=!0):this.Cu(e,this.onlineState)&&(this.xu(e),s=!0),this.Su=e,s}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),hs=function(){function e(t,n){Object(d.a)(this,e),this.ku=t,this.byteLength=n}return Object(p.a)(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),ds=function(){function e(t){Object(d.a)(this,e),this.yt=t}return Object(p.a)(e,[{key:"Ji",value:function(e){return Rr(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Ur(this.yt,e.document,!1):zt.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return jr(e)}}]),e}(),ps=function(){function e(t,n,r){Object(d.a)(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vs(t)}return Object(p.a)(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=Z.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t=new Map,n=new ds(this.yt),r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s.metadata.queries){var c=n.Ji(s.metadata.name),l=!0,f=!1,h=void 0;try{for(var d,p=s.metadata.queries[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value,y=(t.get(v)||fr()).add(c);t.set(v,y)}}catch(m){f=!0,h=m}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}}}catch(m){i=!0,a=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return t}},{key:"complete",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lo(this.localStore,new ds(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=!0,i=!1,a=void 0,e.prev=7,o=this.queries[Symbol.iterator]();case 9:if(r=(s=o.next()).done){e.next=16;break}return c=s.value,e.next=13,Bo(this.localStore,c,n.get(c.name));case 13:r=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),i=!0,a=e.t0;case 22:e.prev=22,e.prev=23,r||null==o.return||o.return();case 25:if(e.prev=25,!i){e.next=28;break}throw a;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 31:case"end":return e.stop()}},e,this,[[7,18,22,30],[23,,25,29]])}));return function(){return e.apply(this,arguments)}}()}]),e}();function vs(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ys=function e(t){Object(d.a)(this,e),this.key=t},ms=function e(t){Object(d.a)(this,e),this.key=t},gs=function(){function e(t,n){Object(d.a)(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=fr(),this.mutatedKeys=fr(),this.Gu=vn(t),this.Qu=new ts(this.Gu)}return Object(p.a)(e,[{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ns,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=dn(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)}),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new rs(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ns,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.qu=t.qu.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.qu=t.qu.delete(e)}),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=fr(),this.Qu.forEach(function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))});var n=[];return t.forEach(function(t){e.Ku.has(t)||n.push(new ms(t))}),this.Ku.forEach(function(e){t.has(e)||n.push(new ys(e))}),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=fr();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return rs.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}},{key:"ju",get:function(){return this.qu}}]),e}(),bs=function e(t,n,r){Object(d.a)(this,e),this.query=t,this.targetId=n,this.view=r},ks=function e(t){Object(d.a)(this,e),this.key=t,this.nc=!1},ws=function(){function e(t,n,r,i,a,o){Object(d.a)(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new er(function(e){return fn(e)},ln),this.rc=new Map,this.oc=new Set,this.uc=new Rt(ne.comparator),this.cc=new Map,this.ac=new no,this.hc={},this.lc=new Map,this.fc=Da.vn(),this.onlineState="Unknown",this.dc=void 0}return Object(p.a)(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function xs(e,t){return Os.apply(this,arguments)}function Os(){return(Os=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fc(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,jo(r.localStore,un(n));case 8:return s=e.sent,r.isPrimaryClient&&yu(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Es(r,n,i,"current"===c,s.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Es(e,t,n,r,i){return Ts.apply(this,arguments)}function Ts(){return(Ts=Object(s.a)(u.a.mark(function e(t,n,r,i,a){var o,c,l,f,h,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,No(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.Wu(t,a)});case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qs(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,No(t.localStore,n,!0);case 3:return o=e.sent,c=new gs(n,o.Hi),l=c.Wu(o.documents),f=vr.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=c.applyChanges(l,t.isPrimaryClient,f),qs(t,r,h.Xu),d=new bs(n,r,c),e.abrupt("return",(t.ic.set(n,d),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cs(e,t){return _s.apply(this,arguments)}function _s(){return(_s=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=N(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter(function(e){return!ln(e,n)})),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ao(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),mu(r.remoteStore,i.targetId),Us(r,i.targetId)}).catch(pe);case 9:e.next=14;break;case 11:return Us(r,i.targetId),e.next=14,Ao(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ss(e,t,n){return Is.apply(this,arguments)}function Is(){return(Is=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=hc(t),e.prev=1,e.next=4,function(e,t){var n,r,i=N(e),a=X.now(),o=t.reduce(function(e,t){return e.add(t.key)},fr());return i.persistence.runTransaction("Locally write mutations","readwrite",function(e){var u=nr(),s=fr();return i.Gi.getEntries(e,o).next(function(e){(u=e).forEach(function(e,t){t.isValidDocument()||(s=s.add(e))})}).next(function(){return i.localDocuments.getOverlayedDocuments(e,u)}).next(function(r){n=r;var o=[],u=!0,s=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value,d=Un(h,n.get(h.key).overlayedDocument);null!=d&&o.push(new zn(h.key,d,qt(d.value.mapValue),Rn.exists(!0)))}}catch(p){s=!0,c=p}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}return i.mutationQueue.addMutationBatch(e,a,o,t)}).next(function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)})}).then(function(){return{batchId:r.batchId,changes:ar(n)}})}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Rt(H)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Gs(i,a.changes);case 9:return e.next=11,Nu(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=es(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function js(e,t){return As.apply(this,arguments)}function As(){return(As=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.prev=1,e.next=4,_o(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.cc.get(t);n&&(A(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?A(n.nc):e.removedDocuments.size>0&&(A(n.nc),n.nc=!1))}),e.next=8,Gs(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,pe(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Ds(e,t,n){var r=N(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach(function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=N(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i=!0,a=!1,o=void 0;try{for(var u,s=n.listeners[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){u.value.bu(t)&&(r=!0)}}catch(c){a=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}),r&&ls(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ns(){return(Ns=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=N(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Rt(ne.comparator)).insert(o,zt.newNoDocument(o,$.min())),c=fr().add(o),l=new pr($.min(),new Map,new Lt(H),s,c),e.next=9,js(i,l);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Ks(i),e.next=16;break;case 14:return e.next=16,Ao(i.localStore,n,!1).then(function(){return Us(i,n,r)}).catch(pe);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rs(){return(Rs=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),i=n.batch.batchId,e.prev=1,e.next=4,To(r.localStore,n);case 4:return a=e.sent,Bs(r,i,null),Ms(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Gs(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pe(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Ps(){return(Ps=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=N(t),e.prev=1,e.next=4,function(e,t){var n=N(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next(function(t){return A(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)}).next(function(){return n.mutationQueue.performConsistencyCheck(e)}).next(function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)}).next(function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)}).next(function(){return n.localDocuments.getDocuments(e,r)})})}(i.localStore,n);case 4:return a=e.sent,Bs(i,n,r),Ms(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Gs(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,pe(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Fs(e,t){return Ls.apply(this,arguments)}function Ls(){return(Ls=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return xu((r=N(t)).remoteStore)||C("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=N(r.localStore);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})}();case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=es(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function Ms(e,t){(e.lc.get(t)||[]).forEach(function(e){e.resolve()}),e.lc.delete(t)}function Bs(e,t,n){var r=N(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Us(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r=!0,i=!1,a=void 0;try{for(var o,u=e.rc.get(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;e.ic.delete(s),n&&e.sc.wc(s,n)}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach(function(t){e.ac.containsKey(t)||Vs(e,t)})}function Vs(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(mu(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Ks(e))}function qs(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;s instanceof ys?(e.ac.addReference(s.key,t),zs(e,s)):s instanceof ms?(C("SyncEngine","Document no longer in limbo: "+s.key),e.ac.removeReference(s.key,t),e.ac.containsKey(s.key)||Vs(e,s.key)):j()}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}function zs(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(C("SyncEngine","New document in limbo: "+n),e.oc.add(r),Ks(e))}function Ks(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new ne(Z.fromString(t)),r=e.fc.next();e.cc.set(r,new ks(n)),e.uc=e.uc.insert(n,r),yu(e.remoteStore,new Di(un(en(n.path)),r,2,Se.at))}}function Gs(e,t,n){return Ws.apply(this,arguments)}function Ws(){return(Ws=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=N(t),a=[],o=[],c=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach(function(e,t){c.push(i._c(t,n,r).then(function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=bo.Ci(t.targetId,e);o.push(n)}}))}),e.next=6,Promise.all(c);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l,f,h,d,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return ye.forEach(n,function(t){return ye.forEach(t.Si,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return ye.forEach(t.Di,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),we(e.t0)){e.next=10;break}throw e.t0;case 10:C("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:for(i=!0,a=!1,o=void 0,e.prev=14,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)l=c.value,f=l.targetId,l.fromCache||(h=r.qi.get(f),d=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(d),r.qi=r.qi.insert(f,p));e.next=22;break;case 18:e.prev=18,e.t1=e.catch(14),a=!0,o=e.t1;case 22:e.prev=22,e.prev=23,i||null==s.return||s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw o;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},e,null,[[1,6],[14,18,22,30],[23,,25,29]])}));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hs(e,t){return Qs.apply(this,arguments)}function Qs(){return(Qs=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=N(t)).currentUser.isEqual(n)){e.next=11;break}return C("SyncEngine","User change. New user:",n.toKey()),e.next=5,Oo(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach(function(e){e.forEach(function(e){e.reject(new P(R.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Gs(r,i.ji);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ys(e,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.next=3,No(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&qs(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $s(e,t){return Js.apply(this,arguments)}function Js(){return(Js=Object(s.a)(u.a.mark(function e(t,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),e.abrupt("return",Po(r.localStore,n).then(function(e){return Gs(r,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zs(e,t,n,r){return ec.apply(this,arguments)}function ec(){return(ec=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=N(t),e.next=3,function(e,t){var n=N(e),r=N(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Tn(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):ye.resolve(null)})})}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Nu(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Bs(a,n,i||null),Ms(a,n),function(e,t){N(N(e).mutationQueue).An(t)}(a.localStore,n)):j();case 11:return e.next=13,Gs(a,o);case 13:e.next=16;break;case 15:C("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return(nc=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c,l,f,h,d,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(fc(r=N(t)),hc(r),!0!==n||!0===r.dc){e.next=30;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,rc(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,Yu(r.remoteStore,!0);case 9:for(o=!0,s=!1,c=void 0,e.prev=12,l=a[Symbol.iterator]();!(o=(f=l.next()).done);o=!0)h=f.value,yu(r.remoteStore,h);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),s=!0,c=e.t0;case 20:e.prev=20,e.prev=21,o||null==l.return||l.return();case 23:if(e.prev=23,!s){e.next=26;break}throw c;case 26:return e.finish(23);case 27:return e.finish(20);case 28:e.next=42;break;case 30:if(!1!==n||!1===r.dc){e.next=42;break}return d=[],p=Promise.resolve(),r.rc.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?d.push(t):p=p.then(function(){return Us(r,t),Ao(r.localStore,t,!0)}),mu(r.remoteStore,t)}),e.next=36,p;case 36:return e.next=38,rc(r,d);case 38:return function(e){var t=N(r);t.cc.forEach(function(e,n){mu(t.remoteStore,n)}),t.ac.fs(),t.cc=new Map,t.uc=new Rt(ne.comparator)}(),r.dc=!1,e.next=42,Yu(r.remoteStore,!1);case 42:case"end":return e.stop()}},e,null,[[12,16,20,28],[21,,23,27]])}))).apply(this,arguments)}function rc(e,t,n){return ic.apply(this,arguments)}function ic(){return(ic=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d,p,v,y,m,g,b,k,w,x,O,E;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=N(t),a=[],o=[],s=!0,c=!1,l=void 0,e.prev=4,f=n[Symbol.iterator]();case 6:if(s=(h=f.next()).done){e.next=57;break}if(d=h.value,p=void 0,!(v=i.rc.get(d))||0===v.length){e.next=45;break}return e.next=13,jo(i.localStore,un(v[0]));case 13:p=e.sent,y=!0,m=!1,g=void 0,e.prev=17,b=v[Symbol.iterator]();case 19:if(y=(k=b.next()).done){e.next=29;break}return w=k.value,x=i.ic.get(w),e.next=24,Ys(i,x);case 24:(O=e.sent).snapshot&&o.push(O.snapshot);case 26:y=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(17),m=!0,g=e.t0;case 35:e.prev=35,e.prev=36,y||null==b.return||b.return();case 38:if(e.prev=38,!m){e.next=41;break}throw g;case 41:return e.finish(38);case 42:return e.finish(35);case 43:e.next=53;break;case 45:return e.next=47,Ro(i.localStore,d);case 47:return E=e.sent,e.next=50,jo(i.localStore,E);case 50:return p=e.sent,e.next=53,Es(i,ac(E),d,!1,p.resumeToken);case 53:a.push(p);case 54:s=!0,e.next=6;break;case 57:e.next=63;break;case 59:e.prev=59,e.t1=e.catch(4),c=!0,l=e.t1;case 63:e.prev=63,e.prev=64,s||null==f.return||f.return();case 66:if(e.prev=66,!c){e.next=69;break}throw l;case 69:return e.finish(66);case 70:return e.finish(63);case 71:return e.abrupt("return",(i.sc.Wo(o),a));case 72:case"end":return e.stop()}},e,null,[[4,59,63,71],[17,31,35,43],[36,,38,42],[64,,66,70]])}))).apply(this,arguments)}function ac(e){return Zt(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function oc(e){var t=N(e);return N(N(t.localStore).persistence).vi()}function uc(e,t,n,r){return sc.apply(this,arguments)}function sc(){return(sc=Object(s.a)(u.a.mark(function e(t,n,r,i){var a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=N(t)).dc){e.next=3;break}return e.abrupt("return",void C("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0?8:"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Po(a.localStore,pn(o[0]));case 10:return s=e.sent,c=pr.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Me.EMPTY_BYTE_STRING),e.next=14,Gs(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ao(a.localStore,n,!0);case 17:return Us(a,n,i),e.abrupt("break",20);case 19:j();case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cc(e,t,n){return lc.apply(this,arguments)}function lc(){return(lc=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c,l,f,h,d,p,v,y,m,g,b;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=fc(t)).dc){e.next=63;break}a=!0,o=!1,s=void 0,e.prev=5,c=n[Symbol.iterator]();case 7:if(a=(l=c.next()).done){e.next=24;break}if(f=l.value,!i.rc.has(f)){e.next=12;break}return C("SyncEngine","Adding an already active target "+f),e.abrupt("continue",21);case 12:return e.next=14,Ro(i.localStore,f);case 14:return h=e.sent,e.next=17,jo(i.localStore,h);case 17:return d=e.sent,e.next=20,Es(i,ac(h),d.targetId,!1,d.resumeToken);case 20:yu(i.remoteStore,d);case 21:a=!0,e.next=7;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(5),o=!0,s=e.t0;case 30:e.prev=30,e.prev=31,a||null==c.return||c.return();case 33:if(e.prev=33,!o){e.next=36;break}throw s;case 36:return e.finish(33);case 37:return e.finish(30);case 38:p=!0,v=!1,y=void 0,e.prev=41,m=u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Ao(i.localStore,t,!1).then(function(){mu(i.remoteStore,t),Us(i,t)}).catch(pe);case 5:case"end":return e.stop()}},e)}),g=r[Symbol.iterator]();case 44:if(p=(b=g.next()).done){e.next=49;break}return e.delegateYield(m(),"t1",46);case 46:p=!0,e.next=44;break;case 49:e.next=55;break;case 51:e.prev=51,e.t2=e.catch(41),v=!0,y=e.t2;case 55:e.prev=55,e.prev=56,p||null==g.return||g.return();case 58:if(e.prev=58,!v){e.next=61;break}throw y;case 61:return e.finish(58);case 62:return e.finish(55);case 63:case"end":return e.stop()}},e,null,[[5,26,30,38],[31,,33,37],[41,51,55,63],[56,,58,62]])}))).apply(this,arguments)}function fc(e){var t=N(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=js.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(e,t){var n=N(e),r=n.cc.get(t);if(r&&r.nc)return fr().add(r.key);var i=fr(),a=n.rc.get(t);if(!a)return i;var o=!0,u=!1,s=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.ic.get(f);i=i.unionWith(h.view.ju)}}catch(d){u=!0,s=d}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return i}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(e,t,n){return Ns.apply(this,arguments)}.bind(null,t),t.sc.Wo=function(e,t){var n=N(e),r=!1,i=!0,a=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,p=void 0;try{for(var v,y=f.listeners[Symbol.iterator]();!(h=(v=y.next()).done);h=!0)v.value.Pu(c)&&(r=!0)}catch(m){d=!0,p=m}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}f.Au=c}}}catch(m){a=!0,o=m}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}r&&ls(n)}.bind(null,t.eventManager),t.sc.wc=function(e,t,n){var r=N(e),i=r.queries.get(t);if(i){var a=!0,o=!1,u=void 0;try{for(var s,c=i.listeners[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)s.value.onError(n)}catch(l){o=!0,u=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}}r.queries.delete(t)}.bind(null,t.eventManager),t}function hc(e){var t=N(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(e,t){return Rs.apply(this,arguments)}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=function(e,t,n){return Ps.apply(this,arguments)}.bind(null,t),t}function dc(e,t,n){var r=N(e);(function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=N(e),r=jr(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Ns.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(vs(i)),a=new ps(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,Gs(t,c.Lu,void 0);case 31:return e.next=33,function(e,t){var n=N(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Ns.saveBundleMetadata(e,t)})}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(S("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}},e,null,[[0,37]])}));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then(function(e){r.sharedClientState.notifyBundleLoaded(e)})}var pc=function(){function e(){Object(d.a)(this,e),this.synchronizeTabs=!1}return Object(p.a)(e,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=iu(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return xo(this.persistence,new ko,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new so(lo.Bs,this.yt)}},{key:"gc",value:function(e){return new Xo}},{key:"terminate",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),vc=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).Ac=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(n){var r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(l.a)(t.prototype),"initialize",this).call(this,n);case 2:return e.next=4,this.Ac.initialize(this,n);case 4:return e.next=6,hc(this.Ac.syncEngine);case 6:return e.next=8,Nu(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return xo(this.persistence,new ko,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Ba(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new _e(t,this.persistence);return new Ce(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=go(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ea.withCacheSize(this.cacheSizeBytes):Ea.DEFAULT;return new vo(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nu(),ru(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Xo}}]),t}(pc),yc=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n,!1))).Ac=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(n){var r,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)(Object(l.a)(t.prototype),"initialize",this).call(this,n);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof Yo,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:Zs.bind(null,r),$r:uc.bind(null,r),Br:cc.bind(null,r),vi:oc.bind(null,r),Mr:$s.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tc(a.Ac.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start():t||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(t&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():t||a.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=nu();if(!Yo.C(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=go(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yo(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),t}(vc),mc=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"initialize",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ds(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Hs.bind(null,this.syncEngine),e.next=12,Yu(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new as}},{key:"createDatastore",value:function(e){var t,n=iu(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new tu(t));return function(e,t,n,r){return new cu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ds(o.syncEngine,e,0)},a=Jo.C()?new Jo:new $o,new fu(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ws(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(t),C("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,pu(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function gc(e,t,n){if(!n)throw new P(R.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bc(e,t,n,r){if(!0===t&&!0===r)throw new P(R.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function kc(e){if(!ne.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wc(e){if(ne.isDocumentKey(e))throw new P(R.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":j()}function Oc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xc(e);throw new P(R.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ec(e,t){if(t<=0)throw new P(R.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Tc=new Map,Cc=function(){function e(t){var n;if(Object(d.a)(this,e),void 0===t.host){if(void 0!==t.ssl)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,bc("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),_c=function(){function e(t,n,r,i){Object(d.a)(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cc({}),this._settingsFrozen=!1}return Object(p.a)(e,[{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new M;switch(e.type){case"gapi":var t=e.client;return new q(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Tc.get(e);t&&(C("ComponentProvider","Removing Datastore"),Tc.delete(e),t.terminate())}(this),Promise.resolve()}},{key:"app",get:function(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}}]),e}();function Sc(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Oc(e,_c))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&S("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=w.MOCK_USER;else{o=Object(g.f)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new w(s)}e._authCredentials=new B(new L(o,u))}}var Ic=function(){function e(t,n,r){Object(d.a)(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object(p.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}},{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ac(this.firestore,this.converter,this._key.path.popLast())}}]),e}(),jc=function(){function e(t,n,r){Object(d.a)(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Object(p.a)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ac=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this,e,n,en(r))))._path=r,i.type="collection",i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._path)}},{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ic(this.firestore,null,new ne(e))}}]),t}(jc);function Dc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(g.l)(e),gc("collection","path",t),e instanceof _c){var a=Z.fromString.apply(Z,[t].concat(r));return wc(a),new Ac(e,null,a)}if(!(e instanceof Ic||e instanceof Ac))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Z.fromString.apply(Z,[t].concat(r)));return wc(o),new Ac(e.firestore,null,o)}function Nc(e,t){if(e=Oc(e,_c),gc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jc(e,null,function(e){return new Jt(Z.emptyPath(),e)}(t))}function Rc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Object(g.l)(e),1===arguments.length&&(t=W.R()),gc("doc","path",t),e instanceof _c){var a=Z.fromString.apply(Z,[t].concat(r));return kc(a),new Ic(e,null,new ne(a))}if(!(e instanceof Ic||e instanceof Ac))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Z.fromString.apply(Z,[t].concat(r)));return kc(o),new Ic(e.firestore,e instanceof Ac?e.converter:null,new ne(o))}function Pc(e,t){return e=Object(g.l)(e),t=Object(g.l)(t),(e instanceof Ic||e instanceof Ac)&&(t instanceof Ic||t instanceof Ac)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Fc(e,t){return e=Object(g.l)(e),t=Object(g.l)(t),e instanceof jc&&t instanceof jc&&e.firestore===t.firestore&&ln(e._query,t._query)&&e.converter===t.converter}function Lc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){var r=Object(s.a)(u.a.mark(function r(){var i;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}));return function(){return r.apply(this,arguments)}}(),cancel:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Mc=function(){function e(t){Object(d.a)(this,e),this.observer=t,this.muted=!1}return Object(p.a)(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Bc=function(){function e(t,n){var r=this;Object(d.a)(this,e),this.Pc=t,this.yt=n,this.metadata=new F,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))},function(e){return r.metadata.reject(e)})}return Object(p.a)(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new hs(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"Sc",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),Uc=function(){function e(t){Object(d.a)(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Object(p.a)(e,[{key:"lookup",value:function(){var e=Object(s.a)(u.a.mark(function e(t){var n,r=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),i=Lr(r.yt)+"/documents",a={documents:n.map(function(e){return Nr(r.yt,e)})},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach(function(e){var t=Vr(r.yt,e);s.set(t.key.toString(),t)}),c=[],e.abrupt("return",(n.forEach(function(e){var t=s.get(e.toString());A(!!t),c.push(t)}),c));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach(function(e){return r.recordVersion(e)}),n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Yn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(e,t){var r=ne.fromPath(t);n.mutations.push(new Xn(r,n.precondition(r)))}),e.next=7,function(){var e=Object(s.a)(u.a.mark(function e(t,n){var r,i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=N(t),i=Lr(r.yt)+"/documents",a={writes:n.map(function(e){return qr(r.yt,e)})},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j();t=$.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Vc=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new au(this.asyncQueue,"transaction_retry")}return Object(p.a)(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Uc(e.datastore),(r=e.Mc(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.Fc(t)})})}).catch(function(t){e.Fc(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Re(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(function(){return t.Oc(),Promise.resolve()})):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Jn(t)}return!1}}]),e}(),qc=function(){function e(t,n,r,i){var a=this;Object(d.a)(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=w.UNAUTHENTICATED,this.clientId=W.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,function(e){return C("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)})}return Object(p.a)(e,[{key:"getConfiguration",value:function(){var e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(s.a)(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=es(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function zc(e,t){return Kc.apply(this,arguments)}function Kc(){return(Kc=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),C("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Oo(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gc(e,t){return Wc.apply(this,arguments)}function Wc(){return(Wc=Object(s.a)(u.a.mark(function e(t,n){var r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Hc(t);case 3:return r=e.sent,C("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return Hu(n.remoteStore,e)}),t.setAppCheckTokenChangeListener(function(e,t){return Hu(n.remoteStore,t)}),t.onlineComponents=n;case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hc(e){return Qc.apply(this,arguments)}function Qc(){return(Qc=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return C("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,zc(t,new pc);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yc(e){return Xc.apply(this,arguments)}function Xc(){return(Xc=Object(s.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return C("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Gc(t,new mc);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $c(e){return Hc(e).then(function(e){return e.persistence})}function Jc(e){return Hc(e).then(function(e){return e.localStore})}function Zc(e){return Yc(e).then(function(e){return e.remoteStore})}function el(e){return Yc(e).then(function(e){return e.syncEngine})}function tl(e){return Yc(e).then(function(e){return e.datastore})}function nl(e){return rl.apply(this,arguments)}function rl(){return(rl=Object(s.a)(u.a.mark(function e(t){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=xs.bind(null,n.syncEngine),r.onUnlisten=Cs.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function il(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Mc({next:function(a){t.enqueueAndForget(function(){return ss(e,o)});var u=a.docs.has(n);!u&&a.fromCache?i.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new fs(en(n.path),a,{includeMetadataChanges:!0,Nu:!0});return os(e,o)},i.next=3,nl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function al(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Mc({next:function(n){t.enqueueAndForget(function(){return ss(e,o)}),n.fromCache&&"server"===r.source?i.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new fs(n,a,{includeMetadataChanges:!0,Nu:!0});return os(e,o)},i.next=3,nl(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var ol=function(){function e(){var t=this;Object(d.a)(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new au(this,"async_queue_retry"),this.Wc=function(){var e=ru();e&&C("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=ru();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return Object(p.a)(e,[{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=ru();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise(function(){});var n=new F;return this.Hc(function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.Lc.push(e),t.Jc()})}},{key:"Jc",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),we(e.t0)){e.next=12;break}throw e.t0;case 12:C("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro(function(){return t.Jc()});case 14:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then(function(){return t.Gc=!0,e().catch(function(e){throw t.Kc=e,t.Gc=!1,_("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.Gc=!1,e})});return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=Zu.createAndSchedule(this,e,t,n,function(e){return r.Yc(e)});return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&j()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.Uc[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(i.value.timerId===e)return!0}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then(function(){t.Uc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n=!0,r=!1,i=void 0;try{for(var a,o=t.Uc[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(u.skipDelay(),"all"!==e&&u.timerId===e)break}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.Xc()})}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}},{key:"isShuttingDown",get:function(){return this.qc}}]),e}();function ul(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n=e,r=!0,i=!1,a=void 0;try{for(var o,u=["next","error","complete"][Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s in n&&"function"==typeof n[s])return!0}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return!1}(e)}var sl=function(){function e(){Object(d.a)(this,e),this._progressObserver={},this._taskCompletionResolver=new F,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Object(p.a)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),cl=-1,ll=function(e){function t(e,n,r,i){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r,i))).type="firestore",a._queue=new ol,a._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_terminate",value:function(){return this._firestoreClient||hl(this),this._firestoreClient.terminate()}}]),t}(_c);function fl(e){return e._firestoreClient||hl(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hl(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ie(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new qc(e._authCredentials,e._appCheckCredentials,e._queue,r)}function dl(e,t){xl(e=Oc(e,ll));var n=fl(e),r=e._freezeSettings(),i=new mc;return vl(n,i,new vc(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function pl(e){xl(e=Oc(e,ll));var t=fl(e),n=e._freezeSettings(),r=new mc;return vl(t,r,new yc(r,n.cacheSizeBytes))}function vl(e,t,n){var r=new F;return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function i(){var a;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,zc(e,n);case 3:return i.next=5,Gc(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===R.FAILED_PRECONDITION||e.code===R.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:S("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function yl(e){if(e._initialized&&!e._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new F;return e._queue.enqueueAndForgetEvenWhileRestricted(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ge.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ge.delete(n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(go(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}function ml(e){return function(e){var t=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Fs,n.next=3,el(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)}))),t.promise}(fl(e=Oc(e,ll)))}function gl(e){return function(e){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$c(e);case 2:return n=t.sent,t.next=5,Zc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=N(r);return t._u.delete(0),hu(t)}()));case 7:case"end":return t.stop()}},t)})))}(fl(e=Oc(e,ll)))}function bl(e){return function(e){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$c(e);case 2:return n=t.sent,t.next=5,Zc(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Object(s.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=N(t))._u.add(0),e.next=4,pu(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}},t)})))}(fl(e=Oc(e,ll)))}function kl(e,t){var n=fl(e=Oc(e,ll)),r=new sl;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Bc(e,t)}(function(e,t){if(e instanceof Uint8Array)return Lc(e,t);if(e instanceof ArrayBuffer)return Lc(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,iu(t));e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dc,t.next=3,el(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}function wl(e,t){return function(e,t){return e.asyncQueue.enqueue(Object(s.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=N(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Ns.getNamedQuery(e,t)})},n.next=3,Jc(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(fl(e=Oc(e,ll)),t).then(function(t){return t?new jc(e,null,t.query):null})}function xl(e){if(e._initialized||e._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ol=function(){function e(t){Object(d.a)(this,e),this._byteString=t}return Object(p.a)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Me.fromBase64String(t))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Me.fromUint8Array(t))}}]),e}(),El=function(){function e(){Object(d.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new te(n)}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Tl=function e(t){Object(d.a)(this,e),this._methodName=t},Cl=function(){function e(t,n){if(Object(d.a)(this,e),!isFinite(t)||t<-90||t>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return H(this._lat,e._lat)||H(this._long,e._long)}},{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}}]),e}(),_l=/^__.*__$/,Sl=function(){function e(t,n,r){Object(d.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(p.a)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new zn(e,this.data,this.fieldMask,t,this.fieldTransforms):new qn(e,this.data,t,this.fieldTransforms)}}]),e}(),Il=function(){function e(t,n,r){Object(d.a)(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Object(p.a)(e,[{key:"toMutation",value:function(e,t){return new zn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function jl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var Al=function(){function e(t,n,r,i,a,o){Object(d.a)(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Object(p.a)(e,[{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return $l(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(jl(this.sa)&&_l.test(e))throw this.ha('Document fields cannot begin and end with "__"')}},{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}}]),e}(),Dl=function(){function e(t,n,r){Object(d.a)(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||iu(t)}return Object(p.a)(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Al({sa:e,methodName:t,fa:n,path:te.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function Nl(e){var t=e._freezeSettings(),n=iu(e._databaseId);return new Dl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rl(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Hl("Data must be an object, but it was:",o,r);var u,s,c=Gl(r,o);if(a.merge)u=new Ut(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var p,v=a.mergeFields[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=Ql(t,p.value,n);if(!o.contains(y))throw new P(R.INVALID_ARGUMENT,"Field '".concat(y,"' is specified in your field mask but missing from your input data."));Jl(l,y)||l.push(y)}}catch(m){h=!0,d=m}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}u=new Ut(l),s=o.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=o.fieldTransforms;return new Sl(new Vt(c),u,s)}var Pl=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Tl);function Fl(e,t,n){return new Al({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var Ll=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){return new Dn(e.path,new En)}},{key:"isEqual",value:function(e){return e instanceof t}}]),t}(Tl),Ml=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e)))._a=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=Fl(this,e,!0),n=this._a.map(function(e){return Kl(e,t)}),r=new Tn(n);return new Dn(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Tl),Bl=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e)))._a=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=Fl(this,e,!0),n=this._a.map(function(e){return Kl(e,t)}),r=new _n(n);return new Dn(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Tl),Ul=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).wa=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_toFieldTransform",value:function(e){var t=new In(e.yt,bn(e.yt,this.wa));return new Dn(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),t}(Tl);function Vl(e,t,n,r){var i=e.da(1,t,n);Hl("Data must be an object, but it was:",i,r);var a=[],o=Vt.empty();De(r,function(e,r){var u=Xl(t,e,n);r=Object(g.l)(r);var s=i.ca(u);if(r instanceof Pl)a.push(u);else{var c=Kl(r,s);null!=c&&(a.push(u),o.set(u,c))}});var u=new Ut(a);return new Il(o,u,i.fieldTransforms)}function ql(e,t,n,r,i,a){var o=e.da(1,t,n),u=[Ql(t,r,n)],s=[i];if(a.length%2!=0)throw new P(R.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Ql(t,a[c])),s.push(a[c+1]);for(var l=[],f=Vt.empty(),h=u.length-1;h>=0;--h)if(!Jl(l,u[h])){var d=u[h],p=s[h];p=Object(g.l)(p);var v=o.ca(d);if(p instanceof Pl)l.push(d);else{var y=Kl(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Ut(l);return new Il(f,m,o.fieldTransforms)}function zl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Kl(n,e.da(r?4:3,t))}function Kl(e,t){if(Wl(e=Object(g.l)(e)))return Hl("Unsupported field value:",t,e),Gl(e,t);if(e instanceof Tl)return function(e,t){if(!jl(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n=[],r=0,i=!0,a=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=Kl(u.value,t.aa(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(g.l)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bn(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=X.fromDate(e);return{timestampValue:_r(t.yt,n)}}if(e instanceof X){var r=new X(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_r(t.yt,r)}}if(e instanceof Cl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ol)return{bytesValue:Sr(t.yt,e._byteString)};if(e instanceof Ic){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Ar(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(xc(e)))}(e,t)}function Gl(e,t){var n={};return Ne(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):De(e,function(e,r){var i=Kl(r,t.ra(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Wl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof X||e instanceof Cl||e instanceof Ol||e instanceof Ic||e instanceof Tl)}function Hl(e,t,n){if(!Wl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=xc(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function Ql(e,t,n){if((t=Object(g.l)(t))instanceof El)return t._internalPath;if("string"==typeof t)return Xl(e,t);throw $l("Field path arguments must be of type string or ",e,!1,void 0,n)}var Yl=new RegExp("[~\\*/\\[\\]]");function Xl(e,t,n){if(t.search(Yl)>=0)throw $l("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Object(r.a)(El,Object(h.a)(t.split(".")))._internalPath}catch(i){throw $l("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $l(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new P(R.INVALID_ARGUMENT,u+e+s)}function Jl(e,t){return e.some(function(e){return e.isEqual(t)})}var Zl=function(){function e(t,n,r,i,a){Object(d.a)(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Object(p.a)(e,[{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ef(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(tf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ic(this._firestore,this._converter,this._key)}}]),e}(),ef=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"data",value:function(){return Object(i.a)(Object(l.a)(t.prototype),"data",this).call(this)}}]),t}(Zl);function tf(e,t){return"string"==typeof t?Xl(e,t):t instanceof El?t._internalPath:t._delegate._internalPath}function nf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rf=function e(){Object(d.a)(this,e)},af=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),t}(rf);function of(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof rf&&n.push(t),function(e){var t=e.filter(function(e){return e instanceof cf}).length,n=e.filter(function(e){return e instanceof uf}).length;if(t>1||t>0&&n>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o=!0,u=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){e=c.value._apply(e)}}catch(f){u=!0,s=f}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return e}var uf=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this)))._field=e,i._op=n,i._value=r,i.type="where",i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=this._parse(e);return Ef(e._query,t),new jc(e.firestore,e.converter,sn(e._query,t))}},{key:"_parse",value:function(e){var t=Nl(e.firestore);return function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new P(R.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Of(o,a);var s=[],c=!0,l=!1,f=void 0;try{for(var h,d=o[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;s.push(xf(r,e,p))}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}u={arrayValue:{values:s}}}else u=xf(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Of(o,a),u=zl(n,"where",o,"in"===a||"not-in"===a);return vt.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}]),t}(af);function sf(e,t,n){var r=t,i=tf("where",e);return uf._create(i,r,n)}var cf=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,r._queryConstraints=n,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_parse",value:function(e){var t=this._queryConstraints.map(function(t){return t._parse(e)}).filter(function(e){return e.getFilters().length>0});return 1===t.length?t[0]:yt.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n=e,r=t.getFlattenedFilters(),i=!0,a=!1,o=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;Ef(n,c),n=sn(n,c)}}catch(l){a=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}}(e._query,t),new jc(e.firestore,e.converter,sn(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,n){return new t(e,n)}}]),t}(rf);var lf=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this)))._field=e,r._direction=n,r.type="orderBy",r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Dt(t,n);return function(e,t){if(null===nn(e)){var n=rn(e);null!==n&&Tf(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new jc(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Jt(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,n){return new t(e,n)}}]),t}(af);function ff(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=tf("orderBy",e);return lf._create(n,t)}var hf=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i._limit=n,i._limitType=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){return new jc(e.firestore,e.converter,cn(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}]),t}(af);function df(e){return Ec("limit",e),hf._create("limit",e,"F")}function pf(e){return Ec("limitToLast",e),hf._create("limitToLast",e,"L")}var vf=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i._docOrFields=n,i._inclusive=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=wf(e,this.type,this._docOrFields,this._inclusive);return new jc(e.firestore,e.converter,function(e,t){return new Jt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}]),t}(af);function yf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vf._create("startAt",t,!0)}function mf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vf._create("startAfter",t,!1)}var gf=function(e){function t(e,n,r){var i;return Object(d.a)(this,t),(i=Object(c.a)(this,Object(l.a)(t).call(this))).type=e,i._docOrFields=n,i._inclusive=r,i}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_apply",value:function(e){var t=wf(e,this.type,this._docOrFields,this._inclusive);return new jc(e.firestore,e.converter,function(e,t){return new Jt(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,n,r){return new t(e,n,r)}}]),t}(af);function bf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gf._create("endBefore",t,!1)}function kf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gf._create("endAt",t,!0)}function wf(e,t,n,r){if(n[0]=Object(g.l)(n[0]),n[0]instanceof Zl)return function(e,t,n,r,i){if(!r)throw new P(R.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a=[],o=!0,u=!1,s=void 0;try{for(var c,l=on(e)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;if(f.field.isKeyField())a.push(Ze(t,r.key));else{var h=r.data.field(f.field);if(ze(h))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var d=f.field.canonicalString();throw new P(R.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(d,"' (used as the orderBy) does not exist."))}a.push(h)}}}catch(p){u=!0,s=p}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return new ft(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Nl(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new P(R.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new P(R.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!an(e)&&-1!==c.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Z.fromString(c));if(!ne.isDocumentKey(l))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ne(l);u.push(Ze(t,f))}else{var h=zl(n,r,c);u.push(h)}}return new ft(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xf(e,t,n){if("string"==typeof(n=Object(g.l)(n))){if(""===n)throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!an(t)&&-1!==n.indexOf("/"))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Z.fromString(n));if(!ne.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ze(e,new ne(r))}if(n instanceof Ic)return Ze(e,n._key);throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xc(n),"."))}function Of(e,t){if(!Array.isArray(e)||0===e.length)throw new P(R.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new P(R.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Ef(e,t){if(t.isInequality()){var n=rn(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new P(R.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=nn(e);null!==i&&Tf(e,r,i)}var a=function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value,s=!0,c=!1,l=void 0;try{for(var f,h=u.getFlattenedFilters()[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;if(t.indexOf(d.op)>=0)return d.op}}catch(p){c=!0,l=p}finally{try{s||null==h.return||h.return()}finally{if(c)throw l}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}(e.filters,function(e){switch(t.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==a)throw a===t.op?new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new P(R.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Tf(e,t,n){if(!n.isEqual(t))throw new P(R.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Cf=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(He(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qe(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw j()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return De(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Cl(Ve(e.latitude),Ve(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=function e(t){var n=t.mapValue.fields.__previous_value__;return ze(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ke(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ue(e);return new X(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Z.fromString(e);A(Zr(n));var r=new je(n.get(1),n.get(3)),i=new ne(n.popFirst(5));return r.isEqual(t)||_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _f(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Sf=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).firestore=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"convertBytes",value:function(e){return new Ol(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ic(this.firestore,null,t)}}]),t}(Cf),If=function(){function e(t,n){Object(d.a)(this,e),this.hasPendingWrites=t,this.fromCache=n}return Object(p.a)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),jf=function(e){function t(e,n,r,i,a,o){var u;return Object(d.a)(this,t),(u=Object(c.a)(this,Object(l.a)(t).call(this,e,n,r,i,o)))._firestore=e,u._firestoreImpl=e,u.metadata=a,u}return Object(f.a)(t,e),Object(p.a)(t,[{key:"exists",value:function(){return Object(i.a)(Object(l.a)(t.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(tf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),t}(Zl),Af=function(e){function t(){return Object(d.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(l.a)(t.prototype),"data",this).call(this,e)}}]),t}(jf),Df=function(){function e(t,n,r,i){Object(d.a)(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new If(i.hasPendingWrites,i.fromCache),this.query=r}return Object(p.a)(e,[{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new Af(n._firestore,n._userDataWriter,r.key,r,new If(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){var r=new Af(e._firestore,e._userDataWriter,t.doc.key,t.doc,new If(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new Af(e._firestore,e._userDataWriter,t.doc.key,t.doc,new If(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Nf(t.type),doc:n,oldIndex:i,newIndex:a}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}},{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}}]),e}();function Nf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function Rf(e,t){return e instanceof jf&&t instanceof jf?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Df&&t instanceof Df&&e._firestore===t._firestore&&Fc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Pf(e){e=Oc(e,Ic);var t=Oc(e.firestore,ll);return il(fl(t),e._key).then(function(n){return Yf(t,e,n)})}var Ff=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this))).firestore=e,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"convertBytes",value:function(e){return new Ol(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ic(this.firestore,null,t)}}]),t}(Cf);function Lf(e){e=Oc(e,Ic);var t=Oc(e.firestore,ll),n=fl(t),r=new Ff(t);return function(e,t){var n=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=N(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.localDocuments.getDocument(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=es(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Jc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new jf(t,r,e._key,n,new If(null!==n&&n.hasLocalMutations,!0),e.converter)})}function Mf(e){e=Oc(e,Ic);var t=Oc(e.firestore,ll);return il(fl(t),e._key,{source:"server"}).then(function(n){return Yf(t,e,n)})}function Bf(e){e=Oc(e,jc);var t=Oc(e.firestore,ll),n=fl(t),r=new Ff(t);return nf(e._query),al(n,e._query).then(function(n){return new Df(t,r,e,n)})}function Uf(e){e=Oc(e,jc);var t=Oc(e.firestore,ll),n=fl(t),r=new Ff(t);return function(e,t){var n=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Object(s.a)(u.a.mark(function e(t,n,r){var i,a,o,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,No(t,n,!0);case 3:i=e.sent,a=new gs(n,i.Hi),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=es(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Jc(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new Df(t,r,e,n)})}function Vf(e){e=Oc(e,jc);var t=Oc(e.firestore,ll),n=fl(t),r=new Ff(t);return al(n,e._query,{source:"server"}).then(function(n){return new Df(t,r,e,n)})}function qf(e,t,n){e=Oc(e,Ic);var r=Oc(e.firestore,ll),i=_f(e.converter,t,n);return Qf(r,[Rl(Nl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rn.none())])}function zf(e,t,n){e=Oc(e,Ic);for(var r=Oc(e.firestore,ll),i=Nl(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Qf(r,[("string"==typeof(t=Object(g.l)(t))||t instanceof El?ql(i,"updateDoc",e._key,t,n,o):Vl(i,"updateDoc",e._key,t)).toMutation(e._key,Rn.exists(!0))])}function Kf(e){return Qf(Oc(e.firestore,ll),[new Yn(e._key,Rn.none())])}function Gf(e,t){var n=Oc(e.firestore,ll),r=Rc(e),i=_f(e.converter,t);return Qf(n,[Rl(Nl(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(function(){return r})}function Wf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Object(g.l)(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||ul(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(ul(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof Ic)h=Oc(e.firestore,ll),d=en(e._key.path),f={next:function(t){n[l]&&n[l](Yf(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=Oc(e,jc);h=Oc(y.firestore,ll),d=y._query;var m=new Ff(h);f={next:function(e){n[l]&&n[l](new Df(h,m,y,e))},error:n[l+1],complete:n[l+2]},nf(e._query)}return function(e,t,n,r){var i=new Mc(f),a=new fs(t,i,n);return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=os,t.next=3,nl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ss,t.next=3,nl(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(fl(h),d,p)}function Hf(e,t){return function(e,t){var n=new Mc(t);return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){N(e).Ru.add(t),t.next()},t.next=3,nl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){N(e).Ru.delete(t)},t.next=3,nl(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(fl(e=Oc(e,ll)),ul(t)?t:{next:t})}function Qf(e,t){return function(e,t){var n=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function r(){return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ss,r.next=3,el(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(fl(e),t)}function Yf(e,t,n){var r=n.docs.get(t._key),i=new Ff(e);return new jf(e,i,t._key,r,new If(n.hasPendingWrites,n.fromCache),t.converter)}var Xf={maxAttempts:5},$f=function(){function e(t,n){Object(d.a)(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nl(t)}return Object(p.a)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Jf(e,this._firestore),i=_f(r.converter,t,n),a=Rl(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Rn.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Jf(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(g.l)(t))||t instanceof El?ql(this._dataReader,"WriteBatch.update",i._key,t,n,o):Vl(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Rn.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Jf(e,this._firestore);return this._mutations=this._mutations.concat(new Yn(t._key,Rn.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Jf(e,t){if((e=Object(g.l)(e)).firestore!==t)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Zf=function(e){function t(e,n){var r;return Object(d.a)(this,t),(r=Object(c.a)(this,Object(l.a)(t).call(this,e,n)))._firestore=e,r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"get",value:function(e){var n=this,r=Jf(e,this._firestore),a=new Ff(this._firestore);return Object(i.a)(Object(l.a)(t.prototype),"get",this).call(this,e).then(function(e){return new jf(n._firestore,a,r._key,e._document,new If(!1,!1),r.converter)})}}]),t}(function(){function e(t,n){Object(d.a)(this,e),this._firestore=t,this._transaction=n,this._dataReader=Nl(t)}return Object(p.a)(e,[{key:"get",value:function(e){var t=this,n=Jf(e,this._firestore),r=new Sf(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return j();var i=e[0];if(i.isFoundDocument())return new Zl(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Zl(t._firestore,r,n._key,null,n.converter);throw j()})}},{key:"set",value:function(e,t,n){var r=Jf(e,this._firestore),i=_f(r.converter,t,n),a=Rl(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Jf(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Object(g.l)(t))||t instanceof El?ql(this._dataReader,"Transaction.update",i._key,t,n,o):Vl(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Jf(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function eh(e,t,n){e=Oc(e,ll);var r=Object.assign(Object.assign({},Xf),n);return function(e){if(r.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(),function(e,t,n){var r=new F;return e.asyncQueue.enqueueAndForget(Object(s.a)(u.a.mark(function i(){var a;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,tl(e);case 2:a=i.sent,new Vc(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}},i)}))),r.promise}(fl(e),function(n){return t(new Zf(e,n))},r)}function th(){return new Pl("deleteField")}function nh(){return new Ll("serverTimestamp")}function rh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ml("arrayUnion",t)}function ih(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bl("arrayRemove",t)}function ah(e){return new Ul("increment",e)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){x=e}(v.SDK_VERSION),Object(v._registerComponent)(new y.a("firestore",function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ll(new U(e.getProvider("auth-internal")),new K(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new je(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Object(v.registerVersion)(k,"3.8.0",void 0),Object(v.registerVersion)(k,"3.8.0","esm2017")}()}).call(this,n(24))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(21);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var a=n(25);function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(a.a)(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return T}),n.d(t,"b",function(){return I}),n.d(t,"c",function(){return S}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return A}),n.d(t,"f",function(){return C}),n.d(t,"g",function(){return R}),n.d(t,"h",function(){return D}),n.d(t,"i",function(){return v}),n.d(t,"j",function(){return E}),n.d(t,"k",function(){return O}),n.d(t,"l",function(){return L}),n.d(t,"m",function(){return y}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return b}),n.d(t,"p",function(){return g}),n.d(t,"q",function(){return k});n(11);var i=n(8),a=n(6),o=n(25),u=n(7),s=n(52),c=n(1),l=n(2),f=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(f(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},d=function(e){return function(e){var t=f(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function v(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=v(e[n],t[n]));return e}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return"object"===typeof self&&self.self===self}function g(){return!function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})}var w=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},x=function(){try{return w()||function(){if("undefined"!==typeof r){var e=Object({NODE_ENV:"production",PUBLIC_URL:""}).__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&p(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},O=function(e){var t=function(e){var t,n;return null===(n=null===(t=x())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},E=function(){var e;return null===(e=x())||void 0===e?void 0:e.config},T=function(){function e(){var t=this;Object(c.a)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return Object(l.a)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function C(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(a)),""].join(".")}var _="FirebaseError",S=function(e){function t(e,n,r){var u;return Object(c.a)(this,t),(u=Object(i.a)(this,Object(a.a)(t).call(this,n))).code=e,u.customData=r,u.name=_,Object.setPrototypeOf(Object(o.a)(u),t.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(o.a)(u),I.prototype.create),u}return Object(u.a)(t,e),t}(Object(s.a)(Error)),I=function(){function e(t,n,r){Object(c.a)(this,e),this.service=t,this.serviceName=n,this.errors=r}return Object(l.a)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(j,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new S(n,a,t)}}]),e}();var j=/\{\$([^}]+)}/g;function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(N(u)&&N(s)){if(!D(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function N(e){return null!==e&&"object"===typeof e}function R(e,t){var n=new P(e,t);return n.subscribe.bind(n)}var P=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return Object(l.a)(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;if(u in e&&"function"===typeof e[u])return!0}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function F(){}function L(e){return e&&e._delegate?e._delegate:e}}).call(this,n(23),n(24))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t);var r=n(13),i=n(0),a=n.n(i),o=n(4),u=n(10),s=n(1),c=n(2),l=n(17),f=n(16),h=n(9);var d,p,v=function(e,t){return t.some(function(t){return e instanceof t})};var y=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,k=new WeakMap;var w={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return m.get(e);if("objectStoreNames"===t)return e.objectStoreNames||g.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return E(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function x(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(p||(p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(T(this),n),E(y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(e.apply(T(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[T(this),t].concat(r));return g.set(a,t.sort?t.sort():[t]),E(a)}}function O(e){return"function"===typeof e?x(e):(e instanceof IDBTransaction&&function(e){if(!m.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});m.set(e,t)}}(e),v(e,d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,w):e)}function E(e){if(e instanceof IDBRequest)return function(e){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(E(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(function(t){t instanceof IDBCursor&&y.set(t,e)}).catch(function(){}),k.set(t,e),t}(e);if(b.has(e))return b.get(e);var t=O(e);return t!==e&&(b.set(e,t),k.set(t,e)),t}var T=function(e){return k.get(e)};var C,_,S=["get","getKey","getAll","getAllKeys","count"],I=["put","add","delete","clear"],j=new Map;function A(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(j.get(t))return j.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=I.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||S.includes(n))){var u=function(){var e=Object(o.a)(a.a.mark(function e(t){var o,u,s,c,l,f,h=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return j.set(t,u),u}}}w=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Object(u.a)(e,t,n[t])})}return e}({},e,{get:function(t,n,r){return A(t,n)||e.get(t,n,r)},has:function(t,n){return!!A(t,n)||e.has(t,n)}})}(w),n.d(t,"SDK_VERSION",function(){return Y}),n.d(t,"_DEFAULT_ENTRY_NAME",function(){return F}),n.d(t,"_addComponent",function(){return U}),n.d(t,"_addOrOverwriteComponent",function(){return V}),n.d(t,"_apps",function(){return M}),n.d(t,"_clearComponents",function(){return G}),n.d(t,"_components",function(){return B}),n.d(t,"_getProvider",function(){return z}),n.d(t,"_registerComponent",function(){return q}),n.d(t,"_removeServiceInstance",function(){return K}),n.d(t,"deleteApp",function(){return Z}),n.d(t,"getApp",function(){return $}),n.d(t,"getApps",function(){return J}),n.d(t,"initializeApp",function(){return X}),n.d(t,"onLog",function(){return ne}),n.d(t,"registerVersion",function(){return te}),n.d(t,"setLogLevel",function(){return re}),n.d(t,"FirebaseError",function(){return h.c});var D=function(){function e(t){Object(s.a)(this,e),this.container=t}return Object(c.a)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(function(e){return e}).join(" ")}}]),e}();var N="@firebase/app",R="0.9.0",P=new f.b("@firebase/app"),F="[DEFAULT]",L=(C={},Object(u.a)(C,N,"fire-core"),Object(u.a)(C,"@firebase/app-compat","fire-core-compat"),Object(u.a)(C,"@firebase/analytics","fire-analytics"),Object(u.a)(C,"@firebase/analytics-compat","fire-analytics-compat"),Object(u.a)(C,"@firebase/app-check","fire-app-check"),Object(u.a)(C,"@firebase/app-check-compat","fire-app-check-compat"),Object(u.a)(C,"@firebase/auth","fire-auth"),Object(u.a)(C,"@firebase/auth-compat","fire-auth-compat"),Object(u.a)(C,"@firebase/database","fire-rtdb"),Object(u.a)(C,"@firebase/database-compat","fire-rtdb-compat"),Object(u.a)(C,"@firebase/functions","fire-fn"),Object(u.a)(C,"@firebase/functions-compat","fire-fn-compat"),Object(u.a)(C,"@firebase/installations","fire-iid"),Object(u.a)(C,"@firebase/installations-compat","fire-iid-compat"),Object(u.a)(C,"@firebase/messaging","fire-fcm"),Object(u.a)(C,"@firebase/messaging-compat","fire-fcm-compat"),Object(u.a)(C,"@firebase/performance","fire-perf"),Object(u.a)(C,"@firebase/performance-compat","fire-perf-compat"),Object(u.a)(C,"@firebase/remote-config","fire-rc"),Object(u.a)(C,"@firebase/remote-config-compat","fire-rc-compat"),Object(u.a)(C,"@firebase/storage","fire-gcs"),Object(u.a)(C,"@firebase/storage-compat","fire-gcs-compat"),Object(u.a)(C,"@firebase/firestore","fire-fst"),Object(u.a)(C,"@firebase/firestore-compat","fire-fst-compat"),Object(u.a)(C,"fire-js","fire-js"),Object(u.a)(C,"firebase","fire-js-all"),C),M=new Map,B=new Map;function U(e,t){try{e.container.addComponent(t)}catch(n){P.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function V(e,t){e.container.addOrOverwriteComponent(t)}function q(e){var t=e.name;if(B.has(t))return P.debug("There were multiple attempts to register component ".concat(t,".")),!1;B.set(t,e);var n=!0,r=!1,i=void 0;try{for(var a,o=M.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){U(a.value,e)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}function z(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;z(e,t).clearInstance(n)}function G(){B.clear()}var W=(_={},Object(u.a)(_,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(u.a)(_,"bad-app-name","Illegal App name: '{$appName}"),Object(u.a)(_,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(u.a)(_,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(u.a)(_,"no-options","Need to provide options, when not being deployed to hosting via source."),Object(u.a)(_,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(u.a)(_,"invalid-log-argument","First argument to `onLog` must be null or a function."),Object(u.a)(_,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Object(u.a)(_,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Object(u.a)(_,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Object(u.a)(_,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_),H=new h.b("app","Firebase",W),Q=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new l.a("app",function(){return i},"PUBLIC"))}return Object(c.a)(e,[{key:"checkDestroyed",value:function(){if(this.isDeleted)throw H.create("app-deleted",{appName:this._name})}},{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}}]),e}(),Y="9.15.0";function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:F,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw H.create("bad-app-name",{appName:String(i)});if(n||(n=Object(h.j)()),!n)throw H.create("no-options");var a=M.get(i);if(a){if(Object(h.h)(n,a.options)&&Object(h.h)(r,a.config))return a;throw H.create("duplicate-app",{appName:i})}var o=new l.b(i),u=!0,s=!1,c=void 0;try{for(var f,d=B.values()[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;o.addComponent(p)}}catch(y){s=!0,c=y}finally{try{u||null==d.return||d.return()}finally{if(s)throw c}}var v=new Q(n,r,o);return M.set(i,v),v}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=M.get(e);if(!t&&e===F)return X();if(!t)throw H.create("no-app",{appName:e});return t}function J(){return Array.from(M.values())}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!M.has(n)){e.next=6;break}return M.delete(n),e.next=5,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t,n){var r,i=null!==(r=L[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void P.warn(u.join(" "))}q(new l.a("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function ne(e,t){if(null!==e&&"function"!==typeof e)throw H.create("invalid-log-argument");Object(f.d)(e,t)}function re(e){Object(f.c)(e)}var ie="firebase-heartbeat-database",ae=1,oe="firebase-heartbeat-store",ue=null;function se(){return ue||(ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=E(u);return i&&u.addEventListener("upgradeneeded",function(e){i(E(u.result),e.oldVersion,e.newVersion,E(u.transaction))}),r&&u.addEventListener("blocked",function(){return r()}),s.then(function(e){o&&e.addEventListener("close",function(){return o()}),a&&e.addEventListener("versionchange",function(){return a()})}).catch(function(){}),s}(ie,ae,{upgrade:function(e,t){switch(t){case 0:e.createObjectStore(oe)}}}).catch(function(e){throw H.create("idb-open",{originalErrorMessage:e.message})})),ue}function ce(e){return le.apply(this,arguments)}function le(){return(le=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se();case 3:return n=e.sent,e.abrupt("return",n.transaction(oe).objectStore(oe).get(de(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof h.c?P.warn(e.t0.message):(r=H.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),P.warn(r.message));case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function fe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(o.a)(a.a.mark(function e(t,n){var r,i,o,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se();case 3:return r=e.sent,i=r.transaction(oe,"readwrite"),o=i.objectStore(oe),e.next=8,o.put(n,de(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof h.c?P.warn(e.t0.message):(u=H.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),P.warn(u.message));case 14:case"end":return e.stop()}},e,null,[[0,11]])}))).apply(this,arguments)}function de(e){return"".concat(e.name,"!").concat(e.options.appId)}var pe=1024,ve=function(){function e(t){var n=this;Object(s.a)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new be(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return n._heartbeatsCache=e,e})}return Object(c.a)(e,[{key:"triggerHeartbeat",value:function(){var e=Object(o.a)(a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ye(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(function(e){return e.date===r})){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Object(o.a)(a.a.mark(function e(){var t,n,r,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ye(),n=me(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=Object(h.d)(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();function ye(){return(new Date).toISOString().substring(0,10)}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe,n=[],r=e.slice(),i=!0,a=!1,o=void 0;try{for(var u,s=function(){var e=u.value,i=n.find(function(t){return t.agent===e.agent});if(i){if(i.dates.push(e.date),ke(n)>t)return i.dates.pop(),"break"}else if(n.push({agent:e.agent,dates:[e.date]}),ke(n)>t)return n.pop(),"break";r=r.slice(1)},c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){if("break"===s())break}}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return{heartbeatsToSend:n,unsentEntries:r}}var ge,be=function(){function e(t){Object(s.a)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Object(c.a)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(h.o)()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Object(h.q)().then(function(){return!0}).catch(function(){return!1}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ce(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",fe(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(o.a)(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",fe(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat(Object(r.a)(i.heartbeats),Object(r.a)(t.heartbeats))}));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function ke(e){return Object(h.d)(JSON.stringify({version:2,heartbeats:e})).length}ge="",q(new l.a("platform-logger",function(e){return new D(e)},"PRIVATE")),q(new l.a("heartbeat",function(e){return new ve(e)},"PRIVATE")),te(N,R,ge),te(N,R,"esm2017"),te("fire-js","")},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ar}),n.d(t,"b",function(){return ur}),n.d(t,"c",function(){return or}),n.d(t,"d",function(){return cr}),n.d(t,"e",function(){return sr}),n.d(t,"f",function(){return lr}),n.d(t,"g",function(){return fr}),n.d(t,"h",function(){return rr}),n.d(t,"i",function(){return ir});var r,i=n(11),a=n(8),o=n(6),u=n(18),s=n(7),c=n(1),l=n(2),f="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},h={},d=d||{},p=f||self;function v(){}function y(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),b=0;function k(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:w).apply(null,arguments)}function O(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function T(){this.s=this.s,this.o=this.o}T.prototype.s=!1,T.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++b))},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var C=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(y(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{p.addEventListener("test",v,t),p.removeEventListener("test",v,t)}catch(n){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}var D=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function N(e,t){return e<t?-1:e>t?1:0}function R(){var e=p.navigator;return e&&(e=e.userAgent)?e:""}function P(e){return-1!=R().indexOf(e)}function F(e){return F[" "](e),e}F[" "]=v;var L,M=P("Opera"),B=P("Trident")||P("MSIE"),U=P("Edge"),V=U||B,q=P("Gecko")&&!(-1!=R().toLowerCase().indexOf("webkit")&&!P("Edge"))&&!(P("Trident")||P("MSIE"))&&!P("Edge"),z=-1!=R().toLowerCase().indexOf("webkit")&&!P("Edge");function K(){var e=p.document;return e?e.documentMode:void 0}e:{var G="",W=function(){var e=R();return q?/rv:([^\);]+)(\)|;)/.exec(e):U?/Edge\/([\d\.]+)/.exec(e):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):z?/WebKit\/(\S+)/.exec(e):M?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(W&&(G=W?W[1]:""),B){var H=K();if(null!=H&&H>parseFloat(G)){L=String(H);break e}}L=G}var Q,Y={};function X(){return function(e){var t=Y;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}(function(){for(var e=0,t=D(String(L)).split("."),n=D("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=N(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||N(0==a[2].length,0==o[2].length)||N(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e})}if(p.document&&B){var $=K();Q=$||(parseInt(L,10)||void 0)}else Q=void 0;var J=Q;function Z(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(q){e:{try{F(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ee[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Z.X.h.call(this)}}E(Z,I);var ee={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ne=0;function re(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ne,this.ba=this.ea=!1}function ie(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ae(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function oe(e){var t={};for(var n in e)t[n]=e[n];return t}var ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ue.length;a++)n=ue[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ce(e){this.src=e,this.g={},this.h=0}function le(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=C(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ie(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}ce.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=fe(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new re(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var he="closure_lm_"+(1e6*Math.random()|0),de={};function pe(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,a){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);return null}r=we(r);return t&&t[te]?t.O(n,r,m(i)?!!i.capture:!!i,a):ve(t,n,r,!0,i,a)}(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)pe(e,t[a],n,r,i);return null}return n=we(n),e&&e[te]?e.N(t,n,m(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,u=be(e);if(u||(e[he]=u=new ce(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=ge;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(me(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[te])le(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(me(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=be(t))?(le(n,e),0==n.h&&(n.src=null,t[he]=null)):ie(e)}}}function me(e){return e in de?de[e]:de[e]="on"+e}function ge(e,t){if(e.ba)e=!0;else{t=new Z(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ye(e),e=n.call(r,t)}return e}function be(e){return(e=e[he])instanceof ce?e:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(e){return"function"===typeof e?e:(e[ke]||(e[ke]=function(t){return e.handleEvent(t)}),e[ke])}function xe(){T.call(this),this.i=new ce(this),this.P=this,this.I=null}function Oe(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;se(t=new I(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ee(o,r,!0,t)&&i}if(i=Ee(o=t.g=e,r,!0,t)&&i,i=Ee(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ee(o=t.g=n[a],r,!1,t)&&i}function Ee(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&le(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}E(xe,T),xe.prototype[te]=!0,xe.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,a){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,a);else i=m(i)?!!i.capture:!!i,r=we(r),t&&t[te]?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=fe(o=t.g[n],r,i,a))&&(ie(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--))):t&&(t=be(t))&&(n=t.g[n.toString()],t=-1,n&&(t=fe(n,r,i,a)),(r=-1<t?n[t]:null)&&ye(r))}(this,e,t,n,r)},xe.prototype.M=function(){if(xe.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ie(n[r]);delete t.g[e],t.h--}}this.I=null},xe.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xe.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Te=p.JSON.stringify;function Ce(){var e=Re,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _e,Se=function(){function e(){Object(c.a)(this,e),this.h=this.g=null}return Object(l.a)(e,[{key:"add",value:function(e,t){var n=Ie.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ie=new(function(){function e(t,n){Object(c.a)(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Object(l.a)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new je},function(e){return e.reset()}),je=function(){function e(){Object(c.a)(this,e),this.next=this.g=this.h=null}return Object(l.a)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ae(e){p.setTimeout(function(){throw e},0)}function De(e,t){_e||function(){var e=p.Promise.resolve(void 0);_e=function(){e.then(Pe)}}(),Ne||(_e(),Ne=!0),Re.add(e,t)}var Ne=!1,Re=new Se;function Pe(){for(var e;e=Ce();){try{e.h.call(e.g)}catch(n){Ae(n)}var t=Ie;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ne=!1}function Fe(e,t){xe.call(this),this.h=e||1,this.g=t||p,this.j=x(this.lb,this),this.l=Date.now()}function Le(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Me(e,t,n){if("function"===typeof e)n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:p.setTimeout(e,t||0)}E(Fe,xe),(r=Fe.prototype).ca=!1,r.R=null,r.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Oe(this,"tick"),this.ca&&(Le(this),this.start()))}},r.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Fe.X.M.call(this),Le(this),delete this.g};var Be=function(e){function t(e,n){var r;return Object(c.a)(this,t),(r=Object(a.a)(this,Object(o.a)(t).call(this))).m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return Object(s.a)(t,e),Object(l.a)(t,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=Me(function(){t.g=null,t.i&&(t.i=!1,e(t))},t.j);var n=t.h;t.h=null,t.m.apply(null,n)}(this)}},{key:"M",value:function(){Object(u.a)(Object(o.a)(t.prototype),"M",this).call(this),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),t}(T);function Ue(e){T.call(this),this.h=e,this.g={}}E(Ue,T);var Ve=[];function qe(e,t,n,r){Array.isArray(n)||(n&&(Ve[0]=n.toString()),n=Ve);for(var i=0;i<n.length;i++){var a=pe(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ze(e){ae(e.g,function(e,t){this.g.hasOwnProperty(t)&&ye(e)},e),e.g={}}function Ke(){this.g=!0}function Ge(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Te(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}Ue.prototype.M=function(){Ue.X.M.call(this),ze(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ke.prototype.Aa=function(){this.g=!1},Ke.prototype.info=function(){};var We={},He=null;function Qe(){return He=He||new xe}function Ye(e){I.call(this,We.Pa,e)}function Xe(e){var t=Qe();Oe(t,new Ye(t))}function $e(e,t){I.call(this,We.STAT_EVENT,e),this.stat=t}function Je(e){var t=Qe();Oe(t,new $e(t,e))}function Ze(e,t){I.call(this,We.Qa,e),this.size=t}function et(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){e()},t)}We.Pa="serverreachability",E(Ye,I),We.STAT_EVENT="statevent",E($e,I),We.Qa="timingevent",E(Ze,I);var tt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},nt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function rt(){}function it(e){return e.h||(e.h=e.i())}function at(){}rt.prototype.h=null;var ot,ut={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function st(){I.call(this,"d")}function ct(){I.call(this,"c")}function lt(){}function ft(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Ue(this),this.O=dt,e=V?125:void 0,this.T=new Fe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}E(st,I),E(ct,I),E(lt,rt),lt.prototype.g=function(){return new XMLHttpRequest},lt.prototype.i=function(){return{}},ot=new lt;var dt=45e3,pt={},vt={};function yt(e,t,n){e.K=1,e.v=Pt(jt(t)),e.s=n,e.P=!0,mt(e,null)}function mt(e,t){e.F=Date.now(),wt(e),e.A=jt(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Qt(n.i,"t",r),e.C=0,n=e.l.H,e.h=new ht,e.g=Xn(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Be(x(e.La,e,e.g),e.N)),qe(e.S,e.g,"readystatechange",e.ib),t=e.H?oe(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Xe(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.U,e.s)}function gt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function bt(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=kt(e,n))==vt){4==t&&(e.o=4,Je(14),i=!1),Ge(e.j,e.m,null,"[Incomplete Response]");break}if(r==pt){e.o=4,Je(15),Ge(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ge(e.j,e.m,r,null),Ct(e,r)}gt(e)&&r!=vt&&r!=pt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Je(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),qn(t),t.K=!0,Je(11))):(Ge(e.j,e.m,n,"[Invalid Chunked Response]"),Tt(e),Et(e))}function kt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1)+n>t.length?vt:(t=t.substr(r,n),e.C=r+n,t))}function wt(e){e.V=Date.now()+e.O,xt(e,e.O)}function xt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=et(x(e.gb,e),t)}function Ot(e){e.B&&(p.clearTimeout(e.B),e.B=null)}function Et(e){0==e.l.G||e.I||Gn(e.l,e)}function Tt(e){Ot(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Le(e.T),ze(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ct(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||nn(n.h,e)))if(!e.J&&nn(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Kn(n),Rn(n)}Vn(n),Je(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=et(x(n.cb,n),6e3));if(1>=tn(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Hn(n,11)}else if((e.J||n.g==e)&&Kn(n),!A(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(rn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Rt(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Yn(r,r.H?r.ka:null,r.V),d.J){an(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Ot(p),wt(p)),r.g=d}else Un(r);0<n.i.length&&Fn(n)}else"stop"!=a[0]&&"close"!=a[0]||Hn(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Hn(n,7):Nn(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Xe()}catch(a){}}function _t(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(y(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(y(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(y(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.ib=function(e){e=e.target;var t=this.L;t&&3==_n(e)?t.l():this.La(e)},r.La=function(e){try{if(e==this.g)e:{var t=_n(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||V||this.g&&(this.h.h||this.g.fa()||Sn(this.g)))){this.I||4!=t||7==n||Xe(),Ot(this);var r=this.g.aa();this.Y=r;t:if(gt(this)){var i=Sn(this.g);e="";var a=i.length,o=4==_n(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Tt(this),Et(this);var u="";break t}this.h.i=new p.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o})}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Je(12),Tt(this),Et(this);break e}Ge(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ct(this,r)}this.P?(bt(this,t,u),V&&this.i&&3==t&&(qe(this.S,this.T,"tick",this.hb),this.T.start())):(Ge(this.j,this.m,u,null),Ct(this,u)),4==t&&Tt(this),this.i&&!this.I&&(4==t?Gn(this.l,this):(this.i=!1,wt(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Je(12)):(this.o=0,Je(13)),Tt(this),Et(this)}}}catch(t){}},r.hb=function(){if(this.g){var e=_n(this.g),t=this.g.fa();this.C<t.length&&(Ot(this),bt(this,e,t),this.i&&4!=e&&wt(this))}},r.cancel=function(){this.I=!0,Tt(this)},r.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Xe(),Je(17)),Tt(this),this.o=2,Et(this)):xt(this,this.V-e)};var St=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function It(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof It){this.h=void 0!==t?t:e.h,At(this,e.j),this.s=e.s,this.g=e.g,Dt(this,e.m),this.l=e.l,t=e.i;var n=new Kt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Nt(this,n),this.o=e.o}else e&&(n=String(e).match(St))?(this.h=!!t,At(this,n[1]||"",!0),this.s=Ft(n[2]||""),this.g=Ft(n[3]||"",!0),Dt(this,n[4]),this.l=Ft(n[5]||"",!0),Nt(this,n[6]||"",!0),this.o=Ft(n[7]||"")):(this.h=!!t,this.i=new Kt(null,this.h))}function jt(e){return new It(e)}function At(e,t,n){e.j=n?Ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Dt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nt(e,t,n){t instanceof Kt?(e.i=t,function(e,t){t&&!e.j&&(Gt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Wt(this,t),Qt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Lt(t,qt)),e.i=new Kt(t,e.h))}function Rt(e,t,n){e.i.set(t,n)}function Pt(e){return Rt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}It.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lt(t,Bt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lt(t,Bt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lt(n,"/"==n.charAt(0)?Vt:Ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lt(n,zt)),e.join("")};var Bt=/[#\/\?@]/g,Ut=/[#\?:]/g,Vt=/[#\?]/g,qt=/[#\?@]/g,zt=/#/g;function Kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Wt(e,t){Gt(e),t=Yt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ht(e,t){return Gt(e),t=Yt(e,t),e.g.has(t)}function Qt(e,t,n){Wt(e,t),0<n.length&&(e.i=null,e.g.set(Yt(e,t),_(n)),e.h+=n.length)}function Yt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Kt.prototype).add=function(e,t){Gt(this),this.i=null,e=Yt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Gt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},r.oa=function(){Gt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},r.W=function(e){Gt(this);var t=[];if("string"===typeof e)Ht(this,e)&&(t=t.concat(this.g.get(Yt(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Gt(this),this.i=null,Ht(this,e=Yt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Xt=function e(t,n){Object(c.a)(this,e),this.h=t,this.g=n};function $t(e){this.l=e||Zt,p.PerformanceNavigationTiming?e=0<(e=p.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(p.g&&p.g.Ga&&p.g.Ga()&&p.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jt,Zt=10;function en(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tn(e){return e.h?1:e.g?e.g.size:0}function nn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function rn(e,t){e.g?e.g.add(t):e.h=t}function an(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function on(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t=e.i,n=!0,r=!1,i=void 0;try{for(var a,o=e.g.values()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;t=t.concat(u.D)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}return _(e.i)}function un(){}function sn(){this.g=new un}function cn(e,t,n){var r=n||"";try{_t(e,function(e,n){var i=e;m(e)&&(i=Te(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ln(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function fn(e){this.l=e.ac||null,this.j=e.jb||!1}function hn(e,t){xe.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=dn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$t.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e=!0,t=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cancel()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.g.clear()}},un.prototype.stringify=function(e){return p.JSON.stringify(e,void 0)},un.prototype.parse=function(e){return p.JSON.parse(e,void 0)},E(fn,rt),fn.prototype.g=function(){return new hn(this.l,this.j)},fn.prototype.i=(Jt={},function(){return Jt}),E(hn,xe);var dn=0;function pn(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function vn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yn(e)}function yn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=hn.prototype).open=function(e,t){if(this.readyState!=dn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||p).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(function(){}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vn(this)),this.readyState=dn},r.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yn(this)),this.g&&(this.readyState=3,yn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof p.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pn(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},r.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vn(this):yn(this),3==this.readyState&&pn(this)}},r.Va=function(e){this.g&&(this.response=this.responseText=e,vn(this))},r.Ua=function(e){this.g&&(this.response=e,vn(this))},r.ga=function(){this.g&&vn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(hn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var mn=p.JSON.parse;function gn(e){xe.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bn,this.K=this.L=!1}E(gn,xe);var bn="",kn=/^https?$/i,wn=["POST","PUT"];function xn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,On(e),Tn(e)}function On(e){e.D||(e.D=!0,Oe(e,"complete"),Oe(e,"error"))}function En(e){if(e.h&&"undefined"!=typeof d&&(!e.C[1]||4!=_n(e)||2!=e.aa()))if(e.v&&4==_n(e))Me(e.Ha,0,e);else if(Oe(e,"readystatechange"),4==_n(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(St)[1]||null;if(!a&&p.self&&p.self.location){var o=p.self.location.protocol;a=o.substr(0,o.length-1)}i=!kn.test(a?a.toLowerCase():"")}t=i}if(t)Oe(e,"complete"),Oe(e,"success");else{e.m=6;try{var u=2<_n(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",On(e)}}finally{Tn(e)}}}function Tn(e,t){if(e.g){Cn(e);var n=e.g,r=e.C[0]?v:null;e.g=null,e.C=null,t||Oe(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Cn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(p.clearTimeout(e.A),e.A=null)}function _n(e){return e.g?e.g.readyState:0}function Sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case bn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function In(e){var t="";return ae(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=In(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Rt(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.Ca=0,this.i=[],this.j=new Ke,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=An("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=An("baseRetryDelayMs",5e3,e),this.bb=An("retryDelaySeedMs",1e4,e),this.$a=An("forwardChannelMaxRetries",2,e),this.ta=An("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new $t(e&&e.concurrentRequestLimit),this.Fa=new sn,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Nn(e){if(Pn(e),3==e.G){var t=e.U++,n=jt(e.F);Rt(n,"SID",e.I),Rt(n,"RID",t),Rt(n,"TYPE","terminate"),Mn(e,n),(t=new ft(e,e.j,t,void 0)).K=2,t.v=Pt(jt(n)),n=!1,p.navigator&&p.navigator.sendBeacon&&(n=p.navigator.sendBeacon(t.v.toString(),"")),!n&&p.Image&&((new Image).src=t.v,n=!0),n||(t.g=Xn(t.l,null),t.g.da(t.v)),t.F=Date.now(),wt(t)}Qn(e)}function Rn(e){e.g&&(qn(e),e.g.cancel(),e.g=null)}function Pn(e){Rn(e),e.u&&(p.clearTimeout(e.u),e.u=null),Kn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&p.clearTimeout(e.m),e.m=null)}function Fn(e){en(e.h)||e.m||(e.m=!0,De(e.Ja,e),e.C=0)}function Ln(e,t){var n;n=t?t.m:e.U++;var r=jt(e.F);Rt(r,"SID",e.I),Rt(r,"RID",n),Rt(r,"AID",e.T),Mn(e,r),e.o&&e.s&&jn(r,e.o,e.s),n=new ft(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Bn(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),rn(e.h,n),yt(n,r,t)}function Mn(e,t){e.ia&&ae(e.ia,function(e,n){Rt(t,n,e)}),e.l&&_t({},function(e,n){Rt(t,n,e)})}function Bn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?x(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{cn(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Un(e){e.g||e.u||(e.Z=1,De(e.Ia,e),e.A=0)}function Vn(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=et(x(e.Ia,e),Wn(e,e.A)),e.A++,!0)}function qn(e){null!=e.B&&(p.clearTimeout(e.B),e.B=null)}function zn(e){e.g=new ft(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=jt(e.sa);Rt(t,"RID","rpc"),Rt(t,"SID",e.I),Rt(t,"CI",e.L?"0":"1"),Rt(t,"AID",e.T),Rt(t,"TYPE","xmlhttp"),Mn(e,t),e.o&&e.s&&jn(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Pt(jt(t)),n.s=null,n.P=!0,mt(n,e)}function Kn(e){null!=e.v&&(p.clearTimeout(e.v),e.v=null)}function Gn(e,t){var n=null;if(e.g==t){Kn(e),qn(e),e.g=null;var r=2}else{if(!nn(e.h,t))return;n=t.D,an(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Oe(r=Qe(),new Ze(r,n)),Fn(e)}else Un(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(tn(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=et(x(e.Ja,e,t),Wn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Hn(e,5);break;case 4:Hn(e,10);break;case 3:Hn(e,6);break;default:Hn(e,2)}}function Wn(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Hn(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=x(e.kb,e);n||(n=new It("//www.google.com/images/cleardot.gif"),p.location&&"http"==p.location.protocol||At(n,"https"),Pt(n)),function(e,t){var n=new Ke;if(p.Image){var r=new Image;r.onload=O(ln,n,r,"TestLoadImage: loaded",!0,t),r.onerror=O(ln,n,r,"TestLoadImage: error",!1,t),r.onabort=O(ln,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=O(ln,n,r,"TestLoadImage: timeout",!1,t),p.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Je(2);e.G=0,e.l&&e.l.va(t),Qn(e),Pn(e)}function Qn(e){if(e.G=0,e.la=[],e.l){var t=on(e.h);0==t.length&&0==e.i.length||(S(e.la,t),S(e.la,e.i),e.h.i.length=0,_(e.i),e.i.length=0),e.l.ua()}}function Yn(e,t,n){var r=n instanceof It?jt(n):new It(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Dt(r,r.m);else{var i=p.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new It(null,void 0);r&&At(a,r),t&&(a.g=t),i&&Dt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Rt(r,n,t),Rt(r,"VER",e.ma),Mn(e,r),r}function Xn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new gn(new fn({jb:!0})):new gn(e.ra)).Ka(e.H),t}function $n(){}function Jn(){if(B&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Zn(e,t){xe.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nr(this)}function er(e){st.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tr(){ct.call(this),this.status=1}function nr(e){this.g=e}(r=gn.prototype).Ka=function(e){this.L=e},r.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ot.g(),this.C=this.u?it(this.u):it(ot),this.g.onreadystatechange=x(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(f){return void xn(this,f)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o=!0,u=!1,s=void 0;try{for(var c,l=r.keys()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;n.set(f,r.get(f))}}catch(O){u=!0,s=O}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}}r=Array.from(n.keys()).find(function(e){return"content-type"==e.toLowerCase()}),a=p.FormData&&e instanceof p.FormData,!(0<=C(wn,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var h=!0,d=!1,v=void 0;try{for(var y,m=n[Symbol.iterator]();!(h=(y=m.next()).done);h=!0){var g=y.value,b=Object(i.a)(g,2),k=b[0],w=b[1];this.g.setRequestHeader(k,w)}}catch(O){d=!0,v=O}finally{try{h||null==m.return||m.return()}finally{if(d)throw v}}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cn(this),0<this.B&&((this.K=function(e){return B&&X()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=x(this.qa,this)):this.A=Me(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(f){xn(this,f)}},r.qa=function(){"undefined"!=typeof d&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oe(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Oe(this,"complete"),Oe(this,"abort"),Tn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tn(this,!0)),gn.X.M.call(this)},r.Ha=function(){this.s||(this.F||this.v||this.l?En(this):this.fb())},r.fb=function(){En(this)},r.aa=function(){try{return 2<_n(this)?this.g.status:-1}catch(Jt){return-1}},r.fa=function(){try{return this.g?this.g.responseText:""}catch(Jt){return""}},r.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mn(t)}},r.Ea=function(){return this.m},r.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=Dn.prototype).ma=8,r.G=1,r.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ft(this,this.j,e,void 0),n=this.s;if(this.S&&(n?se(n=oe(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bn(this,t,r),Rt(i=jt(this.F),"RID",e),Rt(i,"CVER",22),this.D&&Rt(i,"X-HTTP-Session-Id",this.D),Mn(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(In(n)))+"&"+r:this.o&&jn(i,this.o,n)),rn(this.h,t),this.Ya&&Rt(i,"TYPE","init"),this.O?(Rt(i,"$req",r),Rt(i,"SID","null"),t.Z=!0,yt(t,i,null)):yt(t,i,r),this.G=2}}else 3==this.G&&(e?Ln(this,e):0==this.i.length||en(this.h)||Ln(this))},r.Ia=function(){if(this.u=null,zn(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=et(x(this.eb,this),e)}},r.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Je(10),Rn(this),zn(this))},r.cb=function(){null!=this.v&&(this.v=null,Rn(this),Vn(this),Je(19))},r.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))},(r=$n.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Ra=function(){},Jn.prototype.g=function(e,t){return new Zn(e,t)},E(Zn,xe),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Je(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Yn(e,null,e.V),Fn(e)},Zn.prototype.close=function(){Nn(this.g)},Zn.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Te(e),e=n);t.i.push(new Xt(t.ab++,e)),3==t.G&&Fn(t)},Zn.prototype.M=function(){this.g.l=null,delete this.j,Nn(this.g),delete this.g,Zn.X.M.call(this)},E(er,st),E(tr,ct),E(nr,$n),nr.prototype.xa=function(){Oe(this.g,"a")},nr.prototype.wa=function(e){Oe(this.g,new er(e))},nr.prototype.va=function(e){Oe(this.g,new tr)},nr.prototype.ua=function(){Oe(this.g,"b")},Jn.prototype.createWebChannel=Jn.prototype.g,Zn.prototype.send=Zn.prototype.u,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",at.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",xe.prototype.listen=xe.prototype.N,gn.prototype.listenOnce=gn.prototype.O,gn.prototype.getLastError=gn.prototype.Oa,gn.prototype.getLastErrorCode=gn.prototype.Ea,gn.prototype.getStatus=gn.prototype.aa,gn.prototype.getResponseJson=gn.prototype.Sa,gn.prototype.getResponseText=gn.prototype.fa,gn.prototype.send=gn.prototype.da,gn.prototype.setWithCredentials=gn.prototype.Ka;var rr=h.createWebChannelTransport=function(){return new Jn},ir=h.getStatEventTarget=function(){return Qe()},ar=h.ErrorCode=tt,or=h.EventType=nt,ur=h.Event=We,sr=h.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},cr=h.FetchXmlHttpFactory=fn,lr=h.WebChannel=at,fr=h.XhrIo=gn}).call(this,n(23))},function(e,t,n){"use strict";var r=n(5);n.d(t,"a",function(){return r.E}),n.d(t,"b",function(){return r.M}),n.d(t,"c",function(){return r.X}),n.d(t,"d",function(){return r.fb})},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return v});var r,i,a=n(1),o=n(2),u=n(10),s=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var c={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},l=i.INFO,f=(r={},Object(u.a)(r,i.DEBUG,"log"),Object(u.a)(r,i.VERBOSE,"log"),Object(u.a)(r,i.INFO,"info"),Object(u.a)(r,i.WARN,"warn"),Object(u.a)(r,i.ERROR,"error"),r),h=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=f[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},d=function(){function e(t){Object(a.a)(this,e),this.name=t,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object(o.a)(e,[{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?c[e]:e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(t)),this._logHandler.apply(this,[this,i.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(t)),this._logHandler.apply(this,[this,i.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(t)),this._logHandler.apply(this,[this,i.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(t)),this._logHandler.apply(this,[this,i.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(t)),this._logHandler.apply(this,[this,i.ERROR].concat(t))}},{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}}]),e}();function p(e){s.forEach(function(t){t.setLogLevel(e)})}function v(e,t){for(var n=function(){var n=a[r],o=null;t&&t.level&&(o=c[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=arguments[u];var s=a.map(function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!==o&&void 0!==o?o:t.logLevel)&&e({level:i[n].toLowerCase(),message:s,args:a,type:t.name})}},r=0,a=s;r<a.length;r++)n()}},function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return p});var r=n(0),i=n.n(r),a=n(13),o=n(4),u=n(11),s=n(1),c=n(2),l=n(9),f=function(){function e(t,n,r){Object(s.a)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(c.a)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),h="[DEFAULT]",d=function(){function e(t,n){Object(s.a)(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(c.a)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new l.a;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:h})}catch(p){}var t=!0,n=!1,r=void 0;try{for(var i,a=this.instancesDeferred.entries()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=Object(u.a)(o,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:f});l.resolve(d)}catch(p){}}}catch(v){n=!0,r=v}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Object(a.a)(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),Object(a.a)(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=!0,o=!1,s=void 0;try{for(var c,l=this.instancesDeferred.entries()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=Object(u.a)(f,2),d=h[0],p=h[1];r===this.normalizeInstanceIdentifier(d)&&p.resolve(i)}}catch(v){o=!0,s=v}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;try{s(e,t)}catch(c){}}}catch(l){i=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===h?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.component?this.component.multipleInstances?e:h:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var p=function(){function e(t){Object(s.a)(this,e),this.name=t,this.providers=new Map}return Object(c.a)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new d(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},function(e,t,n){"use strict";var r=n(6);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}n.d(t,"a",function(){return i})},function(e,t,n){var r,i=n(76),a=n(43),o=n(78),u=n(79),s=n(80);"undefined"!==typeof ArrayBuffer&&(r=n(81));var c="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=i(h),p={type:"error",data:"parser error"},v=n(82);function y(e,t,n){for(var r=new Array(e.length),i=u(e.length,n),a=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},o=0;o<e.length;o++)a(o,e[o],i)}t.encodePacket=function(e,n,r,i){"function"===typeof n&&(i=n,n=!1),"function"===typeof r&&(i=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,a=new Uint8Array(i),o=new Uint8Array(1+i.byteLength);o[0]=h[e.type];for(var u=0;u<a.length;u++)o[u+1]=a[u];return r(o.buffer)}(e,n,i);if("undefined"!==typeof v&&a instanceof v)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=h[e.type];var a=new v([i.buffer,e.data]);return r(a)}(e,n,i);if(a&&a.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,i);var o=h[e.type];return void 0!==e.data&&(o+=r?s.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if("undefined"!==typeof v&&e.data instanceof v){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(i+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(c){for(var o=new Uint8Array(e.data),u=new Array(o.length),s=0;s<o.length;s++)u[s]=o[s];r=String.fromCharCode.apply(null,u)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return p;if("string"===typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return p;var i=e.charAt(0);return Number(i)==i&&d[i]?e.length>1?{type:d[i],data:e.substring(1)}:{type:d[i]}:p}i=new Uint8Array(e)[0];var a=o(e,1);return v&&"blob"===n&&(a=new v([a])),{type:d[i],data:a}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&v&&(i=new v([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"===typeof n&&(r=n,n=null);var i=a(e);if(n&&i)return v&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");y(e,function(e,r){t.encodePacket(e,!!i&&n,!1,function(e){r(null,function(e){return e.length+":"+e}(e))})},function(e,t){return r(t.join(""))})},t.decodePayload=function(e,n,r){if("string"!==typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"===typeof n&&(r=n,n=null),""===e)return r(p,0,1);for(var a,o,u="",s=0,c=e.length;s<c;s++){var l=e.charAt(s);if(":"===l){if(""===u||u!=(a=Number(u)))return r(p,0,1);if(u!=(o=e.substr(s+1,a)).length)return r(p,0,1);if(o.length){if(i=t.decodePacket(o,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,s+a,c))return}s+=a,u=""}else u+=l}return""!==u?r(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));y(e,function(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})},function(e,t){var r=t.reduce(function(e,t){var n;return e+(n="string"===typeof t?t.length:t.byteLength).toString().length+n+2},0),i=new Uint8Array(r),a=0;return t.forEach(function(e){var t="string"===typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);n=r.buffer}i[a++]=t?0:1;var u=n.byteLength.toString();for(o=0;o<u.length;o++)i[a++]=parseInt(u[o]);i[a++]=255;for(r=new Uint8Array(n),o=0;o<r.length;o++)i[a++]=r[o]}),n(i.buffer)})},t.encodePayloadAsBlob=function(e,n){y(e,function(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"===typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(a.length+1);for(i=0;i<a.length;i++)o[i]=parseInt(a[i]);if(o[a.length]=255,v){var u=new v([t.buffer,o.buffer,e]);n(null,u)}})},function(e,t){return n(new v(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"===typeof n&&(r=n,n=null);for(var i=e,a=[];i.byteLength>0;){for(var u=new Uint8Array(i),s=0===u[0],c="",l=1;255!==u[l];l++){if(c.length>310)return r(p,0,1);c+=u[l]}i=o(i,2+c.length),c=parseInt(c);var f=o(i,0,c);if(s)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(v){var h=new Uint8Array(f);f="";for(l=0;l<h.length;l++)f+=String.fromCharCode(h[l])}a.push(f),i=o(i,c)}var d=a.length;a.forEach(function(e,i){r(t.decodePacket(e,n,!0),i,d)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return k});var r,i=n(10),a=n(1),o=n(2),u=n(9),s=n(17),c=n(12),l=n(16),f=function(){function e(t,n){var r=this;Object(a.a)(this,e),this._delegate=t,this.firebase=n,Object(c._addComponent)(t,new s.a("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return Object(o.a)(e,[{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),Object(c.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Object(c._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Object(c._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}},{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}}]),e}(),h=(r={},Object(i.a)(r,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(i.a)(r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),r),d=new u.b("app-compat","Firebase",h);var p=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c.initializeApp(r,i);if(Object(u.e)(t,a.name))return t[a.name];var o=new e(a,n);return t[a.name]=o,o},app:r,registerVersion:c.registerVersion,setLogLevel:c.setLogLevel,onLog:c.onLog,apps:null,SDK_VERSION:c.SDK_VERSION,INTERNAL:{registerComponent:function(t){var i=t.name,a=i.replace("-compat","");if(c._registerComponent(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw d.create("invalid-app-argument",{appName:i});return e[a]()};void 0!==t.serviceProps&&Object(u.i)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,i),n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:c}};function r(e){if(e=e||c._DEFAULT_ENTRY_NAME,!Object(u.e)(t,e))throw d.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),r.App=e,n}(f);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(u.i)(t,e)},createSubscribe:u.g,ErrorFactory:u.b,deepExtend:u.i}),t}(),v=new l.b("@firebase/app-compat"),y="@firebase/app-compat",m="0.2.0";if(Object(u.n)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b,k=p;Object(c.registerVersion)(y,m,b)},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(21);function i(e,t,n){return(i=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(h);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:""}).DEBUG),e}(t=e.exports=n(62)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())}).call(this,n(24))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:""}).DEBUG),e}(t=e.exports=n(83)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())}).call(this,n(24))},function(e,t,n){var r=n(64)("socket.io-parser"),i=n(67),a=n(68),o=n(38),u=n(39);function s(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=s,t.Decoder=f;var c=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(t){return!1}}(e.data);if(!1===i)return c;n+=i}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}s.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){a.removeBlobs(e,function(e){var n=a.deconstructPacket(e),r=l(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,n):n([l(e)])},i(f.prototype),f.prototype.add=function(e){var n;if("string"===typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return d("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var a="";"-"!==e.charAt(++n)&&(a+=e.charAt(n),n!=e.length););if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){var u=e.charAt(n);if(","===u)break;if(i.nsp+=u,n===e.length)break}else i.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var u=e.charAt(n);if(null==u||Number(u)!=u){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var c=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(n)),l=!1!==c&&(i.type===t.ERROR||o(c));if(!l)return d("invalid payload");i.data=c}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!u(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){var r=n(69),i=n(70),a=n(71);function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=u(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|d(t.length);return 0===(e=u(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?u(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var a,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,h=0;h<s;h++)if(c(e,a+h)!==c(t,h)){f=!1;break}if(f)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function b(e,t,n,r){return q(U(t,e.length-n),e,n,r)}function k(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return k(e,t,n,r)}function x(e,t,n,r){return q(V(t),e,n,r)}function O(e,t,n,r){return q(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,u,s,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=e[i+1]))&&(s=(31&c)<<6|63&a)>127&&(l=s);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(s=(15&c)<<12|(63&a)<<6|63&o)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:a=e[i+1],o=e[i+2],u=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&u)&&(s=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),u=Math.min(a,o),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=B(e[a]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,a){return a||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:U(new s(e,r).toString()),u=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(M,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(23))},function(e,t,n){var r=n(74);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(a){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}}},function(e,t,n){var r=n(19),i=n(34);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,i(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(20);n.d(t,"a",function(){return r.a});r.a.registerVersion("firebase","9.15.0","app-compat")},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))i.call(n,c)&&(u[c]=n[c]);if(r){o=r(n);for(var l=0;l<o.length;l++)a.call(n,o[l])&&(u[o[l]]=n[o[l]])}}return u}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var o=n.exec(e||""),u={},s=14;s--;)u[r[s]]=o[s]||"";return-1!=i&&-1!=a&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||i(e))};var n="function"===typeof t&&"function"===typeof t.isBuffer,r="function"===typeof ArrayBuffer,i=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,n(31).Buffer)},function(e,t,n){var r=n(72),i=n(46),a=n(47),o=n(30),u=n(48),s=n(49),c=n(26)("socket.io-client:manager"),l=n(45),f=n(89),h=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var a=u(n,"open",function(){i.onopen(),e&&e()}),o=u(n,"error",function(t){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var l=setTimeout(function(){c("connect attempt timed out after %d",s),a.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(o),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",s(this,"ondata"))),this.subs.push(u(e,"ping",s(this,"onping"))),this.subs.push(u(e,"pong",s(this,"onpong"))),this.subs.push(u(e,"error",s(this,"onerror"))),this.subs.push(u(e,"close",s(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(32),i=n(75),a=n(85),o=n(86);t.polling=function(e){var t=!1,n=!1,o=!1!==e.jsonp;if("undefined"!==typeof location){var u="https:"===location.protocol,s=location.port;s||(s=u?443:80),t=e.hostname!==location.hostname||s!==e.port,n=e.secure!==u}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!o)throw new Error("JSONP disabled");return new a(e)},t.websocket=o},function(e,t,n){var r=n(33),i=n(27),a=n(19),o=n(28),u=n(44),s=n(29)("engine.io-client:polling");e.exports=l;var c=null!=new(n(32))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}o(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){s("pre-pause polling complete"),--r||n()})),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",function(){s("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;s("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(77),i=Object.prototype.toString,a="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(n){if(!n||"object"!==typeof n)return!1;if(r(n)){for(var i=0,u=n.length;i<u;i++)if(e(n[i]))return!0;return!1}if("function"===typeof t&&t.isBuffer&&t.isBuffer(n)||"function"===typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"===typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&e(n[s]))return!0;return!1}}).call(this,n(31).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,o={},u=0,s=0;function c(e){var t="";do{t=i[e%a]+t,e=Math.floor(e/a)}while(e>0);return t}function l(){var e=c(+new Date);return e!==r?(u=0,r=e):e+"."+c(u++)}for(;s<a;s++)o[i[s]]=s;l.encode=c,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=t*a+o[e.charAt(s)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(30),i=n(47),a=n(88),o=n(48),u=n(49),s=n(26)("socket.io-client:socket"),c=n(27),l=n(43);e.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",u(this,"onopen")),o(e,"packet",u(this,"onpacket")),o(e,"close",u(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return h.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(s("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===typeof this.query?c.encode(this.query):this.query;s("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);s("sending ack %j",i),t.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"===typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},,function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(55)},function(e,t,n){"use strict";var r=n(6),i=n(21);var a=n(22);function o(e){var t="function"===typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Object(a.a)(e,arguments,Object(r.a)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(o,e)})(e)}n.d(t,"a",function(){return o})},,function(e,t,n){"use strict";var r=n(36),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,a,o,u],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function w(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||b}function x(){}function O(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&g("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var E=O.prototype=new x;E.constructor=O,r(E,w.prototype),E.isPureReactComponent=!0;var T={current:null},C={current:null},_=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r=void 0,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:C.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,D=[];function N(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function P(e,t,n){return null==e?0:function e(t,n,r,i){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var s=!1;if(null===t)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case a:case o:s=!0}}if(s)return r(i,t,""===n?"."+F(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+F(u=t[c],c);s+=e(u,l,r,i)}else if(l=null===t||"object"!==typeof t?null:"function"===typeof(l=m&&t[m]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(u=t.next()).done;)s+=e(u=u.value,l=n+F(u,c++),r,i);else"object"===u&&g("31","[object Object]"===(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return s}(e,"",t,n)}function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function M(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,r,n,function(e){return e}):null!=e&&(j(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function B(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),P(e,M,t=N(t,a,r,i)),R(t)}function U(){var e=T.current;return null===e&&g("321"),e}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;P(e,L,t=N(null,null,t,n)),R(t)},count:function(e){return P(e,function(){return null},null)},toArray:function(e){var t=[];return B(e,t,null,function(e){return e}),t},only:function(e){return j(e)||g("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:O,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return U().useCallback(e,t)},useContext:function(e,t){return U().useContext(e,t)},useEffect:function(e,t){return U().useEffect(e,t)},useImperativeHandle:function(e,t,n){return U().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return U().useLayoutEffect(e,t)},useMemo:function(e,t){return U().useMemo(e,t)},useReducer:function(e,t,n){return U().useReducer(e,t,n)},useRef:function(e){return U().useRef(e)},useState:function(e){return U().useState(e)},Fragment:u,StrictMode:s,Suspense:p,createElement:I,cloneElement:function(e,t,n){(null===e||void 0===e)&&g("267",e);var i=void 0,o=r({},e.props),u=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=C.current),void 0!==t.key&&(u=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var f=0;f<i;f++)l[f]=arguments[f+2];o.children=l}return{$$typeof:a,type:e.type,key:u,ref:s,props:o,_owner:c}},createFactory:function(e){var t=I.bind(null,e);return t.type=e,t},isValidElement:j,version:"16.8.6",unstable_ConcurrentMode:h,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:T,ReactCurrentOwner:C,assign:r}},q={default:V},z=q&&V||q;e.exports=z.default||z},function(e,t,n){"use strict";var r=n(3),i=n(36),a=n(56);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,a,o,u],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var u=!1,s=null,c=!1,l=null,f={onError:function(e){u=!0,s=e}};function h(e,t,n,r,i,a,o,c,l){u=!1,s=null,function(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(f,arguments)}var d=null,p={};function v(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||o("96",e),!m[n])for(var r in t.extractEvents||o("97",e),m[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;g.hasOwnProperty(s)&&o("99",s),g[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&y(c[i],u,s);i=!0}else a.registrationName?(y(a.registrationName,u,s),i=!0):i=!1;i||o("98",r,e)}}}function y(e,t,n){b[e]&&o("100",e),b[e]=t,k[e]=t.eventTypes[n].dependencies}var m=[],g={},b={},k={},w=null,x=null,O=null;function E(e,t,n){var r=e.type||"unknown-event";e.currentTarget=O(n),function(e,t,n,r,i,a,f,d,p){if(h.apply(this,arguments),u){if(u){var v=s;u=!1,s=null}else o("198"),v=void 0;c||(c=!0,l=v)}}(r,t,void 0,e),e.currentTarget=null}function T(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var _=null;function S(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)E(e,t[r],n[r]);else t&&E(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var I={injectEventPluginOrder:function(e){d&&o("101"),d=Array.prototype.slice.call(e),v()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&o("102",t),p[t]=r,n=!0)}n&&v()}};function j(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&o("231",t,typeof n),n)}function A(e){if(null!==e&&(_=T(_,e)),e=_,_=null,e&&(C(e,S),_&&o("95"),c))throw e=l,c=!1,l=null,e}var D=Math.random().toString(36).slice(2),N="__reactInternalInstance$"+D,R="__reactEventHandlers$"+D;function P(e){if(e[N])return e[N];for(;!e[N];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[N]).tag||6===e.tag?e:null}function F(e){return!(e=e[N])||5!==e.tag&&6!==e.tag?null:e}function L(e){if(5===e.tag||6===e.tag)return e.stateNode;o("33")}function M(e){return e[R]||null}function B(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function U(e,t,n){(t=j(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function V(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=B(t);for(t=n.length;0<t--;)U(n[t],"captured",e);for(t=0;t<n.length;t++)U(n[t],"bubbled",e)}}function q(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=j(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function z(e){e&&e.dispatchConfig.registrationName&&q(e._targetInst,null,e)}function K(e){C(e,V)}var G=!("undefined"===typeof window||!window.document||!window.document.createElement);function W(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var H={animationend:W("Animation","AnimationEnd"),animationiteration:W("Animation","AnimationIteration"),animationstart:W("Animation","AnimationStart"),transitionend:W("Transition","TransitionEnd")},Q={},Y={};function X(e){if(Q[e])return Q[e];if(!H[e])return e;var t,n=H[e];for(t in n)if(n.hasOwnProperty(t)&&t in Y)return Q[e]=n[t];return e}G&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);var $=X("animationend"),J=X("animationiteration"),Z=X("animationstart"),ee=X("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function ae(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function oe(){return!0}function ue(){return!1}function se(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?oe:ue,this.isPropagationStopped=ue,this}function ce(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function le(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function fe(e){e.eventPool=[],e.getPooled=ce,e.release=le}i(se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oe)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oe)},persist:function(){this.isPersistent=oe},isPersistent:ue,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ue,this._dispatchInstances=this._dispatchListeners=null}}),se.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},se.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,fe(n),n},fe(se);var he=se.extend({data:null}),de=se.extend({data:null}),pe=[9,13,27,32],ve=G&&"CompositionEvent"in window,ye=null;G&&"documentMode"in document&&(ye=document.documentMode);var me=G&&"TextEvent"in window&&!ye,ge=G&&(!ve||ye&&8<ye&&11>=ye),be=String.fromCharCode(32),ke={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function xe(e,t){switch(e){case"keyup":return-1!==pe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Oe(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ee=!1;var Te={eventTypes:ke,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(ve)e:{switch(e){case"compositionstart":i=ke.compositionStart;break e;case"compositionend":i=ke.compositionEnd;break e;case"compositionupdate":i=ke.compositionUpdate;break e}i=void 0}else Ee?xe(e,n)&&(i=ke.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=ke.compositionStart);return i?(ge&&"ko"!==n.locale&&(Ee||i!==ke.compositionStart?i===ke.compositionEnd&&Ee&&(a=ae()):(re="value"in(ne=r)?ne.value:ne.textContent,Ee=!0)),i=he.getPooled(i,t,n,r),a?i.data=a:null!==(a=Oe(n))&&(i.data=a),K(i),a=i):a=null,(e=me?function(e,t){switch(e){case"compositionend":return Oe(t);case"keypress":return 32!==t.which?null:(we=!0,be);case"textInput":return(e=t.data)===be&&we?null:e;default:return null}}(e,n):function(e,t){if(Ee)return"compositionend"===e||!ve&&xe(e,t)?(e=ae(),ie=re=ne=null,Ee=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ge&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=de.getPooled(ke.beforeInput,t,n,r)).data=e,K(t)):t=null,null===a?t:null===t?a:[a,t]}},Ce=null,_e=null,Se=null;function Ie(e){if(e=x(e)){"function"!==typeof Ce&&o("280");var t=w(e.stateNode);Ce(e.stateNode,e.type,t)}}function je(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function De(e,t){return e(t)}function Ne(e,t,n){return e(t,n)}function Re(){}var Pe=!1;function Fe(e,t){if(Pe)return e(t);Pe=!0;try{return De(e,t)}finally{Pe=!1,(null!==_e||null!==Se)&&(Re(),Ae())}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Le[e.type]:"textarea"===t}function Be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Ue(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=Ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ze(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Ke=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ke.hasOwnProperty("ReactCurrentDispatcher")||(Ke.ReactCurrentDispatcher={current:null});var Ge=/^(.*)[\\\/]/,We="function"===typeof Symbol&&Symbol.for,He=We?Symbol.for("react.element"):60103,Qe=We?Symbol.for("react.portal"):60106,Ye=We?Symbol.for("react.fragment"):60107,Xe=We?Symbol.for("react.strict_mode"):60108,$e=We?Symbol.for("react.profiler"):60114,Je=We?Symbol.for("react.provider"):60109,Ze=We?Symbol.for("react.context"):60110,et=We?Symbol.for("react.concurrent_mode"):60111,tt=We?Symbol.for("react.forward_ref"):60112,nt=We?Symbol.for("react.suspense"):60113,rt=We?Symbol.for("react.memo"):60115,it=We?Symbol.for("react.lazy"):60116,at="function"===typeof Symbol&&Symbol.iterator;function ot(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=at&&e[at]||e["@@iterator"])?e:null}function ut(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ye:return"Fragment";case Qe:return"Portal";case $e:return"Profiler";case Xe:return"StrictMode";case nt:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case Ze:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return ut(e.type);case it:if(e=1===e._status?e._result:null)return ut(e)}return null}function st(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ut(e.type);n=null,r&&(n=ut(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(Ge,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lt=Object.prototype.hasOwnProperty,ft={},ht={};function dt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var vt=/[\-:]([a-z])/g;function yt(e){return e[1].toUpperCase()}function mt(e,t,n,r){var i=pt.hasOwnProperty(t)?pt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!lt.call(ht,e)||!lt.call(ft,e)&&(ct.test(e)?ht[e]=!0:(ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function gt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function kt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=gt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&mt(e,"checked",t,!1)}function xt(e,t){wt(e,t);var n=gt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Et(e,t.type,n):t.hasOwnProperty("defaultValue")&&Et(e,t.type,gt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ot(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Et(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vt,yt);pt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vt,yt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vt,yt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new dt(e,1,!1,e.toLowerCase(),null)});var Tt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ct(e,t,n){return(e=se.getPooled(Tt.change,e,t,n)).type="change",je(n),K(e),e}var _t=null,St=null;function It(e){A(e)}function jt(e){if(ze(L(e)))return e}function At(e,t){if("change"===e)return t}var Dt=!1;function Nt(){_t&&(_t.detachEvent("onpropertychange",Rt),St=_t=null)}function Rt(e){"value"===e.propertyName&&jt(St)&&Fe(It,e=Ct(St,e,Be(e)))}function Pt(e,t,n){"focus"===e?(Nt(),St=n,(_t=t).attachEvent("onpropertychange",Rt)):"blur"===e&&Nt()}function Ft(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(St)}function Lt(e,t){if("click"===e)return jt(t)}function Mt(e,t){if("input"===e||"change"===e)return jt(t)}G&&(Dt=Ue("input")&&(!document.documentMode||9<document.documentMode));var Bt={eventTypes:Tt,_isInputEventSupported:Dt,extractEvents:function(e,t,n,r){var i=t?L(t):window,a=void 0,o=void 0,u=i.nodeName&&i.nodeName.toLowerCase();if("select"===u||"input"===u&&"file"===i.type?a=At:Me(i)?Dt?a=Mt:(a=Ft,o=Pt):(u=i.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Lt),a&&(a=a(e,t)))return Ct(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Et(i,"number",i.value)}},Ut=se.extend({view:null,detail:null}),Vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Vt[e])&&!!t[e]}function zt(){return qt}var Kt=0,Gt=0,Wt=!1,Ht=!1,Qt=Ut.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:zt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Kt;return Kt=e.screenX,Wt?"mousemove"===e.type?e.screenX-t:0:(Wt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Gt;return Gt=e.screenY,Ht?"mousemove"===e.type?e.screenY-t:0:(Ht=!0,0)}}),Yt=Qt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$t={eventTypes:Xt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?P(t):null):a=null,a===t)return null;var o=void 0,u=void 0,s=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(o=Qt,u=Xt.mouseLeave,s=Xt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Yt,u=Xt.pointerLeave,s=Xt.pointerEnter,c="pointer");var l=null==a?i:L(a);if(i=null==t?i:L(t),(e=o.getPooled(u,a,n,r)).type=c+"leave",e.target=l,e.relatedTarget=i,(n=o.getPooled(s,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=t,a&&r)e:{for(i=r,c=0,o=t=a;o;o=B(o))c++;for(o=0,s=i;s;s=B(s))o++;for(;0<c-o;)t=B(t),c--;for(;0<o-c;)i=B(i),o--;for(;c--;){if(t===i||t===i.alternate)break e;t=B(t),i=B(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(c=a.alternate)||c!==i);)t.push(a),a=B(a);for(a=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)a.push(r),r=B(r);for(r=0;r<t.length;r++)q(t[r],"bubbled",e);for(r=a.length;0<r--;)q(a[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Zt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&o("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&o("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var u=i.child;u;){if(u===n)return nn(i),e;if(u===r)return nn(i),t;u=u.sibling}o("188")}if(n.return!==r.return)n=i,r=a;else{u=!1;for(var s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}u||o("189")}}n.alternate!==r&&o("190")}return 3!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=se.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=se.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),un=Ut.extend({relatedTarget:null});function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Ut.extend({key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:zt,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hn=Qt.extend({dataTransfer:null}),dn=Ut.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:zt}),pn=se.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vn=Qt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[$,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mn={},gn={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},mn[e]=t,gn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),yn.forEach(function(e){bn(e,!1)});var kn={eventTypes:mn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=gn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=gn[e];if(!i)return null;switch(e){case"keypress":if(0===sn(n))return null;case"keydown":case"keyup":e=fn;break;case"blur":case"focus":e=un;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case $:case J:case Z:e=an;break;case ee:e=pn;break;case"scroll":e=Ut;break;case"wheel":e=vn;break;case"copy":case"cut":case"paste":e=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Yt;break;default:e=se}return K(t=e.getPooled(i,t,n,r)),t}},wn=kn.isInteractiveTopLevelEventType,xn=[];function On(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=P(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Be(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,u=0;u<m.length;u++){var s=m[u];s&&(s=s.extractEvents(r,t,a,i))&&(o=T(o,s))}A(o)}}var En=!0;function Tn(e,t){if(!t)return null;var n=(wn(e)?_n:Sn).bind(null,e);t.addEventListener(e,n,!1)}function Cn(e,t){if(!t)return null;var n=(wn(e)?_n:Sn).bind(null,e);t.addEventListener(e,n,!0)}function _n(e,t){Ne(Sn,e,t)}function Sn(e,t){if(En){var n=Be(t);if(null===(n=P(n))||"number"!==typeof n.tag||2===tn(n)||(n=null),xn.length){var r=xn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Fe(On,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>xn.length&&xn.push(e)}}}var In={},jn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function Dn(e){return Object.prototype.hasOwnProperty.call(e,An)||(e[An]=jn++,In[e[An]]={}),In[e[An]]}function Nn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Rn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pn(e,t){var n,r=Rn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rn(r)}}function Fn(){for(var e=window,t=Nn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Nn((e=t.contentWindow).document)}return t}function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Mn(e){var t=Fn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Ln(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Pn(n,a);var o=Pn(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bn=G&&"documentMode"in document&&11>=document.documentMode,Un={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Vn=null,qn=null,zn=null,Kn=!1;function Gn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Kn||null==Vn||Vn!==Nn(n)?null:("selectionStart"in(n=Vn)&&Ln(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},zn&&en(zn,n)?null:(zn=n,(e=se.getPooled(Un.select,qn,e,t)).type="select",e.target=Vn,K(e),e))}var Wn={eventTypes:Un,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Dn(a),i=k.onSelect;for(var o=0;o<i.length;o++){var u=i[o];if(!a.hasOwnProperty(u)||!a[u]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?L(t):window,e){case"focus":(Me(a)||"true"===a.contentEditable)&&(Vn=a,qn=t,zn=null);break;case"blur":zn=qn=Vn=null;break;case"mousedown":Kn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Kn=!1,Gn(n,r);case"selectionchange":if(Bn)break;case"keydown":case"keyup":return Gn(n,r)}return null}};function Hn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Qn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Yn(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:gt(n)}}function $n(e,t){var n=gt(t.value),r=gt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}I.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=M,x=F,O=L,I.injectEventPluginsByName({SimpleEventPlugin:kn,EnterLeaveEventPlugin:$t,ChangeEventPlugin:Bt,SelectEventPlugin:Wn,BeforeInputEventPlugin:Te});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Zn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function ar(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];function sr(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function cr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=sr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(or).forEach(function(e){ur.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var lr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(e,t){t&&(lr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!==typeof t.style&&o("62",""))}function hr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dr(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=k[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Cn("scroll",e);break;case"focus":case"blur":Cn("focus",e),Cn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Ue(i)&&Cn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&Tn(i,e)}n[i]=!0}}}function pr(){}var vr=null,yr=null;function mr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,kr="function"===typeof clearTimeout?clearTimeout:void 0,wr=a.unstable_scheduleCallback,xr=a.unstable_cancelCallback;function Or(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Er(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Tr=[],Cr=-1;function _r(e){0>Cr||(e.current=Tr[Cr],Tr[Cr]=null,Cr--)}function Sr(e,t){Tr[++Cr]=e.current,e.current=t}var Ir={},jr={current:Ir},Ar={current:!1},Dr=Ir;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Ir;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pr(e){_r(Ar),_r(jr)}function Fr(e){_r(Ar),_r(jr)}function Lr(e,t,n){jr.current!==Ir&&o("168"),Sr(jr,t),Sr(Ar,n)}function Mr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in e||o("108",ut(t)||"Unknown",a);return i({},n,r)}function Br(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Ir,Dr=jr.current,Sr(jr,t),Sr(Ar,Ar.current),!0}function Ur(e,t,n){var r=e.stateNode;r||o("169"),n?(t=Mr(e,t,Dr),r.__reactInternalMemoizedMergedChildContext=t,_r(Ar),_r(jr),Sr(jr,t)):_r(Ar),Sr(Ar,n)}var Vr=null,qr=null;function zr(e){return function(t){try{return e(t)}catch(n){}}}function Kr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Gr(e,t,n,r){return new Kr(e,t,n,r)}function Wr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,t){var n=e.alternate;return null===n?((n=Gr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qr(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Wr(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case Ye:return Yr(n.children,i,a,t);case et:return Xr(n,3|i,a,t);case Xe:return Xr(n,2|i,a,t);case $e:return(e=Gr(12,n,t,4|i)).elementType=$e,e.type=$e,e.expirationTime=a,e;case nt:return(e=Gr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Je:u=10;break e;case Ze:u=9;break e;case tt:u=11;break e;case rt:u=14;break e;case it:u=16,r=null;break e}o("130",null==e?e:typeof e,"")}return(t=Gr(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Yr(e,t,n,r){return(e=Gr(7,e,r,t)).expirationTime=n,e}function Xr(e,t,n,r){return e=Gr(8,e,r,t),t=0===(1&t)?Xe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function $r(e,t,n){return(e=Gr(6,e,null,t)).expirationTime=n,e}function Jr(e,t,n){return(t=Gr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,a=t.latestPingedTime;0===(i=0!==i?i:a)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function ai(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var oi={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=xu(),i=Ya(r=Yo(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),zo(),$a(e,i),Jo(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=xu(),i=Ya(r=Yo(r,e));i.tag=za,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),zo(),$a(e,i),Jo(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=xu(),r=Ya(n=Yo(n,e));r.tag=Ka,void 0!==t&&null!==t&&(r.callback=t),zo(),$a(e,r),Jo(e,n)}};function ui(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,a))}function si(e,t,n){var r=!1,i=Ir,a=t.contextType;return"object"===typeof a&&null!==a?a=Va(a):(i=Rr(t)?Dr:jr.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Nr(e,i):Ir),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oi,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ci(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oi.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var a=t.contextType;"object"===typeof a&&null!==a?i.context=Va(a):(a=Rr(t)?Dr:jr.current,i.context=Nr(e,a)),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState),"function"===typeof(a=t.getDerivedStateFromProps)&&(ai(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&oi.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(to(e,a,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var fi=Array.isArray;function hi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&o("309"),r=n.stateNode),r||o("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!==typeof e&&o("284"),n._owner||o("290",e)}return e}function di(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function pi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Hr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=hi(e,t,n),r.return=e,r):((r=Qr(n.type,n.key,n.props,null,e.mode,r)).ref=hi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Yr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$r(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case He:return(n=Qr(t.type,t.key,t.props,null,e.mode,n)).ref=hi(e,null,t),n.return=e,n;case Qe:return(t=Jr(t,e.mode,n)).return=e,t}if(fi(t)||ot(t))return(t=Yr(t,e.mode,n,null)).return=e,t;di(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case He:return n.key===i?n.type===Ye?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case Qe:return n.key===i?l(e,t,n,r):null}if(fi(n)||ot(n))return null!==i?null:f(e,t,n,r,null);di(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case He:return e=e.get(null===r.key?n:r.key)||null,r.type===Ye?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case Qe:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(fi(r)||ot(r))return f(t,e=e.get(n)||null,r,i,null);di(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach(function(e){return t(i,e)}),c}function y(i,u,s,c){var l=ot(s);"function"!==typeof l&&o("150"),null==(s=l.call(s))&&o("151");for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,c);if(null===b){v||(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=a(b,u,y),null===f?l=b:f.sibling=b,f=b,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach(function(e){return t(i,e)}),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===Ye&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case He:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?a.type===Ye:c.elementType===a.type){n(e,c.sibling),(r=i(c,a.type===Ye?a.props.children:a.props)).ref=hi(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===Ye?((r=Yr(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Qr(a.type,a.key,a.props,null,e.mode,s)).ref=hi(e,r,a),s.return=e,e=s)}return u(e);case Qe:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jr(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$r(a,e.mode,s)).return=e,e=r),u(e);if(fi(a))return v(e,r,a,s);if(ot(a))return y(e,r,a,s);if(l&&di(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:o("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var vi=pi(!0),yi=pi(!1),mi={},gi={current:mi},bi={current:mi},ki={current:mi};function wi(e){return e===mi&&o("174"),e}function xi(e,t){Sr(ki,t),Sr(bi,e),Sr(gi,mi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}_r(gi),Sr(gi,t)}function Oi(e){_r(gi),_r(bi),_r(ki)}function Ei(e){wi(ki.current);var t=wi(gi.current),n=tr(t,e.type);t!==n&&(Sr(bi,e),Sr(gi,n))}function Ti(e){bi.current===e&&(_r(gi),_r(bi))}var Ci=0,_i=2,Si=4,Ii=8,ji=16,Ai=32,Di=64,Ni=128,Ri=Ke.ReactCurrentDispatcher,Pi=0,Fi=null,Li=null,Mi=null,Bi=null,Ui=null,Vi=null,qi=0,zi=null,Ki=0,Gi=!1,Wi=null,Hi=0;function Qi(){o("321")}function Yi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Xi(e,t,n,r,i,a){if(Pi=a,Fi=t,Mi=null!==e?e.memoizedState:null,Ri.current=null===Mi?ca:la,t=n(r,i),Gi){do{Gi=!1,Hi+=1,Mi=null!==e?e.memoizedState:null,Vi=Bi,zi=Ui=Li=null,Ri.current=la,t=n(r,i)}while(Gi);Wi=null,Hi=0}return Ri.current=sa,(e=Fi).memoizedState=Bi,e.expirationTime=qi,e.updateQueue=zi,e.effectTag|=Ki,e=null!==Li&&null!==Li.next,Pi=0,Vi=Ui=Bi=Mi=Li=Fi=null,qi=0,zi=null,Ki=0,e&&o("300"),t}function $i(){Ri.current=sa,Pi=0,Vi=Ui=Bi=Mi=Li=Fi=null,qi=0,zi=null,Ki=0,Gi=!1,Wi=null,Hi=0}function Ji(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ui?Bi=Ui=e:Ui=Ui.next=e,Ui}function Zi(){if(null!==Vi)Vi=(Ui=Vi).next,Mi=null!==(Li=Mi)?Li.next:null;else{null===Mi&&o("310");var e={memoizedState:(Li=Mi).memoizedState,baseState:Li.baseState,queue:Li.queue,baseUpdate:Li.baseUpdate,next:null};Ui=null===Ui?Bi=e:Ui.next=e,Mi=Li.next}return Ui}function ea(e,t){return"function"===typeof t?t(e):t}function ta(e){var t=Zi(),n=t.queue;if(null===n&&o("311"),n.lastRenderedReducer=e,0<Hi){var r=n.dispatch;if(null!==Wi){var i=Wi.get(n);if(void 0!==i){Wi.delete(n);var a=t.memoizedState;do{a=e(a,i.action),i=i.next}while(null!==i);return Jt(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var u=t.baseUpdate;if(a=t.baseState,null!==u?(null!==r&&(r.next=null),r=u.next):r=null!==r?r.next:null,null!==r){var s=i=null,c=r,l=!1;do{var f=c.expirationTime;f<Pi?(l||(l=!0,s=u,i=a),f>qi&&(qi=f)):a=c.eagerReducer===e?c.eagerState:e(a,c.action),u=c,c=c.next}while(null!==c&&c!==r);l||(s=u,i=a),Jt(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseUpdate=s,t.baseState=i,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===zi?(zi={lastEffect:null}).lastEffect=e.next=e:null===(t=zi.lastEffect)?zi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,zi.lastEffect=e),e}function ra(e,t,n,r){var i=Ji();Ki|=e,i.memoizedState=na(t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Zi();r=void 0===r?null:r;var a=void 0;if(null!==Li){var o=Li.memoizedState;if(a=o.destroy,null!==r&&Yi(r,o.deps))return void na(Ci,n,a,r)}Ki|=e,i.memoizedState=na(t,n,a,r)}function aa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function oa(){}function ua(e,t,n){25>Hi||o("301");var r=e.alternate;if(e===Fi||null!==r&&r===Fi)if(Gi=!0,e={expirationTime:Pi,action:n,eagerReducer:null,eagerState:null,next:null},null===Wi&&(Wi=new Map),void 0===(n=Wi.get(t)))Wi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{zo();var i=xu(),a={expirationTime:i=Yo(i,e),action:n,eagerReducer:null,eagerState:null,next:null},u=t.last;if(null===u)a.next=a;else{var s=u.next;null!==s&&(a.next=s),u.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(a.eagerReducer=r,a.eagerState=l,Jt(l,c))return}catch(f){}Jo(e,i)}}var sa={readContext:Va,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi},ca={readContext:Va,useCallback:function(e,t){return Ji().memoizedState=[e,void 0===t?null:t],e},useContext:Va,useEffect:function(e,t){return ra(516,Ni|Di,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ra(4,Si|Ai,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,Si|Ai,e,t)},useMemo:function(e,t){var n=Ji();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ua.bind(null,Fi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ji().memoizedState=e},useState:function(e){var t=Ji();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e}).dispatch=ua.bind(null,Fi,e),[t.memoizedState,e]},useDebugValue:oa},la={readContext:Va,useCallback:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Va,useEffect:function(e,t){return ia(516,Ni|Di,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ia(4,Si|Ai,aa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ia(4,Si|Ai,e,t)},useMemo:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ta,useRef:function(){return Zi().memoizedState},useState:function(e){return ta(ea)},useDebugValue:oa},fa=null,ha=null,da=!1;function pa(e,t){var n=Gr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function va(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ya(e){if(da){var t=ha;if(t){var n=t;if(!va(e,t)){if(!(t=Or(n))||!va(e,t))return e.effectTag|=2,da=!1,void(fa=e);pa(fa,n)}fa=e,ha=Er(t)}else e.effectTag|=2,da=!1,fa=e}}function ma(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;fa=e}function ga(e){if(e!==fa)return!1;if(!da)return ma(e),da=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=ha;t;)pa(e,t),t=Or(t);return ma(e),ha=fa?Or(e.stateNode):null,!0}function ba(){ha=fa=null,da=!1}var ka=Ke.ReactCurrentOwner,wa=!1;function xa(e,t,n,r){t.child=null===e?yi(t,null,n,r):vi(t,e.child,n,r)}function Oa(e,t,n,r,i){n=n.render;var a=t.ref;return Ua(t,i),r=Xi(e,t,n,r,a,i),null===e||wa?(t.effectTag|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Da(e,t,i))}function Ea(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Wr(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Qr(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ta(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Da(e,t,a):(t.effectTag|=1,(e=Hr(o,r)).ref=t.ref,e.return=t,t.child=e)}function Ta(e,t,n,r,i,a){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(wa=!1,i<a)?Da(e,t,a):_a(e,t,n,r,a)}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function _a(e,t,n,r,i){var a=Rr(n)?Dr:jr.current;return a=Nr(t,a),Ua(t,i),n=Xi(e,t,n,r,a,i),null===e||wa?(t.effectTag|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Da(e,t,i))}function Sa(e,t,n,r,i){if(Rr(n)){var a=!0;Br(t)}else a=!1;if(Ua(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),si(t,n,r),li(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Va(c):c=Nr(t,c=Rr(n)?Dr:jr.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ci(t,o,r,c),Wa=!1;var h=t.memoizedState;s=o.state=h;var d=t.updateQueue;null!==d&&(to(t,d,r,o,i),s=t.memoizedState),u!==r||h!==s||Ar.current||Wa?("function"===typeof l&&(ai(t,n,l,r),s=t.memoizedState),(u=Wa||ui(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,u=t.memoizedProps,o.props=t.type===t.elementType?u:ri(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Va(c):c=Nr(t,c=Rr(n)?Dr:jr.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ci(t,o,r,c),Wa=!1,s=t.memoizedState,h=o.state=s,null!==(d=t.updateQueue)&&(to(t,d,r,o,i),h=t.memoizedState),u!==r||s!==h||Ar.current||Wa?("function"===typeof l&&(ai(t,n,l,r),h=t.memoizedState),(l=Wa||ui(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Ia(e,t,n,r,a,i)}function Ia(e,t,n,r,i,a){Ca(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ur(t,n,!1),Da(e,t,a);r=t.stateNode,ka.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=vi(t,e.child,null,a),t.child=vi(t,null,u,a)):xa(e,t,u,a),t.memoizedState=r.state,i&&Ur(t,n,!0),t.child}function ja(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),xi(e,t.containerInfo)}function Aa(e,t,n){var r=t.mode,i=t.pendingProps,a=t.memoizedState;if(0===(64&t.effectTag)){a=null;var o=!1}else a={timedOutAt:null!==a?a.timedOutAt:0},o=!0,t.effectTag&=-65;if(null===e)if(o){var u=i.fallback;e=Yr(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Yr(u,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=yi(t,null,i.children,n);else null!==e.memoizedState?(u=(r=e.child).sibling,o?(n=i.fallback,i=Hr(r,r.pendingProps),0===(1&t.mode)&&((o=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=o)),r=i.sibling=Hr(u,n,u.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=vi(t,r.child,i.children,n)):(u=e.child,o?(o=i.fallback,(i=Yr(null,r,0,null)).child=u,0===(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Yr(o,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=vi(t,u,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=a,t.child=n,r}function Da(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Hr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Na(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Ar.current)wa=!0;else if(r<n){switch(wa=!1,t.tag){case 3:ja(t),ba();break;case 5:Ei(t);break;case 1:Rr(t.type)&&Br(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:Ma(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Aa(e,t,n):null!==(t=Da(e,t,n))?t.sibling:null}return Da(e,t,n)}}else wa=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Nr(t,jr.current);if(Ua(t,n),i=Xi(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,$i(),Rr(r)){var a=!0;Br(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var u=r.getDerivedStateFromProps;"function"===typeof u&&ai(t,r,u,e),i.updater=oi,t.stateNode=i,i._reactInternalFiber=t,li(t,r,e,n),t=Ia(null,t,r,!0,a,n)}else t.tag=0,xa(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"===typeof e)return Wr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),a=ri(e,a),u=void 0,i){case 0:u=_a(null,t,e,a,n);break;case 1:u=Sa(null,t,e,a,n);break;case 11:u=Oa(null,t,e,a,n);break;case 14:u=Ea(null,t,e,ri(e.type,a),r,n);break;default:o("306",e,"")}return u;case 0:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return ja(t),null===(r=t.updateQueue)&&o("282"),i=null!==(i=t.memoizedState)?i.element:null,to(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(ba(),t=Da(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(ha=Er(t.stateNode.containerInfo),fa=t,i=da=!0),i?(t.effectTag|=2,t.child=yi(t,null,r,n)):(xa(e,t,r,n),ba()),t=t.child),t;case 5:return Ei(t),null===e&&ya(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,gr(r,i)?u=null:null!==a&&gr(r,a)&&(t.effectTag|=16),Ca(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(xa(e,t,u,n),t=t.child),t;case 6:return null===e&&ya(t),null;case 13:return Aa(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vi(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,u=t.memoizedProps,Ma(t,a=i.value),null!==u){var s=u.value;if(0===(a=Jt(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!Ar.current){t=Da(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.contextDependencies;if(null!==c){u=s.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=Ya(n)).tag=Ka,$a(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var f=s.return;null!==f;){var h=f.alternate;if(f.childExpirationTime<l)f.childExpirationTime=l,null!==h&&h.childExpirationTime<l&&(h.childExpirationTime=l);else{if(!(null!==h&&h.childExpirationTime<l))break;h.childExpirationTime=l}f=f.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Ua(t,n),r=r(i=Va(i,a.unstable_observedBits)),t.effectTag|=1,xa(e,t,r,n),t.child;case 14:return a=ri(i=t.type,t.pendingProps),Ea(e,t,i,a=ri(i.type,a),r,n);case 15:return Ta(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rr(r)?(e=!0,Br(t)):e=!1,Ua(t,n),si(t,r,i),li(t,r,i,n),Ia(null,t,r,!0,e,n)}o("156")}var Ra={current:null},Pa=null,Fa=null,La=null;function Ma(e,t){var n=e.type._context;Sr(Ra,n._currentValue),n._currentValue=t}function Ba(e){var t=Ra.current;_r(Ra),e.type._context._currentValue=t}function Ua(e,t){Pa=e,La=Fa=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(wa=!0),e.contextDependencies=null}function Va(e,t){return La!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(La=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Fa?(null===Pa&&o("308"),Fa=t,Pa.contextDependencies={first:t,expirationTime:0}):Fa=Fa.next=t),e._currentValue}var qa=0,za=1,Ka=2,Ga=3,Wa=!1;function Ha(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Qa(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ya(e){return{expirationTime:e,tag:qa,payload:null,callback:null,next:null,nextEffect:null}}function Xa(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function $a(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ha(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ha(e.memoizedState),i=n.updateQueue=Ha(n.memoizedState)):r=e.updateQueue=Qa(i):null===i&&(i=n.updateQueue=Qa(r));null===i||r===i?Xa(r,t):null===r.lastUpdate||null===i.lastUpdate?(Xa(r,t),Xa(i,t)):(Xa(r,t),i.lastUpdate=t)}function Ja(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ha(e.memoizedState):Za(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Za(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Qa(t)),t}function eo(e,t,n,r,a,o){switch(n.tag){case za:return"function"===typeof(e=n.payload)?e.call(o,r,a):e;case Ga:e.effectTag=-2049&e.effectTag|64;case qa:if(null===(a="function"===typeof(e=n.payload)?e.call(o,r,a):e)||void 0===a)break;return i({},r,a);case Ka:Wa=!0}return r}function to(e,t,n,r,i){Wa=!1;for(var a=(t=Za(e,t)).baseState,o=null,u=0,s=t.firstUpdate,c=a;null!==s;){var l=s.expirationTime;l<i?(null===o&&(o=s,a=c),u<l&&(u=l)):(c=eo(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=s:(t.lastEffect.nextEffect=s,t.lastEffect=s))),s=s.next}for(l=null,s=t.firstCapturedUpdate;null!==s;){var f=s.expirationTime;f<i?(null===l&&(l=s,null===o&&(a=c)),u<f&&(u=f)):(c=eo(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=s:(t.lastCapturedEffect.nextEffect=s,t.lastCapturedEffect=s))),s=s.next}null===o&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===l&&(a=c),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=l,e.expirationTime=u,e.memoizedState=c}function no(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ro(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ro(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ro(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&o("191",n),n.call(r)}e=e.nextEffect}}function io(e,t){return{value:e,source:t,stack:st(t)}}function ao(e){e.effectTag|=4}var oo=void 0,uo=void 0,so=void 0,co=void 0;oo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},uo=function(){},so=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u=t.stateNode;switch(wi(gi.current),e=null,n){case"input":o=bt(u,o),r=bt(u,r),e=[];break;case"option":o=Hn(u,o),r=Hn(u,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Yn(u,o),r=Yn(u,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(u.onclick=pr)}fr(n,r),u=n=void 0;var s=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(u in c)c.hasOwnProperty(u)&&(s||(s={}),s[u]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(s||(s={}),s[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(s||(s={}),s[u]=l[u])}else s||(e||(e=[]),e.push(n,s)),s=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(n,""+l)):"children"===n?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=l&&dr(a,n),e||c===l||(e=[])):(e=e||[]).push(n,l))}s&&(e=e||[]).push("style",s),a=e,(t.updateQueue=a)&&ao(t)}},co=function(e,t,n,r){n!==r&&ao(t)};var lo="function"===typeof WeakSet?WeakSet:Set;function fo(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=st(n)),null!==n&&ut(n.type),t=t.value,null!==e&&1===e.tag&&ut(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function ho(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Qo(e,n)}else t.current=null}function po(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Ci){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Ci&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function vo(e){switch("function"===typeof qr&&qr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(a){Qo(i,a)}}n=n.next}while(n!==t)}break;case 1:if(ho(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Qo(e,a)}break;case 5:ho(e);break;case 4:go(e)}}function yo(e){return 5===e.tag||3===e.tag||4===e.tag}function mo(e){e:{for(var t=e.return;null!==t;){if(yo(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ar(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||yo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var a=t,u=i.stateNode,s=n;8===a.nodeType?a.parentNode.insertBefore(u,s):a.insertBefore(u,s)}else t.insertBefore(i.stateNode,n);else r?(u=t,s=i.stateNode,8===u.nodeType?(a=u.parentNode).insertBefore(s,u):(a=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==a.onclick||(a.onclick=pr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function go(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,u=a;;)if(vo(u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===a)break;for(;null===u.sibling;){if(null===u.return||u.return===a)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(a=r,u=t.stateNode,8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(vo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function bo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:po(Si,Ii,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&function(e,t,n,r,i){e[R]=i,"input"===n&&"radio"===i.type&&null!=i.name&&wt(e,i),hr(n,r),r=hr(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],u=t[a+1];"style"===o?cr(e,u):"dangerouslySetInnerHTML"===o?ir(e,u):"children"===o?ar(e,u):mt(e,o,u,r)}switch(n){case"input":xt(e,i);break;case"textarea":$n(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Qn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Qn(e,!!i.multiple,i.defaultValue,!0):Qn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,a,i,e,r)}break;case 6:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=xu())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=sr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var u=t.stateNode;null===u&&(u=t.stateNode=new lo),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Yo(t=xu(),e),null!==(e=$o(e,t))&&(Zr(e,t),0!==(t=e.expirationTime)&&Ou(e,t))}.bind(null,t,e);u.has(e)||(u.add(e),e.then(n,n))})}break;case 17:break;default:o("163")}}var ko="function"===typeof WeakMap?WeakMap:Map;function wo(e,t,n){(n=Ya(n)).tag=Ga,n.payload={element:null};var r=t.value;return n.callback=function(){Du(r),fo(e,t)},n}function xo(e,t,n){(n=Ya(n)).tag=Ga;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Mo?Mo=new Set([this]):Mo.add(this));var n=t.value,i=t.stack;fo(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Oo(e){switch(e.tag){case 1:Rr(e.type)&&Pr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Oi(),Fr(),0!==(64&(t=e.effectTag))&&o("285"),e.effectTag=-2049&t|64,e;case 5:return Ti(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Oi(),null;case 10:return Ba(e),null;default:return null}}var Eo=Ke.ReactCurrentDispatcher,To=Ke.ReactCurrentOwner,Co=1073741822,_o=!1,So=null,Io=null,jo=0,Ao=-1,Do=!1,No=null,Ro=!1,Po=null,Fo=null,Lo=null,Mo=null;function Bo(){if(null!==So)for(var e=So.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Pr();break;case 3:Oi(),Fr();break;case 5:Ti(t);break;case 4:Oi();break;case 10:Ba(t)}e=e.return}Io=null,jo=0,Ao=-1,Do=!1,So=null}function Uo(){for(;null!==No;){var e=No.effectTag;if(16&e&&ar(No.stateNode,""),128&e){var t=No.alternate;null!==t&&(null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null))}switch(14&e){case 2:mo(No),No.effectTag&=-3;break;case 6:mo(No),No.effectTag&=-3,bo(No.alternate,No);break;case 4:bo(No.alternate,No);break;case 8:go(e=No),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}No=No.nextEffect}}function Vo(){for(;null!==No;){if(256&No.effectTag)e:{var e=No.alternate,t=No;switch(t.tag){case 0:case 11:case 15:po(_i,Ci,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:o("163")}}No=No.nextEffect}}function qo(e,t){for(;null!==No;){var n=No.effectTag;if(36&n){var r=No.alternate,i=No,a=t;switch(i.tag){case 0:case 11:case 15:po(ji,Ai,i);break;case 1:var u=i.stateNode;if(4&i.effectTag)if(null===r)u.componentDidMount();else{var s=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);u.componentDidUpdate(s,r.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&no(0,r,u);break;case 3:if(null!==(r=i.updateQueue)){if(u=null,null!==i.child)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}no(0,r,u)}break;case 5:a=i.stateNode,null===r&&4&i.effectTag&&mr(i.type,i.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:o("163")}}128&n&&(null!==(i=No.ref)&&(a=No.stateNode,"function"===typeof i?i(a):i.current=a)),512&n&&(Po=e),No=No.nextEffect}}function zo(){null!==Fo&&xr(Fo),null!==Lo&&Lo()}function Ko(e,t){Ro=_o=!0,e.current===t&&o("177");var n=e.pendingCommitExpirationTime;0===n&&o("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Zr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,t)):t>n&&Zr(e,t)}ni(0,e)}(e,i>r?i:r),To.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,vr=En,yr=function(){var e=Fn();if(Ln(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(d){t=null;break e}var a=0,o=-1,u=-1,s=0,c=0,l=e,f=null;t:for(;;){for(var h;l!==t||0!==r&&3!==l.nodeType||(o=a+r),l!==i||0!==n&&3!==l.nodeType||(u=a+n),3===l.nodeType&&(a+=l.nodeValue.length),null!==(h=l.firstChild);)f=l,l=h;for(;;){if(l===e)break t;if(f===t&&++s===r&&(o=a),f===i&&++c===n&&(u=a),null!==(h=l.nextSibling))break;f=(l=f).parentNode}l=h}t=-1===o||-1===u?null:{start:o,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),En=!1,No=r;null!==No;){i=!1;var u=void 0;try{Vo()}catch(c){i=!0,u=c}i&&(null===No&&o("178"),Qo(No,u),null!==No&&(No=No.nextEffect))}for(No=r;null!==No;){i=!1,u=void 0;try{Uo()}catch(c){i=!0,u=c}i&&(null===No&&o("178"),Qo(No,u),null!==No&&(No=No.nextEffect))}for(Mn(yr),yr=null,En=!!vr,vr=null,e.current=t,No=r;null!==No;){i=!1,u=void 0;try{qo(e,n)}catch(c){i=!0,u=c}i&&(null===No&&o("178"),Qo(No,u),null!==No&&(No=No.nextEffect))}if(null!==r&&null!==Po){var s=function(e,t){Lo=Fo=Po=null;var n=iu;iu=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var a=t;po(Ni,Ci,a),po(Ci,Di,a)}catch(s){r=!0,i=s}r&&Qo(t,i)}t=t.nextEffect}while(null!==t);iu=n,0!==(n=e.expirationTime)&&Ou(e,n),lu||iu||Su(1073741823,!1)}.bind(null,e,r);Fo=a.unstable_runWithPriority(a.unstable_NormalPriority,function(){return wr(s)}),Lo=s}_o=Ro=!1,"function"===typeof Vr&&Vr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Mo=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Go(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){So=e;e:{var a=t,u=jo,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rr(t.type)&&Pr();break;case 3:Oi(),Fr(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==a&&null!==a.child||(ga(t),t.effectTag&=-3),uo(t);break;case 5:Ti(t);var c=wi(ki.current);if(u=t.type,null!==a&&null!=t.stateNode)so(a,t,u,s,c),a.ref!==t.ref&&(t.effectTag|=128);else if(s){var l=wi(gi.current);if(ga(t)){a=(s=t).stateNode;var f=s.type,h=s.memoizedProps,d=c;switch(a[N]=s,a[R]=h,u=void 0,c=f){case"iframe":case"object":Tn("load",a);break;case"video":case"audio":for(f=0;f<te.length;f++)Tn(te[f],a);break;case"source":Tn("error",a);break;case"img":case"image":case"link":Tn("error",a),Tn("load",a);break;case"form":Tn("reset",a),Tn("submit",a);break;case"details":Tn("toggle",a);break;case"input":kt(a,h),Tn("invalid",a),dr(d,"onChange");break;case"select":a._wrapperState={wasMultiple:!!h.multiple},Tn("invalid",a),dr(d,"onChange");break;case"textarea":Xn(a,h),Tn("invalid",a),dr(d,"onChange")}for(u in fr(c,h),f=null,h)h.hasOwnProperty(u)&&(l=h[u],"children"===u?"string"===typeof l?a.textContent!==l&&(f=["children",l]):"number"===typeof l&&a.textContent!==""+l&&(f=["children",""+l]):b.hasOwnProperty(u)&&null!=l&&dr(d,u));switch(c){case"input":qe(a),Ot(a,h,!0);break;case"textarea":qe(a),Jn(a);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(a.onclick=pr)}u=f,s.updateQueue=u,(s=null!==u)&&ao(t)}else{h=t,d=u,a=s,f=9===c.nodeType?c:c.ownerDocument,l===Zn.html&&(l=er(d)),l===Zn.html?"script"===d?((a=f.createElement("div")).innerHTML="<script><\/script>",f=a.removeChild(a.firstChild)):"string"===typeof a.is?f=f.createElement(d,{is:a.is}):(f=f.createElement(d),"select"===d&&(d=f,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):f=f.createElementNS(l,d),(a=f)[N]=h,a[R]=s,oo(a,t,!1,!1),d=a;var p=c,v=hr(f=u,h=s);switch(f){case"iframe":case"object":Tn("load",d),c=h;break;case"video":case"audio":for(c=0;c<te.length;c++)Tn(te[c],d);c=h;break;case"source":Tn("error",d),c=h;break;case"img":case"image":case"link":Tn("error",d),Tn("load",d),c=h;break;case"form":Tn("reset",d),Tn("submit",d),c=h;break;case"details":Tn("toggle",d),c=h;break;case"input":kt(d,h),c=bt(d,h),Tn("invalid",d),dr(p,"onChange");break;case"option":c=Hn(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},c=i({},h,{value:void 0}),Tn("invalid",d),dr(p,"onChange");break;case"textarea":Xn(d,h),c=Yn(d,h),Tn("invalid",d),dr(p,"onChange");break;default:c=h}fr(f,c),l=void 0;var y=f,m=d,g=c;for(l in g)if(g.hasOwnProperty(l)){var k=g[l];"style"===l?cr(m,k):"dangerouslySetInnerHTML"===l?null!=(k=k?k.__html:void 0)&&ir(m,k):"children"===l?"string"===typeof k?("textarea"!==y||""!==k)&&ar(m,k):"number"===typeof k&&ar(m,""+k):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?null!=k&&dr(p,l):null!=k&&mt(m,l,k,v))}switch(f){case"input":qe(d),Ot(d,h,!1);break;case"textarea":qe(d),Jn(d);break;case"option":null!=h.value&&d.setAttribute("value",""+gt(h.value));break;case"select":(c=d).multiple=!!h.multiple,null!=(d=h.value)?Qn(c,!!h.multiple,d,!1):null!=h.defaultValue&&Qn(c,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof c.onClick&&(d.onclick=pr)}(s=mr(u,s))&&ao(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 6:a&&null!=t.stateNode?co(a,t,a.memoizedProps,s):("string"!==typeof s&&(null===t.stateNode&&o("166")),a=wi(ki.current),wi(gi.current),ga(t)?(u=(s=t).stateNode,a=s.memoizedProps,u[N]=s,(s=u.nodeValue!==a)&&ao(t)):(u=t,(s=(9===a.nodeType?a:a.ownerDocument).createTextNode(s))[N]=t,u.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=u,So=t;break e}s=null!==s,u=null!==a&&null!==a.memoizedState,null!==a&&!s&&u&&(null!==(a=a.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=a,a.nextEffect=c):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),(s||u)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Oi(),uo(t);break;case 10:Ba(t);break;case 9:case 14:break;case 17:Rr(t.type)&&Pr();break;case 18:break;default:o("156")}So=null}if(t=e,1===jo||1!==t.childExpirationTime){for(s=0,u=t.child;null!==u;)(a=u.expirationTime)>s&&(s=a),(c=u.childExpirationTime)>s&&(s=c),u=u.sibling;t.childExpirationTime=s}if(null!==So)return So;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Oo(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Wo(e){var t=Na(e.alternate,e,jo);return e.memoizedProps=e.pendingProps,null===t&&(t=Go(e)),To.current=null,t}function Ho(e,t){_o&&o("243"),zo(),_o=!0;var n=Eo.current;Eo.current=sa;var r=e.nextExpirationTimeToWorkOn;r===jo&&e===Io&&null!==So||(Bo(),jo=r,So=Hr((Io=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==So&&!Cu();)So=Wo(So);else for(;null!==So;)So=Wo(So)}catch(m){if(La=Fa=Pa=null,$i(),null===So)i=!0,Du(m);else{null===So&&o("271");var a=So,u=a.return;if(null!==u){e:{var s=e,c=u,l=a,f=m;if(u=jo,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==f&&"object"===typeof f&&"function"===typeof f.then){var h=f;f=c;var d=-1,p=-1;do{if(13===f.tag){var v=f.alternate;if(null!==v&&null!==(v=v.memoizedState)){p=10*(1073741822-v.timedOutAt);break}"number"===typeof(v=f.pendingProps.maxDuration)&&(0>=v?d=0:(-1===d||v<d)&&(d=v))}f=f.return}while(null!==f);f=c;do{if((v=13===f.tag)&&(v=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),v){if(null===(c=f.updateQueue)?((c=new Set).add(h),f.updateQueue=c):c.add(h),0===(1&f.mode)){f.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((u=Ya(1073741823)).tag=Ka,$a(l,u))),l.expirationTime=1073741823;break e}c=u;var y=(l=s).pingCache;null===y?(y=l.pingCache=new ko,v=new Set,y.set(h,v)):void 0===(v=y.get(h))&&(v=new Set,y.set(h,v)),v.has(c)||(v.add(c),l=Xo.bind(null,l,h,c),h.then(l,l)),-1===d?s=1073741823:(-1===p&&(p=10*(1073741822-ti(s,u))-5e3),s=p+d),0<=s&&Ao<s&&(Ao=s),f.effectTag|=2048,f.expirationTime=u;break e}f=f.return}while(null!==f);f=Error((ut(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+st(l))}Do=!0,f=io(f,l),s=c;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=u,Ja(s,u=wo(s,f,u));break e;case 1:if(d=f,p=s.type,l=s.stateNode,0===(64&s.effectTag)&&("function"===typeof p.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Mo||!Mo.has(l)))){s.effectTag|=2048,s.expirationTime=u,Ja(s,u=xo(s,d,u));break e}}s=s.return}while(null!==s)}So=Go(a);continue}i=!0,Du(m)}}break}if(_o=!1,Eo.current=n,La=Fa=Pa=null,$i(),i)Io=null,e.finishedWork=null;else if(null!==So)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&o("281"),Io=null,Do){if(i=e.latestPendingTime,a=e.latestSuspendedTime,u=e.latestPingedTime,0!==i&&i<r||0!==a&&a<r||0!==u&&u<r)return ei(e,r),void wu(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void wu(e,n,r,t,-1)}t&&-1!==Ao?(ei(e,r),(t=10*(1073741822-ti(e,r)))<Ao&&(Ao=t),t=10*(1073741822-xu()),t=Ao-t,wu(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Qo(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mo||!Mo.has(r)))return $a(n,e=xo(n,e=io(t,e),1073741823)),void Jo(n,1073741823);break;case 3:return $a(n,e=wo(n,e=io(t,e),1073741823)),void Jo(n,1073741823)}n=n.return}3===e.tag&&($a(e,n=wo(e,n=io(t,e),1073741823)),Jo(e,1073741823))}function Yo(e,t){var n=a.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(_o&&!Ro)r=jo;else{switch(n){case a.unstable_ImmediatePriority:r=1073741823;break;case a.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case a.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case a.unstable_LowPriority:case a.unstable_IdlePriority:r=1;break;default:o("313")}null!==Io&&r===jo&&--r}return n===a.unstable_UserBlockingPriority&&(0===uu||r<uu)&&(uu=r),r}function Xo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Io&&jo===n?Io=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&Ou(e,n)))}function $o(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Jo(e,t){null!==(e=$o(e,t))&&(!_o&&0!==jo&&t>jo&&Bo(),Zr(e,t),_o&&!Ro&&Io===e||Ou(e,e.expirationTime),mu>yu&&(mu=0,o("185")))}function Zo(e,t,n,r,i){return a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var eu=null,tu=null,nu=0,ru=void 0,iu=!1,au=null,ou=0,uu=0,su=!1,cu=null,lu=!1,fu=!1,hu=null,du=a.unstable_now(),pu=1073741822-(du/10|0),vu=pu,yu=50,mu=0,gu=null;function bu(){pu=1073741822-((a.unstable_now()-du)/10|0)}function ku(e,t){if(0!==nu){if(t<nu)return;null!==ru&&a.unstable_cancelCallback(ru)}nu=t,e=a.unstable_now()-du,ru=a.unstable_scheduleCallback(_u,{timeout:10*(1073741822-t)-e})}function wu(e,t,n,r,i){e.expirationTime=r,0!==i||Cu()?0<i&&(e.timeoutHandle=br(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,bu(),vu=pu,Iu(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function xu(){return iu?vu:(Eu(),0!==ou&&1!==ou||(bu(),vu=pu),vu)}function Ou(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===tu?(eu=tu=e,e.nextScheduledRoot=e):(tu=tu.nextScheduledRoot=e).nextScheduledRoot=eu):t>e.expirationTime&&(e.expirationTime=t),iu||(lu?fu&&(au=e,ou=1073741823,ju(e,1073741823,!1)):1073741823===t?Su(1073741823,!1):ku(e,t))}function Eu(){var e=0,t=null;if(null!==tu)for(var n=tu,r=eu;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===tu)&&o("244"),r===r.nextScheduledRoot){eu=tu=r.nextScheduledRoot=null;break}if(r===eu)eu=i=r.nextScheduledRoot,tu.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===tu){(tu=n).nextScheduledRoot=eu,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===tu)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}au=t,ou=e}var Tu=!1;function Cu(){return!!Tu||!!a.unstable_shouldYield()&&(Tu=!0)}function _u(){try{if(!Cu()&&null!==eu){bu();var e=eu;do{var t=e.expirationTime;0!==t&&pu<=t&&(e.nextExpirationTimeToWorkOn=pu),e=e.nextScheduledRoot}while(e!==eu)}Su(0,!0)}finally{Tu=!1}}function Su(e,t){if(Eu(),t)for(bu(),vu=pu;null!==au&&0!==ou&&e<=ou&&!(Tu&&pu>ou);)ju(au,ou,pu>ou),Eu(),bu(),vu=pu;else for(;null!==au&&0!==ou&&e<=ou;)ju(au,ou,!1),Eu();if(t&&(nu=0,ru=null),0!==ou&&ku(au,ou),mu=0,gu=null,null!==hu)for(e=hu,hu=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){su||(su=!0,cu=r)}}if(su)throw e=cu,cu=null,su=!1,e}function Iu(e,t){iu&&o("253"),au=e,ou=t,ju(e,t,!1),Su(1073741823,!1)}function ju(e,t,n){if(iu&&o("245"),iu=!0,n){var r=e.finishedWork;null!==r?Au(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,kr(r)),Ho(e,n),null!==(r=e.finishedWork)&&(Cu()?e.finishedWork=r:Au(e,r,t)))}else null!==(r=e.finishedWork)?Au(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,kr(r)),Ho(e,n),null!==(r=e.finishedWork)&&Au(e,r,t));iu=!1}function Au(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===hu?hu=[r]:hu.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===gu?mu++:(gu=e,mu=0),a.unstable_runWithPriority(a.unstable_ImmediatePriority,function(){Ko(e,t)})}function Du(e){null===au&&o("246"),au.expirationTime=0,su||(su=!0,cu=e)}function Nu(e,t){var n=lu;lu=!0;try{return e(t)}finally{(lu=n)||iu||Su(1073741823,!1)}}function Ru(e,t){if(lu&&!fu){fu=!0;try{return e(t)}finally{fu=!1}}return e(t)}function Pu(e,t,n){lu||iu||0===uu||(Su(uu,!1),uu=0);var r=lu;lu=!0;try{return a.unstable_runWithPriority(a.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(lu=r)||iu||Su(1073741823,!1)}}function Fu(e,t,n,r,i){var a=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||o("170");var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Rr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);o("171"),u=void 0}if(1===n.tag){var s=n.type;if(Rr(s)){n=Mr(n,s,u);break e}}n=u}else n=Ir;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Ya(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),zo(),$a(a,i),Jo(a,r),r}function Lu(e,t,n,r){var i=t.current;return Fu(e,t,n,i=Yo(xu(),i),r)}function Mu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bu(e){var t=1073741822-25*(1+((1073741822-xu()+500)/25|0));t>=Co&&(t=Co-1),this._expirationTime=Co=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Uu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Vu(e,t,n){e={current:t=Gr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zu(e,t,n,r,i){var a=n._reactRootContainer;if(a){if("function"===typeof i){var o=i;i=function(){var e=Mu(a._internalRoot);o.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Vu(e,!1,t)}(n,r),"function"===typeof i){var u=i;i=function(){var e=Mu(a._internalRoot);u.call(e)}}Ru(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)})}return Mu(a._internalRoot)}function Ku(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return qu(t)||o("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Qe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ce=function(e,t,n){switch(t){case"input":if(xt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=M(r);i||o("90"),ze(r),xt(r,i)}}}break;case"textarea":$n(e,n);break;case"select":null!=(t=n.value)&&Qn(e,!!n.multiple,t,!1)}},Bu.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Uu;return Fu(e,t,null,n,r._onCommit),r},Bu.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bu.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&o("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Iu(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Bu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Uu.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Uu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&o("191",n),n()}}},Vu.prototype.render=function(e,t){var n=this._internalRoot,r=new Uu;return null!==(t=void 0===t?null:t)&&r.then(t),Lu(e,n,null,r._onCommit),r},Vu.prototype.unmount=function(e){var t=this._internalRoot,n=new Uu;return null!==(e=void 0===e?null:e)&&n.then(e),Lu(null,t,null,n._onCommit),n},Vu.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Uu;return null!==(n=void 0===n?null:n)&&i.then(n),Lu(t,r,e,i._onCommit),i},Vu.prototype.createBatch=function(){var e=new Bu(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},De=Nu,Ne=Pu,Re=function(){iu||0===uu||(Su(uu,!1),uu=0)};var Gu={createPortal:Ku,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return qu(t)||o("200"),zu(null,e,t,!0,n)},render:function(e,t,n){return qu(t)||o("200"),zu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return qu(n)||o("200"),(null==e||void 0===e._reactInternalFiber)&&o("38"),zu(e,t,n,!1,r)},unmountComponentAtNode:function(e){return qu(e)||o("40"),!!e._reactRootContainer&&(Ru(function(){zu(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Ku.apply(void 0,arguments)},unstable_batchedUpdates:Nu,unstable_interactiveUpdates:Pu,flushSync:function(e,t){iu&&o("187");var n=lu;lu=!0;try{return Zo(e,t)}finally{lu=n,Su(1073741823,!1)}},unstable_createRoot:function(e,t){return qu(e)||o("299","unstable_createRoot"),new Vu(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=lu;lu=!0;try{Zo(e)}finally{(lu=t)||iu||Su(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,L,M,I.injectEventPluginsByName,g,K,function(e){C(e,z)},je,Ae,Sn,A]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Vr=zr(function(e){return t.onCommitFiberRoot(n,e)}),qr=zr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(i({},e,{overrideProps:null,currentDispatcherRef:Ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:P,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Wu={default:Gu},Hu=Wu&&Gu||Wu;e.exports=Hu.default||Hu},function(e,t,n){"use strict";e.exports=n(57)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,a=-1,o=-1,u=!1,s=!1;function c(){if(!u){var e=n.expirationTime;s?O():s=!0,x(h,e)}}function l(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var a=i,u=o;i=e,o=t;try{var s=r()}finally{i=a,o=u}if("function"===typeof s)if(s={callback:s,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=s.next=s.previous=s;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=s,c()),(t=r.previous).next=r.previous=s,s.next=r,s.previous=t}}function f(){if(-1===a&&null!==n&&1===n.priorityLevel){u=!0;try{do{l()}while(null!==n&&1===n.priorityLevel)}finally{u=!1,null!==n?c():s=!1}}}function h(e){u=!0;var i=r;r=e;try{if(e)for(;null!==n;){var a=t.unstable_now();if(!(n.expirationTime<=a))break;do{l()}while(null!==n&&n.expirationTime<=a)}else if(null!==n)do{l()}while(null!==n&&!E())}finally{u=!1,r=i,null!==n?c():s=!1,f()}}var d,p,v=Date,y="function"===typeof setTimeout?setTimeout:void 0,m="function"===typeof clearTimeout?clearTimeout:void 0,g="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function k(e){d=g(function(t){m(p),e(t)}),p=y(function(){b(d),e(t.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return v.now()};var x,O,E,T=null;if("undefined"!==typeof window?T=window:"undefined"!==typeof e&&(T=e),T&&T._schedMock){var C=T._schedMock;x=C[0],O=C[1],E=C[2],t.unstable_now=C[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var _=null,S=function(e){if(null!==_)try{_(e)}finally{_=null}};x=function(e){null!==_?setTimeout(x,0,e):(_=e,setTimeout(S,0,!1))},O=function(){_=null},E=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var I=null,j=!1,A=-1,D=!1,N=!1,R=0,P=33,F=33;E=function(){return R<=t.unstable_now()};var L=new MessageChannel,M=L.port2;L.port1.onmessage=function(){j=!1;var e=I,n=A;I=null,A=-1;var r=t.unstable_now(),i=!1;if(0>=R-r){if(!(-1!==n&&n<=r))return D||(D=!0,k(B)),I=e,void(A=n);i=!0}if(null!==e){N=!0;try{e(i)}finally{N=!1}}};var B=function e(t){if(null!==I){k(e);var n=t-R+F;n<F&&P<F?(8>n&&(n=8),F=n<P?P:n):P=n,R=t+F,j||(j=!0,M.postMessage(void 0))}else D=!1};x=function(e,t){I=e,A=t,N||0>t?M.postMessage(void 0):D||(D=!0,k(B))},O=function(){I=null,j=!1,A=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,o=a;i=e,a=t.unstable_now();try{return n()}finally{i=r,a=o,f()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,o=a;i=n,a=t.unstable_now();try{return e()}finally{i=r,a=o,f()}},t.unstable_scheduleCallback=function(e,r){var o=-1!==a?a:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=o+r.timeout;else switch(i){case 1:r=o+-1;break;case 2:r=o+250;break;case 5:r=o+1073741823;break;case 4:r=o+1e4;break;default:r=o+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{o=null;var u=n;do{if(u.expirationTime>r){o=u;break}u=u.next}while(u!==n);null===o?o=n:o===n&&(n=e,c()),(r=o.previous).next=o.previous=e,e.next=o,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,o=a;i=n,a=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,a=o,f()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<o||E())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(23))},,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r=l;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?d:f,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=s;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function v(){}function y(){}function m(){}var g={};g[a]=function(){return this};var b=Object.getPrototypeOf,k=b&&b(b(S([])));k&&k!==n&&r.call(k,a)&&(g=k);var w=m.prototype=v.prototype=Object.create(g);function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){var t;this._invoke=function(n,i){function a(){return new Promise(function(t,a){!function t(n,i,a,o){var u=c(e[n],e,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(l).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,o)})}o(u.arg)}(n,i,t,a)})}return t=t?t.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,m[u]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},x(O.prototype),O.prototype[o]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,r,i){var a=new O(s(t,n,r,i));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(w),w[u]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(61),i=n(30),a=n(40),o=n(26)("socket.io-client");e.exports=t=s;var u=t.managers={};function s(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),s=i.source,c=i.id,l=i.path,f=u[c]&&l in u[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(o("ignoring socket cache for %s",s),n=a(s,t)):(u[c]||(o("new io instance for %s",s),u[c]=a(s,t)),n=u[c]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=s,t.Manager=n(40),t.Socket=n(46)},function(e,t,n){var r=n(37),i=n(26)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!==typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!==typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var a=o[s];n=i.call(e,a),o.splice(s,1),s--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(63),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,i,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:""}).DEBUG),e}(t=e.exports=n(65)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())}).call(this,n(24))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var a=o[s];n=i.call(e,a),o.splice(s,1),s--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(66),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,i,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r=n(38),i=n(39),a=Object.prototype.toString,o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===a.call(Blob),u="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===a.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,a=e;return a.data=function e(t,n){if(!t)return t;if(i(t)){var a={_placeholder:!0,num:n.length};return n.push(t),a}if(r(t)){for(var o=new Array(t.length),u=0;u<t.length;u++)o[u]=e(t[u],n);return o}if("object"===typeof t&&!(t instanceof Date)){var o={};for(var s in t)o[s]=e(t[s],n);return o}return t}(n,t),a.attachments=t.length,{packet:a,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"===typeof t)for(var a in t)t[a]=e(t[a],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(s,c,l){if(!s)return s;if(o&&s instanceof Blob||u&&s instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--n||t(a)},f.readAsArrayBuffer(s)}else if(r(s))for(var h=0;h<s.length;h++)e(s[h],h,s);else if("object"===typeof s&&!i(s))for(var d in s)e(s[d],d,s)}(a),n||t(a)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=c(e),r=n[0],o=n[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),s=0,l=o>0?r-4:r,f=0;f<l;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=255&t;2===o&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,u[s++]=255&t);1===o&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,u[s++]=t>>8&255,u[s++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,u=n-i;o<u;o+=16383)a.push(l(e,o,o+16383>u?u:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],i[o.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],u=t;u<n;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===s)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,u,s,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(t*s-1)*Math.pow(2,i),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&u,d+=p,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(73),e.exports.parser=n(19)},function(e,t,n){var r=n(41),i=n(34),a=n(29)("engine.io-client:socket"),o=n(45),u=n(19),s=n(37),c=n(27);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"===typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"===typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=u.protocol,l.Socket=l,l.Transport=n(33),l.transports=n(41),l.parser=n(19),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),h(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{a('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}}))}function o(){n||(n=!0,h(),t.close(),t=null)}function u(n){var i=new Error("probe error: "+n);i.transport=t.name,o(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function s(){u("transport closed")}function c(){u("socket closed")}function f(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),o())}function h(){t.removeListener("open",i),t.removeListener("error",u),t.removeListener("close",s),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",u),t.once("close",s),this.once("close",c),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},function(e,t,n){var r=n(32),i=n(42),a=n(34),o=n(28),u=n(29)("engine.io-client:polling-xhr");function s(){}function c(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!==typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function l(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=c,e.exports.Request=l,o(c,i),c.prototype.supportsBinary=!0,c.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new l(e)},c.prototype.doWrite=function(e,t){var n="string"!==typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},c.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},a(l.prototype),l.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(a){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{t.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(a){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},u("xhr data %s",this.data),t.send(this.data)}catch(a){return void setTimeout(function(){n.onError(a)},0)}"undefined"!==typeof document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},l.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},l.prototype.cleanup=function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=s:this.xhr.onreadystatechange=s,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},l.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",h);else if("function"===typeof addEventListener){var f="onpagehide"in self?"pagehide":"unload";addEventListener(f,h,!1)}function h(){for(var e in l.requests)l.requests.hasOwnProperty(e)&&l.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),a=new Uint8Array(n-t),o=t,u=0;o<n;o++,u++)a[u]=i[o];return a.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(i=!0,t(e),t=r):0!==a.count||i||t(null,n)}}},function(e,t){var n,r,i,a=String.fromCharCode;function o(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function u(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(e,t){return a(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(u(e,t)||(e=65533),n=a(e>>12&15|224),n+=s(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=s(e,12),n+=s(e,6)),n+=a(63&e|128)}function l(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,a;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return u(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=o(e),i=r.length,a=-1,u="";++a<i;)u+=c(r[a],n);return u},decode:function(e,t){var u=!1!==(t=t||{}).strict;n=o(e),r=n.length,i=0;for(var s,c=[];!1!==(s=f(u));)c.push(s);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(c)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,a="";for(n=0;n<i;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return i%3===2?a=a.substring(0,a.length-1)+"=":i%3===1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(e){var t,r,i,a,o,u=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var l=new ArrayBuffer(u),f=new Uint8Array(l);for(t=0;t<s;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],f[c++]=r<<2|i>>4,f[c++]=(15&i)<<4|a>>2,f[c++]=(3&a)<<6|63&o;return l}}()},function(e,t){var n="undefined"!==typeof n?n:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function o(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function u(e,t){t=t||{};var r=new n;return o(e).forEach(function(e){r.append(e)}),t.type?r.getBlob(t.type):r.getBlob()}function s(e,t){return new Blob(o(e),t||{})}"undefined"!==typeof Blob&&(u.prototype=Blob.prototype,s.prototype=Blob.prototype),e.exports=r?i?Blob:s:a?u:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),u=0;u<o.length;u++)o[u]=arguments[u];o[0]=t.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var a=o[s];n=i.call(e,a),o.splice(s,1),s--}return n}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(84),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,i,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(t){var r=n(42),i=n(28);e.exports=l;var a,o=/\n/g,u=/\\n/g;function s(){}function c(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{}}function l(e){if(r.call(this,e),this.query=this.query||{},!a){var t=c();a=t.___eio=t.___eio||[]}this.index=a.length;var n=this;a.push(function(e){n.onData(e)}),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=s)},!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),a=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}function c(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(u,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(f){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,n(23))},function(e,t,n){(function(t){var r,i,a=n(33),o=n(19),u=n(27),s=n(28),c=n(44),l=n(29)("engine.io-client:websocket");if("undefined"!==typeof WebSocket)r=WebSocket;else if("undefined"!==typeof self)r=self.WebSocket||self.MozWebSocket;else try{i=n(87)}catch(d){}var f=r||i;function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=i),a.call(this,e)}e.exports=h,s(h,a),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},h.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,a=r;i<a;i++)!function(e){o.encodePacket(e,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),n.perMessageDeflate)("string"===typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,a)}catch(d){l("websocket closed before onclose event")}--r||u()})}(e[i]);function u(){n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0)}},h.prototype.onClose=function(){a.prototype.onClose.call(this)},h.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!!f&&!("__initialize"in f&&this.name===h.prototype.name)}}).call(this,n(31).Buffer)},,function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},,,,,,,,function(e,t,n){"use strict";var r=n(22),i=n(8),a=n(6),o=n(7),u=n(1),s=n(2),c=n(20),l=n(5),f=n(9),h=n(17),d="@firebase/firestore-compat",p="0.3.0";function v(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new l.g("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function y(){if("undefined"===typeof Uint8Array)throw new l.g("unimplemented","Uint8Arrays are not available in this environment.")}function m(){if(!Object(l.r)())throw new l.g("unimplemented","Blobs are unavailable in Firestore in this environment.")}var g=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"toBase64",value:function(){return m(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return y(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return m(),new e(l.b.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return y(),new e(l.b.fromUint8Array(t))}}]),e}();function b(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n=e,r=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if(s in n&&"function"===typeof n[s])return!0}}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return!1}(e,["next","error","complete"])}var k=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return Object(l.F)(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return Object(l.G)(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return Object(l.x)(e._delegate)}}]),e}(),w=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof l.m||(this._appCompat=t)}return Object(s.a)(e,[{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Object(l.s)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(l.A)(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Object(l.H)(this._delegate)}},{key:"disableNetwork",value:function(){return Object(l.D)(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(l.t)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return Object(l.lb)(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Object(l.Y)(this._delegate,e)}},{key:"collection",value:function(e){try{return new P(this,Object(l.y)(this._delegate,e))}catch(t){throw _(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new C(this,Object(l.E)(this._delegate,e))}catch(t){throw _(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new D(this,Object(l.z)(this._delegate,e))}catch(t){throw _(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Object(l.db)(this._delegate,function(n){return e(new O(t,n))})}},{key:"batch",value:function(){var e=this;return Object(l.K)(this._delegate),new E(new l.l(this._delegate,function(t){return Object(l.L)(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return Object(l.V)(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Object(l.W)(this._delegate,e).then(function(e){return e?new D(t,e):null})}},{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"app",get:function(){if(!this._appCompat)throw new l.g("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}}]),e}(),x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(i.a)(this,Object(a.a)(t).call(this))).firestore=e,n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"convertBytes",value:function(e){return new g(new l.b(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return C.forKey(t,this.firestore,null)}}]),t}(l.a);var O=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"get",value:function(e){var t=this,n=F(e);return this._delegate.get(n).then(function(e){return new j(t._firestore,new l.e(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=F(e);return n?(v("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=F(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=F(e);return this._delegate.delete(t),this}}]),e}(),E=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"set",value:function(e,t,n){var r=F(e);return n?(v("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=F(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=F(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),T=function(){function e(t,n,r){Object(u.a)(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Object(s.a)(e,[{key:"fromFirestore",value:function(e,t){var n=new l.i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new A(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new x(t),n),i.set(n,a)),a}}]),e}();T.INSTANCES=new WeakMap;var C=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"collection",value:function(e){try{return new P(this.firestore,Object(l.y)(this._delegate,e))}catch(t){throw _(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.d&&Object(l.cb)(this._delegate,e)}},{key:"set",value:function(e,t){t=v("DocumentReference.set",t);try{return t?Object(l.fb)(this._delegate,e,t):Object(l.fb)(this._delegate,e)}catch(n){throw _(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Object(l.kb)(this._delegate,e):l.kb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw _(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Object(l.B)(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=S(n),a=I(n,function(t){return new j(e.firestore,new l.e(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Object(l.X)(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.N)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.O)(this._delegate):Object(l.M)(this._delegate)).then(function(e){return new j(t.firestore,new l.e(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(T.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new P(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new l.g("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new l.d(n._delegate,r,new l.n(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new l.d(n._delegate,r,t))}}]),e}();function _(e,t,n){return e.message=e.message.replace(t,n),e}function S(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if("object"===typeof o&&!b(o))return o}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return{}}function I(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=b(e[0])?e[0]:b(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var j=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"ref",get:function(){return new C(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}}]),e}(),A=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"data",value:function(e){var t=this._delegate.data(e);return Object(l.q)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}]),t}(j),D=function(){function e(t,n){Object(u.a)(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x(t)}return Object(s.a)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.mb)(t,n,r)))}catch(i){throw _(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.Z)(t,n)))}catch(r){throw _(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.T)(t)))}catch(n){throw _(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Object(l.ab)(this._delegate,Object(l.U)(t)))}catch(n){throw _(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.jb.apply(void 0,arguments)))}catch(t){throw _(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.ib.apply(void 0,arguments)))}catch(t){throw _(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.J.apply(void 0,arguments)))}catch(t){throw _(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Object(l.ab)(this._delegate,l.I.apply(void 0,arguments)))}catch(t){throw _(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Object(l.bb)(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Object(l.Q)(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Object(l.R)(this._delegate):Object(l.P)(this._delegate)).then(function(e){return new R(t.firestore,new l.j(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=S(n),a=I(n,function(t){return new R(e.firestore,new l.j(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Object(l.X)(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(T.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),N=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new A(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),R=function(){function e(t,n){Object(u.a)(this,e),this._firestore=t,this._delegate=n}return Object(s.a)(e,[{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new N(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new A(n._firestore,r))})}},{key:"isEqual",value:function(e){return Object(l.hb)(this._delegate,e._delegate)}},{key:"query",get:function(){return new D(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new A(e._firestore,t)})}}]),e}(),P=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(i.a)(this,Object(a.a)(t).call(this,e,n))).firestore=e,r._delegate=n,r}return Object(o.a)(t,e),Object(s.a)(t,[{key:"doc",value:function(e){try{return new C(this.firestore,void 0===e?Object(l.E)(this._delegate):Object(l.E)(this._delegate,e))}catch(t){throw _(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return Object(l.u)(this._delegate,e).then(function(e){return new C(t.firestore,e)})}},{key:"isEqual",value:function(e){return Object(l.cb)(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new t(this.firestore,e?this._delegate.withConverter(T.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new C(this.firestore,e):null}}]),t}(D);function F(e){return Object(l.p)(e,l.d)}var L=function(){function e(){Object(u.a)(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._delegate=Object(r.a)(l.f,n)}return Object(s.a)(e,[{key:"isEqual",value:function(e){return(e=Object(f.l)(e))instanceof l.f&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(l.o.keyField().canonicalString())}}]),e}(),M=function(){function e(t){Object(u.a)(this,e),this._delegate=t}return Object(s.a)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=Object(l.eb)();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=Object(l.C)();return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=l.w.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=l.v.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=Object(l.S)(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),B={Firestore:w,GeoPoint:l.h,Timestamp:l.k,Blob:g,Transaction:O,WriteBatch:E,DocumentReference:C,DocumentSnapshot:j,Query:D,QueryDocumentSnapshot:A,QuerySnapshot:R,CollectionReference:P,FieldPath:L,FieldValue:M,setLogLevel:function(e){Object(l.gb)(e)},CACHE_SIZE_UNLIMITED:l.c};!function(e){var t;t=function(e,t){return new w(e,t,new k)},e.INTERNAL.registerComponent(new h.a("firestore-compat",function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},B))),e.registerVersion(d,p)}(c.a)}]]);
//# sourceMappingURL=2.28fb2d21.chunk.js.map